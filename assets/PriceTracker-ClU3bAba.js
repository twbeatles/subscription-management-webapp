import{j as e,a0 as p,a1 as f,a2 as j,T as y,d as N,$ as k,f as v}from"./vendor-ui-B6CU6qF1.js";import{r as b}from"./vendor-react-DtEkOSI3.js";import{P as u}from"./index-XBRr7Ttx.js";const w=u.reduce((s,d)=>(s[d.name.toLowerCase()]=d.defaultCost,s),{});function T({subscriptions:s,onUpdatePriceHistory:d}){const i=b.useMemo(()=>s.filter(r=>!r.isPaused).map(r=>{const t=r.priceHistory||[],c=r.cost,n=w[r.name.toLowerCase()];let o=0,m=0,g=null;if(t.length>0){const a=t[t.length-1].price;o=c-a,m=a>0?o/a*100:0,g=t[t.length-1].date}let h=null;if(n){const a=c-n;h={diff:a,percent:a/n*100,isHigher:a>0}}return{...r,priceChange:o,changePercent:m,lastChangeDate:g,history:t,avgPrice:n,comparedToAvg:h}}).sort((r,t)=>Math.abs(t.changePercent)-Math.abs(r.changePercent)),[s]),l=i.filter(r=>r.priceChange>0).length,x=i.filter(r=>r.priceChange<0).length;return s.length===0?null:e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-cyan-50 dark:bg-cyan-900/20 text-cyan-500",children:e.jsx(p,{className:"w-5 h-5"})}),"가격 변동 추적"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded-full",children:[e.jsx(f,{size:12}),l]}),x>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-green-500 bg-green-50 dark:bg-green-900/20 px-2 py-1 rounded-full",children:[e.jsx(j,{size:12}),x]})]})]}),e.jsx("div",{className:"space-y-3",children:i.slice(0,5).map(r=>{var t;return e.jsxs("div",{className:"p-3 rounded-xl bg-gray-50 dark:bg-dark-700/50 transition-all hover:bg-gray-100 dark:hover:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-white",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-sm text-gray-900 dark:text-white",children:[r.cost.toLocaleString(),"원"]}),r.priceChange!==0&&e.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-medium ${r.priceChange>0?"text-red-500":"text-green-500"}`,children:[r.priceChange>0?e.jsx(y,{size:12}):e.jsx(N,{size:12}),r.priceChange>0?"+":"",Math.round(r.changePercent),"%"]})]})]}),r.comparedToAvg&&e.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[e.jsxs("span",{className:"text-gray-400",children:["평균 ",(t=r.avgPrice)==null?void 0:t.toLocaleString(),"원"]}),e.jsx("span",{className:`font-medium ${r.comparedToAvg.isHigher?"text-amber-500":"text-green-500"}`,children:r.comparedToAvg.isHigher?`평균보다 ${Math.round(r.comparedToAvg.percent)}% 높음`:`평균보다 ${Math.abs(Math.round(r.comparedToAvg.percent))}% 낮음`})]}),r.history.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-dark-600",children:[e.jsx("p",{className:"text-[10px] font-medium text-gray-400 mb-1",children:"변동 기록"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:r.history.slice(-3).map((c,n)=>e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"text-gray-400",children:new Date(c.date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})}),e.jsxs("span",{className:"text-gray-600 dark:text-dark-300",children:[c.price.toLocaleString(),"원"]})]},n))})]})]},r.id)})}),l===0&&x===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"flex items-center justify-center gap-1 text-gray-400 mb-1",children:e.jsx(k,{size:16})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400",children:"가격 변동 기록이 없습니다"}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-1",children:"구독 가격이 변경되면 자동으로 기록됩니다"})]}),i.some(r=>r.changePercent>10)&&e.jsx("div",{className:"mt-4 p-3 rounded-xl bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400",children:[e.jsx(v,{size:14}),e.jsx("span",{className:"text-xs font-medium",children:"10% 이상 가격 인상된 구독이 있습니다"})]})})]})}export{T as default};
