import{j as e,A as c,x as C,U as z,z as S,b as A,L as D,o as U}from"./vendor-ui-DvkZaKaL.js";import{u as L,r as i}from"./vendor-react-Cr-SFtWI.js";import{u as P}from"./index-C0FEvpMP.js";function R(){var g,h;const a=L(),{user:o,userProfile:n,updateUserProfile:p,signOut:u,deleteAccount:k,isAdmin:f,isDemo:y}=P(),[t,d]=i.useState(!1),[x,s]=i.useState(null),[j,m]=i.useState(!1),[r,N]=i.useState({displayName:(n==null?void 0:n.displayName)||(o==null?void 0:o.displayName)||""}),v=async l=>{if(l.preventDefault(),!r.displayName.trim()){s({type:"error",text:"이름을 입력해주세요"});return}d(!0),s(null);try{await p({displayName:r.displayName.trim()}),s({type:"success",text:"프로필이 업데이트되었습니다"})}catch{s({type:"error",text:"업데이트 중 오류가 발생했습니다"})}finally{d(!1)}},b=async()=>{await u(),a("/login")},w=async()=>{try{d(!0),await k(),a("/login")}catch{s({type:"error",text:"계정 삭제 중 오류가 발생했습니다"}),d(!1)}};return y?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900 pb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary-600 to-violet-700 text-white",children:e.jsxs("div",{className:"max-w-lg mx-auto px-4 py-6",children:[e.jsxs("button",{onClick:()=>a("/"),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 text-sm transition-colors",children:[e.jsx(c,{size:18}),"돌아가기"]}),e.jsx("h1",{className:"text-xl font-bold",children:"데모 모드"})]})}),e.jsx("div",{className:"max-w-lg mx-auto px-4 pt-6",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-gray-200 dark:border-dark-700 p-6 text-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-dark-300 mb-4",children:"데모 모드에서는 프로필 설정을 변경할 수 없습니다."}),e.jsx("button",{onClick:b,className:"px-6 py-2.5 bg-primary-500 text-white rounded-xl font-medium hover:bg-primary-600 transition-colors",children:"데모 종료하기"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900 pb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary-600 to-violet-700 text-white",children:e.jsxs("div",{className:"max-w-lg mx-auto px-4 py-6",children:[e.jsxs("button",{onClick:()=>a("/"),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 text-sm transition-colors",children:[e.jsx(c,{size:18}),"돌아가기"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center text-2xl font-bold",children:((h=(g=r.displayName)==null?void 0:g.charAt(0))==null?void 0:h.toUpperCase())||"U"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:r.displayName||"사용자"}),e.jsx("p",{className:"text-white/70 text-sm",children:"프로필 설정"})]})]})]})}),e.jsxs("div",{className:"max-w-lg mx-auto px-4 -mt-4 space-y-4",children:[x&&e.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-3 ${x.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:[e.jsx(C,{size:18}),x.text]}),e.jsxs("form",{onSubmit:v,className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-gray-200 dark:border-dark-700 p-5",children:[e.jsxs("h2",{className:"font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(z,{size:18}),"프로필 정보"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-dark-300 mb-2",children:"이름"}),e.jsx("input",{type:"text",value:r.displayName,onChange:l=>N({...r,displayName:l.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",placeholder:"이름을 입력하세요"})]}),e.jsxs("button",{type:"submit",disabled:t,className:"w-full py-3 bg-primary-500 text-white rounded-xl font-medium hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[e.jsx(S,{size:18}),t?"저장 중...":"저장하기"]})]})]}),f&&e.jsxs("button",{onClick:()=>a("/admin"),className:"w-full p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl flex items-center justify-between hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"text-amber-600 dark:text-amber-400",size:20}),e.jsx("span",{className:"font-medium text-amber-800 dark:text-amber-300",children:"관리자 대시보드"})]}),e.jsx(c,{size:18,className:"rotate-180 text-amber-600 dark:text-amber-400"})]}),e.jsxs("button",{onClick:b,className:"w-full p-4 bg-white dark:bg-dark-800 border border-gray-200 dark:border-dark-700 rounded-2xl flex items-center gap-3 text-gray-600 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-700 transition-all",children:[e.jsx(D,{size:20}),e.jsx("span",{className:"font-medium",children:"로그아웃"})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-red-200 dark:border-red-900/50 p-5",children:[e.jsxs("h2",{className:"font-bold text-red-600 dark:text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(U,{size:18}),"계정 삭제"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400 mb-4",children:"계정을 삭제하면 모든 데이터가 영구적으로 삭제됩니다. 이 작업은 되돌릴 수 없습니다."}),j?e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-3 font-medium",children:"정말로 계정을 삭제하시겠습니까?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>m(!1),disabled:t,className:"flex-1 py-2 bg-white dark:bg-dark-700 border border-gray-200 dark:border-dark-600 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-dark-600 transition-colors",children:"취소"}),e.jsx("button",{onClick:w,disabled:t,className:"flex-1 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600 disabled:opacity-50 transition-colors",children:t?"삭제 중...":"삭제"})]})]}):e.jsx("button",{onClick:()=>m(!0),className:"w-full py-2.5 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 rounded-xl font-medium hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:"계정 삭제하기"})]})]})]})}export{R as default};
