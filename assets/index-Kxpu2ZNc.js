const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LoginPage-Be91I2dC.js","./vendor-ui-CpWBKq7F.js","./vendor-react-Cr-SFtWI.js","./ForgotPasswordPage-DWUdZgB3.js","./ProfilePage-BkzV1EOc.js"])))=>i.map(i=>d[i]);
import{j as e,C as be,S as pe,M as fe,a as Be,U as Je,b as Ge,L as Ve,X as V,T as ae,c as ye,d as G,e as Q,f as ke,R as Ye,g as He,D as J,h as Xe,i as Ke,k as je,P as ie,l as ee,m as we,E as ve,n as qe,o as Ze,p as Ne,q as Se,r as Qe,s as et,t as Ce,B as de,u as ce,W as tt,F as rt,v as st,w as at,x as nt}from"./vendor-ui-CpWBKq7F.js";import{a as ot,r as g,u as Ee,H as lt,R as it,b as B,N as dt,c as ct}from"./vendor-react-Cr-SFtWI.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var te={},xe=ot;te.createRoot=xe.createRoot,te.hydrateRoot=xe.hydrateRoot;const xt="modulepreload",mt=function(t,s){return new URL(t,s).href},me={},ne=function(s,n,a){let r=Promise.resolve();if(n&&n.length>0){const m=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),c=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=mt(l,a),l in me)return;me[l]=!0;const x=l.endsWith(".css"),d=x?'[rel="stylesheet"]':"";if(!!a)for(let b=m.length-1;b>=0;b--){const p=m[b];if(p.href===l&&(!x||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const o=document.createElement("link");if(o.rel=x?"stylesheet":xt,x||(o.as="script"),o.crossOrigin="",o.href=l,c&&o.setAttribute("nonce",c),document.head.appendChild(o),x)return new Promise((b,p)=>{o.addEventListener("load",b),o.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(m){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=m,window.dispatchEvent(h),!h.defaultPrevented)throw m}return r.then(m=>{for(const h of m||[])h.status==="rejected"&&i(h.reason);return s().catch(i)})},I={USERS:"sub_manager_users",CURRENT_USER_ID:"sub_manager_current_user_id",SUBSCRIPTIONS_PREFIX:"sub_manager_data_",SETTINGS_PREFIX:"sub_manager_settings_",GLOBAL_SETTINGS:"sub_manager_global_settings"},k={getUsers:()=>{try{const t=localStorage.getItem(I.USERS);return t?JSON.parse(t):[]}catch(t){return console.error("Error reading users from local storage",t),[]}},saveUsers:t=>{localStorage.setItem(I.USERS,JSON.stringify(t))},createUser:t=>{const s=k.getUsers(),n={id:`user_${Date.now()}`,displayName:t,createdAt:new Date().toISOString(),isAdmin:!1};return s.push(n),k.saveUsers(s),n},updateUser:(t,s)=>{const n=k.getUsers(),a=n.findIndex(r=>r.id===t);return a!==-1?(n[a]={...n[a],...s},k.saveUsers(n),n[a]):null},deleteUser:t=>{const n=k.getUsers().filter(a=>a.id!==t);k.saveUsers(n),localStorage.removeItem(`${I.SUBSCRIPTIONS_PREFIX}${t}`),localStorage.removeItem(`${I.SETTINGS_PREFIX}${t}`)},getCurrentUserId:()=>localStorage.getItem(I.CURRENT_USER_ID),login:t=>{localStorage.setItem(I.CURRENT_USER_ID,t)},logout:()=>{localStorage.removeItem(I.CURRENT_USER_ID)},getSubscriptions:t=>{if(!t)return[];try{const s=localStorage.getItem(`${I.SUBSCRIPTIONS_PREFIX}${t}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error reading subscriptions",s),[]}},saveSubscriptions:(t,s)=>{t&&localStorage.setItem(`${I.SUBSCRIPTIONS_PREFIX}${t}`,JSON.stringify(s))},getUserSettings:t=>{if(!t)return{budget:0,autoTheme:!1};try{const s=localStorage.getItem(`${I.SETTINGS_PREFIX}${t}`);return s?JSON.parse(s):{budget:0,autoTheme:!1}}catch(s){return console.error("Error reading user settings",s),{budget:0,autoTheme:!1}}},saveUserSettings:(t,s)=>{t&&localStorage.setItem(`${I.SETTINGS_PREFIX}${t}`,JSON.stringify(s))}},re=[{id:"demo-1",name:"Netflix",cost:17e3,billingDay:15,billingCycle:"monthly",category:"OTT",url:"https://www.netflix.com",customColor:"#E50914",isPaused:!1,notes:"í”„ë¦¬ë¯¸ì—„ ìš”ê¸ˆì œ"},{id:"demo-2",name:"Spotify",cost:10900,billingDay:20,billingCycle:"monthly",category:"Music",url:"https://www.spotify.com",customColor:"#1DB954",isPaused:!1,notes:""},{id:"demo-3",name:"YouTube Premium",cost:14900,billingDay:5,billingCycle:"monthly",category:"OTT",url:"https://www.youtube.com",customColor:"#FF0000",isPaused:!1,notes:"ê°€ì¡± ìš”ê¸ˆì œ"},{id:"demo-4",name:"ChatGPT Plus",cost:28600,billingDay:10,billingCycle:"monthly",category:"Work",url:"https://chat.openai.com",customColor:"#10A37F",isPaused:!1,notes:"GPT-4 ì‚¬ìš©"},{id:"demo-5",name:"Coupang Wow",cost:7890,billingDay:1,billingCycle:"monthly",category:"Shopping",url:"https://www.coupang.com",customColor:"#342971",isPaused:!1,notes:"ë¡œì¼“ë°°ì†¡ ë¬´ë£Œ"},{id:"demo-6",name:"iCloud+",cost:1100,billingDay:25,billingCycle:"monthly",category:"Utility",url:"https://www.icloud.com",customColor:"#3478F6",isPaused:!0,notes:"50GB ì €ìž¥ê³µê°„"},{id:"demo-7",name:"Notion",cost:1e4,billingDay:12,billingCycle:"monthly",category:"Work",url:"https://www.notion.so",customColor:"#000000",isPaused:!1,notes:"Plus ìš”ê¸ˆì œ"},{id:"demo-8",name:"ë°€ë¦¬ì˜ ì„œìž¬",cost:9900,billingDay:18,billingCycle:"monthly",category:"Education",url:"https://www.millie.co.kr",customColor:"#FFD700",isPaused:!1,notes:""}];function T(){const t=localStorage.getItem("demoSubscriptions");return t?JSON.parse(t):(localStorage.setItem("demoSubscriptions",JSON.stringify(re)),re)}function q(t){const s=T(),n=s.findIndex(a=>a.id===t.id);return n>=0?s[n]=t:(t.id=`demo-${Date.now()}`,s.push(t)),localStorage.setItem("demoSubscriptions",JSON.stringify(s)),t}function ut(t){const n=T().filter(a=>a.id!==t);localStorage.setItem("demoSubscriptions",JSON.stringify(n))}function De(){localStorage.removeItem("demoMode"),localStorage.removeItem("demoSubscriptions")}function Ie(){const t=localStorage.getItem("demoMode");if(!t)return null;const s=JSON.parse(t),n=new Date(s.expiresAt),a=new Date;if(n<=a)return De(),null;const r=n-a,i=Math.ceil(r/(1e3*60));return{...s,remainingMinutes:i,isExpired:!1}}const Pe=g.createContext();function gt({children:t}){const[s,n]=g.useState(null),[a,r]=g.useState(!1),[i,m]=g.useState(!0);g.useEffect(()=>{(()=>{if(Ie()){r(!0),m(!1);return}const w=k.getCurrentUserId();if(w){const C=k.getUsers().find(P=>P.id===w);C?n(C):k.logout()}m(!1)})()},[]);const h=async p=>{const w=k.getUsers().find(E=>E.id===p);if(!w)throw new Error("User not found");return k.login(p),n(w),r(!1),w},c=async p=>{const y=k.createUser(p);return await h(y.id),y},l=()=>{const p=new Date;p.setMinutes(p.getMinutes()+30),localStorage.setItem("demoMode",JSON.stringify({startedAt:new Date().toISOString(),expiresAt:p.toISOString()})),localStorage.setItem("demoSubscriptions",JSON.stringify(re)),r(!0),n(null)},x=()=>{De(),r(!1)},d=async p=>{if(!s)return;const y=k.updateUser(s.id,p);n(y)},u=async()=>{a?x():(k.logout(),n(null))},o=async()=>{s&&(k.deleteUser(s.id),await u())},b={user:s,userProfile:s,loading:i,isDemo:a,isAuthenticated:!!s||a,isAdmin:(s==null?void 0:s.isAdmin)||!1,login:h,register:c,updateProfile:d,updateUserProfile:d,logout:u,deleteAccount:o,startDemoMode:l,endDemoMode:x,signOut:u};return e.jsx(Pe.Provider,{value:b,children:t})}function Y(){const t=g.useContext(Pe);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const Te=g.createContext();function $e({children:t}){const[s,n]=g.useState(()=>{if(typeof window<"u"){const r=localStorage.getItem("theme");return r?r==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});g.useEffect(()=>{const r=document.documentElement;s?(r.classList.add("dark"),localStorage.setItem("theme","dark")):(r.classList.remove("dark"),localStorage.setItem("theme","light"))},[s]);const a=()=>n(r=>!r);return e.jsx(Te.Provider,{value:{isDark:s,toggleTheme:a},children:t})}function Oe(){const t=g.useContext(Te);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}function ht(t){const[s,n]=g.useState([]),[a,r]=g.useState(!0),[i,m]=g.useState(null);g.useEffect(()=>{if(!t){n([]),r(!1);return}try{r(!0);const o=k.getSubscriptions(t.id);n(o)}catch(o){console.error(o),m(o)}finally{r(!1)}},[t]);const h=g.useCallback(async o=>{if(t)try{const b={...o,id:`sub_${Date.now()}`,userId:t.id,createdAt:new Date().toISOString()},y=[...k.getSubscriptions(t.id),b];return k.saveSubscriptions(t.id,y),n(y),b.id}catch(b){throw m(b),b}},[t]),c=g.useCallback(async(o,b)=>{if(t)try{const y=k.getSubscriptions(t.id).map(w=>w.id===o?{...w,...b}:w);k.saveSubscriptions(t.id,y),n(y)}catch(p){throw m(p),p}},[t]),l=g.useCallback(async o=>{if(t)try{const p=k.getSubscriptions(t.id).filter(y=>y.id!==o);k.saveSubscriptions(t.id,p),n(p)}catch(b){throw m(b),b}},[t]),x=g.useCallback(async o=>{if(t)try{const p=k.getSubscriptions(t.id).find(y=>y.id===o);p&&await c(o,{isPaused:!p.isPaused})}catch(b){throw m(b),b}},[t,c]),d=g.useCallback(async()=>{if(t)try{k.saveSubscriptions(t.id,[]),n([])}catch(o){throw m(o),o}},[t]),u=g.useCallback(async o=>{if(t)try{const b=o.map(w=>({...w,id:w.id||`sub_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,userId:t.id,createdAt:new Date().toISOString()})),y=[...k.getSubscriptions(t.id),...b];k.saveSubscriptions(t.id,y),n(y)}catch(b){throw m(b),b}},[t]);return{subscriptions:s,loading:a,error:i,addSubscription:h,updateSubscription:c,deleteSubscription:l,togglePause:x,clearAllSubscriptions:d,importSubscriptions:u}}const bt=t=>{const s=new Date,n=s.getDate(),a=s.getMonth(),r=s.getFullYear();let i=new Date(r,a,t);for(n>t&&(i=new Date(r,a+1,t));i.getDate()!==t;)i.setDate(i.getDate()-1);if(n===t)return 0;const m=i.getTime()-s.getTime();return Math.ceil(m/(1e3*60*60*24))},pt=t=>{if(!t)return-1;const s=new Date(t);return Math.ceil((s-new Date)/(1e3*60*60*24))},Le="sub_manager_notifications",R=()=>"Notification"in window,Z=()=>R()?Notification.permission:"denied",ft=async()=>{if(!R())return!1;try{return await Notification.requestPermission()==="granted"}catch(t){return console.error("Failed to request notification permission:",t),!1}},se=(t,s={})=>{if(!R()||Notification.permission!=="granted")return null;const n={icon:"/favicon.ico",badge:"/favicon.ico",tag:"subscription-reminder",requireInteraction:!1,silent:!1,...s};try{const a=new Notification(t,n);return setTimeout(()=>a.close(),5e3),a}catch(a){return console.error("Failed to send notification:",a),null}},oe=()=>{try{const t=localStorage.getItem(Le);return t?JSON.parse(t):{enabled:!1,reminderDays:[3,1],lastChecked:null}}catch{return{enabled:!1,reminderDays:[3,1],lastChecked:null}}},le=t=>{localStorage.setItem(Le,JSON.stringify(t))},yt=t=>{const s=oe();if(!s.enabled||Notification.permission!=="granted")return;const n=new Date().toDateString();if(s.lastChecked===n)return;const a=t.filter(r=>!r.isPaused&&s.reminderDays.includes(r.daysLeft));if(a.length>0)if(a.length===1){const r=a[0];se("ðŸ’³ ê²°ì œì¼ ì•Œë¦¼",{body:`${r.name} ê²°ì œì¼ì´ ${r.daysLeft===0?"ì˜¤ëŠ˜":`${r.daysLeft}ì¼ í›„`}ìž…ë‹ˆë‹¤. (${r.cost.toLocaleString()}ì›)`,tag:`subscription-${r.id}`})}else{const r=a.reduce((i,m)=>i+m.cost,0);se("ðŸ’³ ê²°ì œì¼ ì•Œë¦¼",{body:`${a.length}ê°œì˜ êµ¬ë… ê²°ì œê°€ ê³§ ì˜ˆì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤. (ì´ ${r.toLocaleString()}ì›)`,tag:"subscription-multiple"})}le({...s,lastChecked:n})},kt=async()=>{const t=await ft();return t&&(le({enabled:!0,reminderDays:[3,1,0],lastChecked:null}),se("ðŸ”” ì•Œë¦¼ í™œì„±í™”",{body:"êµ¬ë… ê²°ì œì¼ ì•Œë¦¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.",tag:"notification-enabled"})),t},jt=()=>{const t=oe();le({...t,enabled:!1})};function wt({subscriptionCount:t,onOpenSettings:s}){var w;const{isDark:n,toggleTheme:a}=Oe(),{user:r,userProfile:i,isAdmin:m,isDemo:h,signOut:c}=Y(),l=Ee(),[x,d]=g.useState(!1),[u,o]=g.useState(!1);g.useEffect(()=>{const E=()=>{o(window.scrollY>20)};return window.addEventListener("scroll",E),()=>window.removeEventListener("scroll",E)},[]);const b=async()=>{await c(),l("/login")},p=(i==null?void 0:i.displayName)||(r==null?void 0:r.displayName)||(h?"ì²´í—˜ ì¤‘":"ì‚¬ìš©ìž"),y=(i==null?void 0:i.photoURL)||(r==null?void 0:r.photoURL);return e.jsx("header",{className:`sticky top-0 z-30 transition-all duration-300 ${u?"glass shadow-sm dark:shadow-dark-900/50 py-3":"bg-transparent py-5"}`,children:e.jsxs("div",{className:"max-w-xl mx-auto px-5 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary-500 to-primary-600 p-2.5 rounded-xl text-white shadow-lg shadow-primary-500/30 transition-transform hover:scale-105 active:scale-95",children:e.jsx(be,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight leading-none",children:"êµ¬ë… ë§¤ë‹ˆì €"}),e.jsx("p",{className:"text-[10px] text-gray-500 dark:text-dark-400 font-medium tracking-wide ml-0.5",children:"PRO EDITION"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-xs font-medium text-gray-600 dark:text-dark-300 bg-white dark:bg-dark-800 border border-gray-100 dark:border-dark-700 px-3 py-1.5 rounded-full shadow-sm",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"font-bold",children:t}),e.jsx("span",{children:"êµ¬ë…ì¤‘"})]}),e.jsx("button",{onClick:a,className:"p-2.5 rounded-xl text-gray-500 dark:text-dark-400 hover:bg-white dark:hover:bg-dark-700 hover:text-primary-600 dark:hover:text-primary-400 hover:shadow-sm border border-transparent hover:border-gray-100 dark:hover:border-dark-600 transition-all duration-200","aria-label":"í…Œë§ˆ ë³€ê²½",children:n?e.jsx(pe,{size:18}):e.jsx(fe,{size:18})}),e.jsx("button",{onClick:s,className:"p-2.5 rounded-xl text-gray-500 dark:text-dark-400 hover:bg-white dark:hover:bg-dark-700 hover:text-primary-600 dark:hover:text-primary-400 hover:shadow-sm border border-transparent hover:border-gray-100 dark:hover:border-dark-600 transition-all duration-200 hover:rotate-45","aria-label":"ì„¤ì •",children:e.jsx(Be,{size:18})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>d(!x),className:"flex items-center gap-2 pl-1 pr-0.5 rounded-xl transition-colors",children:e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 p-[2px] shadow-md shadow-primary-500/20 hover:shadow-lg hover:shadow-primary-500/30 transition-all",children:e.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-dark-800 flex items-center justify-center overflow-hidden",children:y?e.jsx("img",{src:y,alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-bold text-xs",children:((w=p[0])==null?void 0:w.toUpperCase())||"U"})})})}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-3 w-56 bg-white dark:bg-dark-800 rounded-2xl shadow-xl border border-gray-100 dark:border-dark-700 z-20 overflow-hidden animate-slide-up origin-top-right",children:[e.jsxs("div",{className:"p-4 bg-gray-50/50 dark:bg-dark-700/50 border-b border-gray-100 dark:border-dark-600",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-sm truncate",children:p}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 truncate mt-0.5 font-medium",children:(r==null?void 0:r.email)||"ì²´í—˜ ëª¨ë“œ"})]}),e.jsxs("div",{className:"p-1.5 space-y-0.5",children:[!h&&e.jsxs("button",{onClick:()=>{d(!1),l("/profile")},className:"w-full px-3 py-2.5 text-left text-sm font-medium text-gray-700 dark:text-dark-200 hover:bg-gray-50 dark:hover:bg-dark-700 rounded-xl flex items-center gap-3 transition-colors",children:[e.jsx(Je,{size:16,className:"text-gray-400 dark:text-dark-400"}),"í”„ë¡œí•„ ì„¤ì •"]}),m&&e.jsxs("button",{onClick:()=>{d(!1),l("/admin")},className:"w-full px-3 py-2.5 text-left text-sm font-medium text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-xl flex items-center gap-3 transition-colors",children:[e.jsx(Ge,{size:16}),"ê´€ë¦¬ìž ëŒ€ì‹œë³´ë“œ"]}),e.jsxs("button",{onClick:()=>{d(!1),b()},className:"w-full px-3 py-2.5 text-left text-sm font-medium text-gray-700 dark:text-dark-200 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 dark:hover:text-red-400 rounded-xl flex items-center gap-3 transition-colors",children:[e.jsx(Ve,{size:16,className:"text-gray-400 dark:text-dark-400 group-hover:text-red-500"}),h?"ì²´í—˜ ì¢…ë£Œ":"ë¡œê·¸ì•„ì›ƒ"]})]})]})]})]})]})]})})}const S={OTT:"#E50914",Music:"#1DB954",Shopping:"#FF9900",Utility:"#00A4EF",Work:"#5A5A5A",Education:"#FFD700",Health:"#10B981",Finance:"#8B5CF6",Etc:"#808080"},F={OTT:"ì˜ìƒ/ìŠ¤íŠ¸ë¦¬ë°",Music:"ìŒì•…",Shopping:"ì‡¼í•‘/ì´ì»¤ë¨¸ìŠ¤",Utility:"ìœ í‹¸ë¦¬í‹°",Work:"ì—…ë¬´/ìƒì‚°ì„±",Education:"êµìœ¡/í•™ìŠµ",Health:"ê±´ê°•/ìš´ë™",Finance:"ê¸ˆìœµ/íˆ¬ìž",Etc:"ê¸°íƒ€"},vt=[{name:"Netflix",category:"OTT",color:"#E50914",url:"https://www.netflix.com",defaultCost:17e3},{name:"YouTube Premium",category:"OTT",color:"#FF0000",url:"https://www.youtube.com",defaultCost:14900},{name:"Disney+",category:"OTT",color:"#113CCF",url:"https://www.disneyplus.com",defaultCost:9900},{name:"Wavve",category:"OTT",color:"#1C1B1F",url:"https://www.wavve.com",defaultCost:13900},{name:"Tving",category:"OTT",color:"#FF153C",url:"https://www.tving.com",defaultCost:13900},{name:"Watcha",category:"OTT",color:"#FF0558",url:"https://watcha.com",defaultCost:12900},{name:"Spotify",category:"Music",color:"#1DB954",url:"https://www.spotify.com",defaultCost:10900},{name:"Melon",category:"Music",color:"#00CD3C",url:"https://www.melon.com",defaultCost:10900},{name:"Apple Music",category:"Music",color:"#FA233B",url:"https://music.apple.com",defaultCost:10900},{name:"Genie",category:"Music",color:"#3D85C6",url:"https://www.genie.co.kr",defaultCost:10900},{name:"Bugs",category:"Music",color:"#FF3366",url:"https://music.bugs.co.kr",defaultCost:9500},{name:"Coupang Wow",category:"Shopping",color:"#342971",url:"https://www.coupang.com",defaultCost:7890},{name:"Naver Plus",category:"Shopping",color:"#03C75A",url:"https://nid.naver.com",defaultCost:4900},{name:"SSG ìœ ë‹ˆë²„ìŠ¤",category:"Shopping",color:"#FF5A5A",url:"https://www.ssg.com",defaultCost:4900},{name:"Notion",category:"Work",color:"#000000",url:"https://www.notion.so",defaultCost:1e4},{name:"ChatGPT Plus",category:"Work",color:"#10A37F",url:"https://chat.openai.com",defaultCost:2e4},{name:"Figma",category:"Work",color:"#F24E1E",url:"https://www.figma.com",defaultCost:15e3},{name:"GitHub Copilot",category:"Work",color:"#000000",url:"https://github.com",defaultCost:1e4},{name:"Slack",category:"Work",color:"#4A154B",url:"https://slack.com",defaultCost:1e4},{name:"Zoom",category:"Work",color:"#2D8CFF",url:"https://zoom.us",defaultCost:16e3},{name:"Adobe CC",category:"Work",color:"#FF0000",url:"https://www.adobe.com",defaultCost:24e3},{name:"ë°€ë¦¬ì˜ ì„œìž¬",category:"Education",color:"#FFD700",url:"https://www.millie.co.kr",defaultCost:9900},{name:"Duolingo",category:"Education",color:"#58CC02",url:"https://www.duolingo.com",defaultCost:14900},{name:"Coursera",category:"Education",color:"#0056D2",url:"https://www.coursera.org",defaultCost:59e3},{name:"í´ëž˜ìŠ¤101",category:"Education",color:"#FF6B00",url:"https://class101.net",defaultCost:19900},{name:"Nike Training Club",category:"Health",color:"#000000",url:"https://www.nike.com",defaultCost:0},{name:"Keep",category:"Health",color:"#00C8FF",url:"https://www.gotokeep.com",defaultCost:9900},{name:"iCloud+",category:"Utility",color:"#3478F6",url:"https://www.icloud.com",defaultCost:1100},{name:"Google One",category:"Utility",color:"#4285F4",url:"https://one.google.com",defaultCost:2400},{name:"Dropbox",category:"Utility",color:"#0061FF",url:"https://www.dropbox.com",defaultCost:12e3},{name:"1Password",category:"Utility",color:"#1A8CFF",url:"https://1password.com",defaultCost:5e3},{name:"NordVPN",category:"Utility",color:"#4687FF",url:"https://nordvpn.com",defaultCost:15e3}],Nt={monthly:{label:"ì›”ê°„",multiplier:1},yearly:{label:"ì—°ê°„",multiplier:12},weekly:{label:"ì£¼ê°„",multiplier:.25}},St=[{value:"daysLeft",label:"ê²°ì œì¼ ìˆœ"},{value:"cost-desc",label:"ê¸ˆì•¡ ë†’ì€ ìˆœ"},{value:"cost-asc",label:"ê¸ˆì•¡ ë‚®ì€ ìˆœ"},{value:"name",label:"ì´ë¦„ ìˆœ"},{value:"category",label:"ì¹´í…Œê³ ë¦¬ ìˆœ"}],Ct={KRW:{symbol:"â‚©",label:"ì›",locale:"ko-KR"},USD:{symbol:"$",label:"USD",locale:"en-US"},JPY:{symbol:"Â¥",label:"ì—”",locale:"ja-JP"},EUR:{symbol:"â‚¬",label:"EUR",locale:"de-DE"}};function Ae({isOpen:t,onClose:s,title:n,items:a,type:r="timeline",totalCost:i}){if(!t)return null;const m=h=>h.toLocaleString();return e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-center justify-center backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden animate-scaleIn",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-gray-50/50 dark:bg-dark-900/50",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white",children:n}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx(V,{size:20})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto p-2",children:a.length===0?e.jsx("div",{className:"p-8 text-center text-gray-400 dark:text-dark-500 text-sm",children:"í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤"}):e.jsx("div",{className:"space-y-1",children:a.map(h=>{const c=h.customColor||S[h.category]||S.Etc;return e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-dark-700 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold text-white shadow-sm",style:{backgroundColor:c},children:h.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800 dark:text-white text-sm",children:h.name}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-dark-400 flex items-center gap-1.5",children:[e.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full",style:{backgroundColor:c}}),F[h.category]||h.category,r==="timeline"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300 dark:text-dark-600",children:"â€¢"}),e.jsxs("span",{children:["ë§¤ì›” ",h.billingDay,"ì¼"]})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-gray-900 dark:text-white text-sm",children:[m(h.cost),"ì›"]}),r==="chart"&&i>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-dark-400",children:[Math.round(h.cost/i*100),"%"]})]})]},h.id)})})}),r==="chart"&&i>0&&e.jsxs("div",{className:"px-5 py-4 bg-gray-50 dark:bg-dark-900 border-t border-gray-100 dark:border-dark-700 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-dark-300",children:"ì´ê³„"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[m(i),"ì›"]})]})]})})}function Et({items:t}){const s=new Date().getDate(),[n,a]=g.useState(null),[r,i]=g.useState(!1),m=g.useMemo(()=>[...t].filter(c=>!c.isPaused).sort((c,l)=>{let x=c.billingDay<s?c.billingDay+31:c.billingDay,d=l.billingDay<s?l.billingDay+31:l.billingDay;return x-d}),[t,s]);if(m.length===0)return e.jsx("div",{className:"text-xs text-white/60 text-center py-4",children:"ê²°ì œ ì˜ˆì •ì¸ êµ¬ë…ì´ ì—†ìŠµë‹ˆë‹¤"});const h=m.slice(0,7);return e.jsxs("div",{className:"relative pt-2 pb-4",children:[e.jsx("div",{className:"relative h-2 bg-white/10 rounded-full overflow-hidden",children:h.map((c,l)=>{const x=c.billingDay<s?(c.billingDay+31-s)/31:(c.billingDay-s)/31,d=c.customColor||S[c.category]||S.Etc;return e.jsx("div",{className:"absolute h-full w-1.5 rounded-full transition-all hover:w-2",style:{left:`${x*100}%`,backgroundColor:d,boxShadow:`0 0 4px ${d}80`}},c.id)})}),e.jsx("div",{className:"flex justify-between mt-4 px-1 gap-1",children:h.slice(0,5).map((c,l)=>{const x=c.billingDay<s,d=c.billingDay===s,u=c.customColor||S[c.category]||S.Etc,o=n===c.id;return e.jsxs("div",{className:"relative flex flex-col items-center group cursor-pointer",style:{flex:`0 0 ${100/5}%`},onMouseEnter:()=>a(c.id),onMouseLeave:()=>a(null),children:[o&&e.jsxs("div",{className:"absolute -top-14 left-1/2 -translate-x-1/2 px-2.5 py-1.5 rounded-lg text-xs whitespace-nowrap z-10 shadow-lg animate-fadeIn",style:{backgroundColor:u,color:"white"},children:[e.jsx("div",{className:"font-bold",children:c.name}),e.jsxs("div",{className:"text-white/80 text-[10px]",children:[c.cost.toLocaleString(),"ì›"]}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-1 w-2 h-2 rotate-45",style:{backgroundColor:u}})]}),e.jsx("div",{className:`w-3.5 h-3.5 rounded-full border-2 transition-all duration-200 ${d?"animate-pulse scale-125":x?"opacity-40":o?"scale-125 shadow-lg":"group-hover:scale-110"}`,style:{backgroundColor:u,borderColor:"rgba(255,255,255,0.6)",boxShadow:o?`0 0 8px ${u}`:"none"}}),e.jsx("span",{className:`text-[10px] font-semibold mt-1.5 transition-colors ${d?"text-white":x?"text-white/40":o?"text-white":"text-white/80"}`,children:d?"ì˜¤ëŠ˜":`${c.billingDay}ì¼`}),e.jsx("span",{className:`text-[10px] max-w-full text-center transition-colors ${d?"text-white font-bold":x?"text-white/40":o?"text-white font-medium":"text-white/70"}`,children:c.name.length>5?c.name.slice(0,5)+"..":c.name})]},c.id)})}),m.length>5&&e.jsx("div",{className:"text-center mt-2",children:e.jsxs("button",{onClick:()=>i(!0),className:"text-[10px] text-white/50 hover:text-white/70 transition-colors cursor-pointer hover:underline",children:["+",m.length-5,"ê°œ ë” ìžˆìŒ"]})}),e.jsx(Ae,{isOpen:r,onClose:()=>i(!1),title:"ì´ë‹¬ì˜ ê²°ì œ ì˜ˆì •",items:m,type:"timeline"})]})}function Dt({totalMonthlyCost:t,totalYearlyCost:s,subscriptions:n,previousMonthCost:a=null}){const r=a?((t-a)/a*100).toFixed(1):null;return e.jsxs("div",{className:"relative bg-gradient-to-br from-primary-500 via-primary-600 to-violet-600 dark:from-primary-600 dark:via-primary-700 dark:to-violet-700 rounded-3xl p-6 text-white shadow-xl shadow-primary-500/30 dark:shadow-primary-900/40 transition-all duration-300 hover:shadow-2xl hover:shadow-primary-500/40",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-3xl pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-6 -mt-6 w-36 h-36 rounded-full bg-white opacity-[0.1] blur-2xl animate-pulse",style:{animationDuration:"4s"}}),e.jsx("div",{className:"absolute bottom-0 left-0 -ml-6 -mb-6 w-28 h-28 rounded-full bg-white opacity-[0.08] blur-xl animate-pulse",style:{animationDuration:"5s"}}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-24 h-24 rounded-full bg-violet-300 opacity-[0.12] blur-2xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-0 w-16 h-16 rounded-full bg-indigo-300 opacity-[0.1] blur-xl"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("p",{className:"text-white/70 text-sm font-medium mb-1 flex items-center gap-2",children:["ì´ë²ˆ ë‹¬ ì˜ˆìƒ ì§€ì¶œì•¡",r!==null&&e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full flex items-center gap-0.5 ${parseFloat(r)>0?"bg-red-500/20 text-red-200":"bg-green-500/20 text-green-200"}`,children:[parseFloat(r)>0?e.jsx(ae,{size:10}):e.jsx(ye,{size:10}),Math.abs(parseFloat(r)),"%"]})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-2",children:[e.jsx("h2",{className:"text-4xl font-extrabold tracking-tight tabular-nums drop-shadow-sm",children:t.toLocaleString()}),e.jsx("span",{className:"text-xl opacity-90 font-medium",children:"ì›"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/60 mb-6",children:[e.jsxs("span",{children:["ì—°ê°„ ì•½ ",Math.round(s/1e4).toLocaleString(),"ë§Œì›"]}),e.jsx("span",{className:"text-white/30",children:"|"}),e.jsxs("span",{children:["ì¼ í‰ê·  ",Math.round(t/30).toLocaleString(),"ì›"]})]})]}),e.jsxs("div",{className:"bg-white/[0.08] backdrop-blur-md rounded-2xl p-4 border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-white/70 flex items-center gap-1.5",children:[e.jsx(G,{size:12}),"ê²°ì œ ì¼ì •"]}),e.jsxs("span",{className:"text-[10px] text-white/50",children:[new Date().getMonth()+1,"ì›”"]})]}),e.jsx(Et,{items:n})]})]})}function It({items:t}){return!t||t.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl p-4 shadow-sm border-l-4 border-red-500 dark:border-red-400 flex items-start gap-3 animate-fade-in",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-2 rounded-full text-red-500 dark:text-red-400 flex-shrink-0",children:e.jsx(Q,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-2",children:["ê³§ ê²°ì œë˜ëŠ” ì„œë¹„ìŠ¤",e.jsx("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-[10px] px-1.5 py-0.5 rounded-full font-medium",children:t.length})]}),e.jsx("div",{className:"mt-2 space-y-1.5",children:t.map(s=>e.jsxs("div",{className:"text-sm flex justify-between items-center py-1 border-b border-gray-50 dark:border-dark-700 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:s.customColor||"#E50914"}}),e.jsx("span",{className:"text-gray-600 dark:text-dark-300 truncate",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("span",{className:"text-xs text-gray-400 dark:text-dark-500",children:[s.cost.toLocaleString(),"ì›"]}),e.jsx("span",{className:`font-bold text-xs px-2 py-0.5 rounded ${s.daysLeft===0?"bg-red-500 text-white":"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400"}`,children:s.daysLeft===0?"ì˜¤ëŠ˜":`D-${s.daysLeft}`})]})]},s.id))})]})]})}function Pt({data:t,onCategoryClick:s}){const[n,a]=g.useState(null),[r,i]=g.useState(!1);if(!t||t.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-400 dark:text-dark-500 bg-gray-50 dark:bg-dark-800 rounded-2xl border border-dashed border-gray-200 dark:border-dark-700",children:[e.jsx(ke,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"})]});const m=t.reduce((d,u)=>d+u.cost,0);let h=0;const c=d=>{const u=Math.cos(2*Math.PI*d),o=Math.sin(2*Math.PI*d);return[u,o]},l=t.map(d=>{const u=d.cost/m,o=h;h+=u;const b=h,[p,y]=c(o),[w,E]=c(b),C=u>.5?1:0,P=["M 0 0",`L ${p} ${y}`,`A 1 1 0 ${C} 1 ${w} ${E}`,"L 0 0"].join(" "),$=d.customColor||S[d.category]||S.Etc,O=n===d.id;return e.jsx("path",{d:P,fill:$,className:"chart-segment cursor-pointer",style:{opacity:n&&!O?.4:1,transform:O?"scale(1.05)":"scale(1)",filter:O?`drop-shadow(0 0 6px ${$}80)`:"none",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:()=>a(d.id),onMouseLeave:()=>a(null),onClick:()=>s==null?void 0:s(d.category)},d.id)}),x=t.find(d=>d.id===n);return e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative w-36 h-36 flex-shrink-0",children:[e.jsx("svg",{viewBox:"-1.1 -1.1 2.2 2.2",className:"transform -rotate-90 w-full h-full drop-shadow-sm",children:l}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-20 h-20 bg-white dark:bg-dark-800 rounded-full flex flex-col items-center justify-center shadow-inner dark:shadow-dark-900/50",children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs font-bold text-gray-800 dark:text-white truncate max-w-[70px]",children:x.name}),e.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-dark-400",children:[Math.round(x.cost/m*100),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"ì´ë²ˆë‹¬"}),e.jsxs("span",{className:"text-sm font-bold text-gray-800 dark:text-white",children:[Math.round(m/1e4),"ë§Œì›"]})]})})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-1.5 text-xs max-h-36 overflow-y-auto scrollbar-hide",children:[t.slice(0,6).map(d=>{const u=d.customColor||S[d.category]||S.Etc,o=n===d.id;return e.jsxs("div",{className:`flex items-center justify-between p-1.5 rounded-lg transition-all duration-200 cursor-pointer ${o?"bg-gray-100 dark:bg-dark-700 scale-102":"hover:bg-gray-50 dark:hover:bg-dark-700/50"}`,onMouseEnter:()=>a(d.id),onMouseLeave:()=>a(null),onClick:()=>s==null?void 0:s(d.category),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:u}}),e.jsx("span",{className:"truncate max-w-[80px] text-gray-600 dark:text-dark-300",children:d.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400 dark:text-dark-500 text-[10px]",children:[d.cost.toLocaleString(),"ì›"]}),e.jsxs("span",{className:"font-semibold text-gray-800 dark:text-white w-8 text-right",children:[Math.round(d.cost/m*100),"%"]})]})]},d.id)}),t.length>6&&e.jsxs("button",{onClick:()=>i(!0),className:"text-gray-400 dark:text-dark-500 pl-4 text-[10px] hover:text-gray-600 dark:hover:text-dark-300 transition-colors text-left",children:["...ì™¸ ",t.length-6,"ê°œ"]})]}),e.jsx(Ae,{isOpen:r,onClose:()=>i(!1),title:"ì§€ì¶œ ìƒì„¸ ë¶„ì„",items:t,type:"chart",totalCost:m})]})}function Tt({subscriptions:t}){const s=g.useMemo(()=>{const a=[],r=t.filter(l=>!l.isPaused),i={};r.forEach(l=>{i[l.category]=(i[l.category]||0)+1}),Object.entries(i).forEach(([l,x])=>{if(x>=2){const u=r.filter(o=>o.category===l).reduce((o,b)=>o+b.cost,0);a.push({type:"duplicate",icon:Ye,title:`${F[l]||l} ì¤‘ë³µ êµ¬ë…`,description:`${x}ê°œì˜ êµ¬ë…ì´ ìžˆìŠµë‹ˆë‹¤. í†µí•©ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.`,savings:`ì›” ${Math.round(u*.3).toLocaleString()}ì› ì ˆì•½ ê°€ëŠ¥`,priority:x>=3?"high":"medium"})}});const m=t.filter(l=>l.isPaused);m.length>0&&a.push({type:"paused",icon:Q,title:`${m.length}ê°œ ì¼ì‹œì •ì§€ ì¤‘`,description:"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” êµ¬ë…ì€ ì™„ì „ í•´ì§€ë¥¼ ê³ ë ¤í•´ë³´ì„¸ìš”.",savings:`ì›” ${m.reduce((l,x)=>l+x.cost,0).toLocaleString()}ì› ì ˆì•½ ê°€ëŠ¥`,priority:"low"});const h=r.filter(l=>(!l.billingCycle||l.billingCycle==="monthly")&&l.cost>=1e4);if(h.length>0){const l=h.reduce((x,d)=>x+d.cost*12*.15,0);a.push({type:"yearly",icon:ye,title:"ì—°ê°„ ê²°ì œ ì „í™˜ ì¶”ì²œ",description:`${h.length}ê°œ êµ¬ë…ì„ ì—°ê°„ ê²°ì œë¡œ ì „í™˜í•˜ë©´ ì•½ 15% ì ˆì•½ ê°€ëŠ¥`,savings:`ì—° ${Math.round(l).toLocaleString()}ì› ì ˆì•½ ì˜ˆìƒ`,priority:"medium"})}const c=r.filter(l=>l.cost>=2e4);if(c.length>=2){const l=c.reduce((x,d)=>x+d.cost,0);a.push({type:"high-cost",icon:Q,title:"ê³ ê°€ êµ¬ë… ì£¼ì˜",description:`2ë§Œì› ì´ìƒ êµ¬ë…ì´ ${c.length}ê°œ ìžˆìŠµë‹ˆë‹¤.`,savings:`ì›” ${l.toLocaleString()}ì› ì§€ì¶œ ì¤‘`,priority:"high"})}return a.sort((l,x)=>{const d={high:0,medium:1,low:2};return d[l.priority]-d[x.priority]})},[t]);if(s.length===0)return null;const n=a=>{switch(a){case"high":return"text-red-500 bg-red-50 dark:bg-red-900/20";case"medium":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";default:return"text-blue-500 bg-blue-50 dark:bg-blue-900/20"}};return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(He,{className:"w-4 h-4 text-amber-500"}),"ì ˆì•½ íŒ"]}),e.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-dark-500 bg-gray-100 dark:bg-dark-700 px-2 py-1 rounded-full",children:[s.length,"ê°œ ì œì•ˆ"]})]}),e.jsx("div",{className:"space-y-3",children:s.slice(0,3).map((a,r)=>{const i=a.icon;return e.jsx("div",{className:`p-3 rounded-xl ${n(a.priority)} transition-all hover:scale-[1.02]`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(i,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-sm text-gray-800 dark:text-white",children:a.title}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-dark-300 mt-0.5",children:a.description}),e.jsxs("p",{className:"text-xs font-bold text-primary-600 dark:text-primary-400 mt-1",children:["ðŸ’° ",a.savings]})]})]})},r)})})]})}function $t({subscriptions:t,totalMonthlyCost:s,totalYearlyCost:n,categoryBreakdown:a,onCategoryClick:r}){const i=g.useMemo(()=>{const x=["1ì›”","2ì›”","3ì›”","4ì›”","5ì›”","6ì›”","7ì›”","8ì›”","9ì›”","10ì›”","11ì›”","12ì›”"],d=new Date().getMonth();return Array.from({length:6},(u,o)=>{const b=(d-5+o+12)%12,p=Math.random()*.3-.15,y=Math.round(s*(1+p));return{month:x[b],cost:o===5?s:y,isCurrentMonth:o===5}})},[s]),m=Math.max(...i.map(x=>x.cost)),h=g.useMemo(()=>Object.entries(a).sort((x,d)=>d[1].total-x[1].total).slice(0,5),[a]),c=g.useMemo(()=>[...t].filter(x=>!x.isPaused).sort((x,d)=>d.cost-x.cost)[0],[t]),l=t.filter(x=>!x.isPaused);return t.length===0?null:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700 transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary-50 dark:bg-primary-900/20 text-primary-500",children:e.jsx(ke,{className:"w-5 h-5"})}),"ì§€ì¶œ ë¶„ì„"]}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 bg-gray-100 dark:bg-dark-700 px-3 py-1.5 rounded-full",children:[l.length,"ê°œ êµ¬ë… ì¤‘"]})]}),e.jsx("div",{className:"flex justify-center py-2",children:e.jsx(Pt,{data:l,onCategoryClick:r})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(J,{size:48})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-dark-400 mb-2",children:[e.jsx(J,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"ì›” í‰ê·  ì§€ì¶œ"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight",children:[Math.round(s).toLocaleString(),e.jsx("span",{className:"text-sm font-medium text-gray-400 dark:text-dark-500 ml-1",children:"ì›"})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-400 dark:text-dark-500",children:["ì§€ë‚œë‹¬ ëŒ€ë¹„ ",e.jsx("span",{className:"text-green-500 font-medium",children:"+2.5%"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(G,{size:48})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-dark-400 mb-2",children:[e.jsx(G,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"ì—°ê°„ ì˜ˆìƒ"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight",children:[Math.round(n/1e4).toLocaleString(),e.jsx("span",{className:"text-sm font-medium text-gray-400 dark:text-dark-500 ml-1",children:"ë§Œì›"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-400 dark:text-dark-500",children:"ê³ ì • ì§€ì¶œ í¬í•¨"})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-500",children:e.jsx(Xe,{className:"w-5 h-5"})}),"ì›”ë³„ ì¶”ì´"]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-dark-500 font-medium",children:"ìµœê·¼ 6ê°œì›”"})]}),e.jsx("div",{className:"flex items-end justify-between gap-3 h-40 pt-4 px-2",children:i.map((x,d)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group cursor-pointer",children:[e.jsxs("div",{className:"relative w-full flex justify-col items-end h-full",children:[e.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 pointer-events-none",children:[x.cost.toLocaleString(),"ì›"]}),e.jsx("div",{className:`w-full rounded-t-xl transition-all duration-500 ease-out group-hover:scale-y-105 origin-bottom ${x.isCurrentMonth?"bg-gradient-to-t from-primary-500 to-primary-400 shadow-lg shadow-primary-500/20":"bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600"}`,style:{height:`${x.cost/m*100}%`,minHeight:"12px"}})]}),e.jsx("span",{className:`text-[11px] font-medium ${x.isCurrentMonth?"text-primary-600 dark:text-primary-400":"text-gray-400 dark:text-dark-500"}`,children:x.month})]},d))})]}),h.length>0&&e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-5",children:e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500",children:e.jsx(ae,{className:"w-5 h-5"})}),"ì¹´í…Œê³ ë¦¬ë³„"]})}),e.jsx("div",{className:"space-y-4",children:h.map(([x,d])=>{const u=d.total/s*100,o=S[x]||S.Etc;return e.jsxs("button",{onClick:()=>r==null?void 0:r(x),className:"w-full text-left group hover:bg-gray-50 dark:hover:bg-dark-700/50 rounded-xl p-3 -mx-3 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:o}}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-dark-200",children:F[x]||x}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-dark-500 bg-gray-100 dark:bg-dark-700 px-1.5 py-0.5 rounded",children:d.count})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[d.total.toLocaleString(),"ì›"]}),e.jsxs("span",{className:"text-xs text-gray-400 w-8 text-right",children:[Math.round(u),"%"]})]})]}),e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out group-hover:brightness-110",style:{width:`${u}%`,backgroundColor:o}})})]},x)})})]}),c&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/10 dark:to-orange-900/10 p-5 rounded-2xl border border-amber-100 dark:border-amber-900/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-5",children:e.jsx(J,{size:60})}),e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-500 font-bold uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),"Top Expense"]}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg block",children:c.name}),e.jsxs("span",{className:"text-xs text-amber-600/70 dark:text-amber-500/70",children:["ì „ì²´ ì§€ì¶œì˜ ",Math.round(c.cost/s*100),"% ì°¨ì§€"]})]}),e.jsxs("span",{className:"font-bold text-amber-600 dark:text-amber-400 text-lg bg-white dark:bg-dark-800 px-3 py-1.5 rounded-lg shadow-sm",children:[c.cost.toLocaleString(),"ì›"]})]})]}),e.jsx(Tt,{subscriptions:t})]})}function Ot({searchQuery:t,onSearchChange:s,selectedCategory:n,onCategoryChange:a,sortBy:r,onSortChange:i,showPaused:m,onShowPausedChange:h}){const c=["All",...Object.keys(S)];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-dark-500"}),e.jsx("input",{type:"text",placeholder:"êµ¬ë… ì„œë¹„ìŠ¤ ê²€ìƒ‰...",value:t,onChange:l=>s(l.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-dark-500 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all text-sm"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 pb-1",children:c.map(l=>e.jsxs("button",{onClick:()=>a(l==="All"?null:l),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all duration-200 transform active:scale-95 ${l==="All"&&!n||n===l?"bg-primary-500 text-white shadow-md shadow-primary-500/30 scale-105":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300 hover:bg-gray-200 dark:hover:bg-dark-600 hover:scale-102"}`,children:[l!=="All"&&e.jsx("span",{className:"w-2.5 h-2.5 rounded-full transition-transform group-hover:scale-110",style:{backgroundColor:S[l],boxShadow:l==="All"&&!n||n===l?`0 0 6px ${S[l]}`:"none"}}),l==="All"?"ì „ì²´":F[l]||l]},l))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:r,onChange:l=>i(l.target.value),className:"appearance-none pl-3 pr-8 py-1.5 rounded-lg border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-gray-600 dark:text-dark-300 text-xs font-medium cursor-pointer focus:ring-2 focus:ring-primary-500 outline-none",children:St.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsx(je,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-dark-400",children:"ì¼ì‹œì •ì§€ í¬í•¨"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:l=>h(l.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 dark:bg-dark-700 rounded-full peer peer-checked:bg-primary-500 transition-colors"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform peer-checked:translate-x-4"})]})]})]})]})}function ue({subscription:t,onEdit:s,onDelete:n,onTogglePause:a}){const{id:r,name:i,cost:m,billingDay:h,billingCycle:c,category:l,url:x,customColor:d,isPaused:u,trialEndDate:o,daysLeft:b}=t,p=d||S[l]||S.Etc,y=pt(o),w=y>=0,E=new Date().getDate(),C=Math.min(100,Math.max(0,E/30*100));return e.jsxs("div",{className:`group bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border transition-all card-hover relative overflow-hidden ${u?"border-gray-200 dark:border-dark-700 opacity-60":b<=3?"border-red-200 dark:border-red-900/50 glow-urgent ring-1 ring-red-100 dark:ring-red-900/30":"border-gray-100 dark:border-dark-700 hover:border-primary-200 dark:hover:border-primary-800"}`,children:[!u&&e.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-primary-500/10 dark:bg-primary-400/10 transition-all duration-1000",style:{width:`${C}%`}}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`relative w-12 h-12 rounded-2xl flex items-center justify-center text-white font-bold text-lg shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:rotate-3 ${u?"grayscale":""}`,style:{background:u?p:`linear-gradient(135deg, ${p} 0%, ${p}CC 100%)`,boxShadow:u?"none":`0 8px 16px -4px ${p}60`},children:[i.slice(0,1).toUpperCase(),u&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-500 rounded-full flex items-center justify-center shadow-md border-2 border-white dark:border-dark-800",children:e.jsx(ie,{size:10,className:"text-white"})}),x&&!u&&e.jsx("div",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-white/30 rounded-full m-1 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-base leading-tight mb-1",children:i}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-md font-medium",style:{backgroundColor:`${p}15`,color:p},children:F[l]||l}),w&&e.jsxs("span",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 font-medium",children:[e.jsx(ee,{size:10}),"D-",y]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold text-lg tabular-nums tracking-tight ${u?"text-gray-400 line-through":"text-gray-900 dark:text-white"}`,children:[m.toLocaleString(),e.jsx("span",{className:"text-sm font-normal text-gray-400 dark:text-dark-400 ml-0.5",children:"ì›"})]}),c&&c!=="monthly"&&e.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-dark-500 uppercase font-medium tracking-wider",children:["/",c==="yearly"?"Year":"Week"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-50 dark:border-dark-700/50 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-dark-400",children:[e.jsx(be,{size:12,className:"text-gray-400"}),e.jsxs("span",{children:["ë§¤ì›” ",e.jsxs("span",{className:"font-medium text-gray-700 dark:text-dark-300",children:[h,"ì¼"]})," ê²°ì œ"]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-bold px-2 py-1 rounded-lg ${u?"bg-gray-100 text-gray-400 dark:bg-dark-700 dark:text-dark-500":b===0?"bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 animate-pulse":b<=3?"bg-red-50 text-red-500 dark:bg-red-900/10 dark:text-red-400":"bg-primary-50 text-primary-600 dark:bg-primary-900/10 dark:text-primary-400"}`,children:[e.jsx(we,{size:12}),u?"ì •ì§€ë¨":b===0?"ì˜¤ëŠ˜ ê²°ì œ":`${b}ì¼ ë‚¨ìŒ`]})]}),e.jsxs("div",{className:"flex justify-end items-center gap-2",children:[x&&e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-xl text-gray-400 hover:text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-all",title:"ì„œë¹„ìŠ¤ ë°©ë¬¸",children:e.jsx(ve,{size:16})}),e.jsx("div",{className:"w-px h-4 bg-gray-100 dark:bg-dark-700 mx-1"}),e.jsx("button",{onClick:()=>s(t),className:"p-2 text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-dark-700 rounded-xl transition-all",title:"ìˆ˜ì •",children:e.jsx(qe,{size:16})}),e.jsx("button",{onClick:()=>a(r),className:`p-2 rounded-xl transition-all ${u?"text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20":"text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20"}`,title:u?"ìž¬ê°œ":"ì¼ì‹œì •ì§€",children:u?e.jsx(Ze,{size:16}):e.jsx(ie,{size:16})}),e.jsx("button",{onClick:()=>n(r),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all",title:"ì‚­ì œ",children:e.jsx(Ne,{size:16})})]})]})}function Lt({subscriptions:t,searchQuery:s,selectedCategory:n,sortBy:a,showPaused:r,onEdit:i,onDelete:m,onTogglePause:h,onAddNew:c}){const l=g.useMemo(()=>{let d=[...t];if(s){const u=s.toLowerCase();d=d.filter(o=>o.name.toLowerCase().includes(u)||o.category.toLowerCase().includes(u))}switch(n&&(d=d.filter(u=>u.category===n)),r||(d=d.filter(u=>!u.isPaused)),a){case"daysLeft":d.sort((u,o)=>(u.daysLeft||0)-(o.daysLeft||0));break;case"cost-desc":d.sort((u,o)=>o.cost-u.cost);break;case"cost-asc":d.sort((u,o)=>u.cost-o.cost);break;case"name":d.sort((u,o)=>u.name.localeCompare(o.name,"ko"));break;case"category":d.sort((u,o)=>u.category.localeCompare(o.category));break}return d},[t,s,n,a,r]),x=g.useMemo(()=>{if(a!=="category")return null;const d={};return l.forEach(u=>{d[u.category]||(d[u.category]=[]),d[u.category].push(u)}),d},[l,a]);return t.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-dark-800 rounded-2xl border border-dashed border-gray-200 dark:border-dark-700",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-dark-700 rounded-full flex items-center justify-center",children:e.jsx(Se,{size:24,className:"text-gray-400 dark:text-dark-500"})}),e.jsx("p",{className:"text-gray-500 dark:text-dark-400 text-sm mb-4",children:"ë“±ë¡ëœ êµ¬ë… ì„œë¹„ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:c,className:"text-primary-600 dark:text-primary-400 text-sm font-bold hover:underline",children:"+ ì²« êµ¬ë… ì¶”ê°€í•˜ê¸°"})]}):l.length===0?e.jsx("div",{className:"text-center py-8 bg-white dark:bg-dark-800 rounded-2xl",children:e.jsx("p",{className:"text-gray-400 dark:text-dark-500 text-sm",children:"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤."})}):e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(ae,{className:"w-4 h-4 text-primary-500"}),"êµ¬ë… ë¦¬ìŠ¤íŠ¸",e.jsxs("span",{className:"text-xs font-normal text-gray-400 dark:text-dark-500",children:["(",l.length,")"]})]}),a==="daysLeft"&&e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"ê²°ì œì¼ ìˆœ"})]}),e.jsx("div",{className:"space-y-3",children:x?Object.entries(x).map(([d,u])=>e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 mb-2 pl-1",children:[d," (",u.length,")"]}),e.jsx("div",{className:"space-y-3",children:u.map((o,b)=>e.jsx("div",{className:"subscription-item",style:{animationDelay:`${b*50}ms`},children:e.jsx(ue,{subscription:o,onEdit:i,onDelete:m,onTogglePause:h})},o.id))})]},d)):l.map((d,u)=>e.jsx("div",{className:"subscription-item",style:{animationDelay:`${u*50}ms`},children:e.jsx(ue,{subscription:d,onEdit:i,onDelete:m,onTogglePause:h})},d.id))})]})}function At({isOpen:t,onClose:s,onSave:n,editData:a=null}){const[r,i]=g.useState({name:"",cost:"",billingDay:1,billingCycle:"monthly",category:"OTT",url:"",customColor:"",notes:"",trialEndDate:"",sharedWith:1,currency:"KRW"}),[m,h]=g.useState({}),[c,l]=g.useState(!0);g.useEffect(()=>{a?(i({name:a.name||"",cost:a.cost||"",billingDay:a.billingDay||1,billingCycle:a.billingCycle||"monthly",category:a.category||"OTT",url:a.url||"",customColor:a.customColor||"",notes:a.notes||"",trialEndDate:a.trialEndDate?typeof a.trialEndDate=="object"&&a.trialEndDate.seconds?new Date(a.trialEndDate.seconds*1e3).toISOString().split("T")[0]:new Date(a.trialEndDate).toISOString().split("T")[0]:"",sharedWith:a.sharedWith||1,currency:a.currency||"KRW"}),l(!1)):(i({name:"",cost:"",billingDay:new Date().getDate(),billingCycle:"monthly",category:"OTT",url:"",customColor:"",notes:"",trialEndDate:"",sharedWith:1,currency:"KRW"}),l(!0)),h({})},[a,t]);const x=o=>{i({...r,name:o.name,category:o.category,url:o.url,customColor:o.color,cost:o.defaultCost||""}),l(!1)},d=()=>{const o={};return r.name.trim()||(o.name="ì„œë¹„ìŠ¤ ì´ë¦„ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”"),(!r.cost||isNaN(r.cost)||Number(r.cost)<0)&&(o.cost="ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”"),(!r.billingDay||r.billingDay<1||r.billingDay>31)&&(o.billingDay="1~31 ì‚¬ì´ì˜ ë‚ ì§œë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”"),h(o),Object.keys(o).length===0},u=o=>{if(o.preventDefault(),!d())return;const b={...r,cost:Number(r.cost),billingDay:Number(r.billingDay),sharedWith:Number(r.sharedWith)||1,trialEndDate:r.trialEndDate?new Date(r.trialEndDate):null};n(b,a==null?void 0:a.id),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/80 z-50 flex items-end md:items-center justify-center backdrop-blur-sm modal-backdrop p-0 md:p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-lg rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden modal-content max-h-[95vh] h-[95vh] md:h-auto overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-white/80 dark:bg-dark-800/80 backdrop-blur-md sticky top-0 z-10 shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:a?"êµ¬ë… ìˆ˜ì •":"ìƒˆ êµ¬ë… ì¶”ê°€"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-dark-400 mt-0.5",children:a?"êµ¬ë… ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.":"ìƒˆë¡œìš´ êµ¬ë… ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•˜ì„¸ìš”."})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-all active:scale-90",children:e.jsx(V,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[!a&&c&&e.jsxs("div",{className:"mb-8 animate-fade-in",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 dark:text-dark-400 uppercase tracking-wider mb-3 block px-1",children:"ì¸ê¸° ì„œë¹„ìŠ¤ ì„ íƒ"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:vt.slice(0,12).map((o,b)=>e.jsxs("button",{type:"button",onClick:()=>x(o),className:"flex flex-col items-center justify-center gap-2 p-3 rounded-2xl border border-gray-100 dark:border-dark-700 hover:border-primary-200 dark:hover:border-primary-800 hover:bg-primary-50 dark:hover:bg-primary-900/10 transition-all duration-200 group active:scale-95",style:{animationDelay:`${b*50}ms`},children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md group-hover:scale-110 transition-transform",style:{background:`linear-gradient(135deg, ${o.color} 0%, ${o.color}dd 100%)`,boxShadow:`0 4px 12px -2px ${o.color}50`},children:o.name[0]}),e.jsx("span",{className:"text-[11px] font-medium text-gray-600 dark:text-dark-300 group-hover:text-primary-600 dark:group-hover:text-primary-400 truncate w-full text-center",children:o.name})]},o.name))}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("button",{type:"button",onClick:()=>l(!1),className:"text-xs font-medium text-gray-400 dark:text-dark-400 hover:text-primary-500 flex items-center gap-1 py-1 px-3 hover:bg-gray-50 dark:hover:bg-dark-700 rounded-full transition-colors",children:["ì§ì ‘ ìž…ë ¥í•˜ê¸°",e.jsx(ve,{size:10})]})})]}),e.jsxs("form",{onSubmit:u,className:`space-y-6 ${!a&&c?"opacity-30 pointer-events-none blur-sm":""} transition-all duration-500`,children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700/50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-dark-400 uppercase tracking-wider mb-2",children:"ê¸°ë³¸ ì •ë³´"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-200 mb-1.5",children:["ì„œë¹„ìŠ¤ ì´ë¦„ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"ì˜ˆ: ë„·í”Œë¦­ìŠ¤",className:`w-full px-4 py-3 rounded-xl border ${m.name?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-white dark:bg-dark-800 text-gray-800 dark:text-white placeholder-gray-400 focus:bg-white dark:focus:bg-dark-800 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all shadow-sm`,value:r.name,onChange:o=>i({...r,name:o.target.value}),disabled:!a&&c}),m.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1 font-medium",children:m.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-200 mb-1.5",children:["ê²°ì œ ê¸ˆì•¡ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"0",min:"0",className:`w-full pl-4 pr-10 py-3 rounded-xl border ${m.cost?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-white dark:bg-dark-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all shadow-sm font-medium`,value:r.cost,onChange:o=>i({...r,cost:o.target.value}),onFocus:o=>o.target.select(),disabled:!a&&c}),e.jsx("span",{className:"absolute right-3 top-3 text-gray-400 dark:text-dark-500 text-sm font-medium",children:"ì›"})]}),m.cost&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1 font-medium",children:m.cost})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-200 mb-1.5",children:["ê²°ì œì¼ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"1",max:"31",placeholder:"1",className:`w-full pl-4 pr-10 py-3 rounded-xl border ${m.billingDay?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-white dark:bg-dark-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all shadow-sm font-medium`,value:r.billingDay,onChange:o=>i({...r,billingDay:o.target.value}),onFocus:o=>o.target.select(),disabled:!a&&c}),e.jsx("span",{className:"absolute right-3 top-3 text-gray-400 dark:text-dark-500 text-sm font-medium",children:"ì¼"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-dark-400 uppercase tracking-wider mb-3 px-1",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(S).map(o=>e.jsxs("button",{type:"button",onClick:()=>i({...r,category:o}),disabled:!a&&c,className:`px-4 py-2.5 rounded-xl text-xs font-bold transition-all duration-200 flex items-center gap-2 ${r.category===o?"bg-gray-800 dark:bg-white text-white dark:text-gray-900 shadow-md transform scale-105 ring-2 ring-offset-2 ring-gray-800 dark:ring-white dark:ring-offset-dark-800":"bg-white dark:bg-dark-700 text-gray-500 dark:text-dark-400 border border-gray-100 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-600"}`,children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:S[o],boxShadow:r.category===o?`0 0 8px ${S[o]}`:"none"}}),F[o]||o]},o))})]}),e.jsxs("div",{className:"border-t border-gray-100 dark:border-dark-700 pt-6",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-dark-400 uppercase tracking-wider mb-4 px-1",children:"ìƒì„¸ ì„¤ì •"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2",children:"ê²°ì œ ì£¼ê¸°"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(Nt).map(([o,{label:b}])=>e.jsx("button",{type:"button",onClick:()=>i({...r,billingCycle:o}),disabled:!a&&c,className:`py-2.5 rounded-xl text-xs font-bold transition-all border ${r.billingCycle===o?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 border-primary-200 dark:border-primary-800":"bg-white dark:bg-dark-700 text-gray-500 dark:text-dark-400 border-gray-200 dark:border-dark-600 hover:bg-gray-50"}`,children:b},o))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2 flex items-center gap-1.5",children:[e.jsx(Qe,{size:14,className:"text-gray-400"}),"ê³µìœ  ì¸ì›"]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 dark:bg-dark-700/50 p-1 rounded-xl border border-gray-200 dark:border-dark-600",children:[e.jsx("button",{type:"button",onClick:()=>i({...r,sharedWith:Math.max(1,(r.sharedWith||1)-1)}),disabled:!a&&c,className:"w-9 h-9 rounded-lg bg-white dark:bg-dark-700 text-gray-500 dark:text-dark-400 hover:text-primary-600 hover:shadow-sm flex items-center justify-center transition-all disabled:opacity-50",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-sm",children:r.sharedWith||1}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-dark-400 ml-0.5",children:"ëª…"})]}),e.jsx("button",{type:"button",onClick:()=>i({...r,sharedWith:(r.sharedWith||1)+1}),disabled:!a&&c,className:"w-9 h-9 rounded-lg bg-white dark:bg-dark-700 text-gray-500 dark:text-dark-400 hover:text-primary-600 hover:shadow-sm flex items-center justify-center transition-all disabled:opacity-50",children:e.jsx(et,{size:18})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2 flex items-center gap-1.5",children:[e.jsx(J,{size:14,className:"text-gray-400"}),"í†µí™”"]}),e.jsx("select",{value:r.currency,onChange:o=>i({...r,currency:o.target.value}),disabled:!a&&c,className:"w-full h-[46px] px-3 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm appearance-none cursor-pointer",children:Object.entries(Ct).map(([o,{symbol:b,label:p}])=>e.jsxs("option",{value:o,children:[o," (",b,")"]},o))})]})]}),r.sharedWith>1&&e.jsxs("div",{className:"bg-primary-50 dark:bg-primary-900/10 p-3 rounded-xl flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-primary-700 dark:text-primary-300",children:"1ì¸ë‹¹ ë¶€ë‹´ê¸ˆ"}),e.jsxs("span",{className:"text-sm font-bold text-primary-600 dark:text-primary-400",children:[Math.round(Number(r.cost||0)/r.sharedWith).toLocaleString(),"ì›"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2",children:"ë©”ëª¨"}),e.jsx("textarea",{placeholder:"ê³„ì • ì •ë³´ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ê¸°ë¡í•˜ì„¸ìš”",rows:2,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm resize-none",value:r.notes,onChange:o=>i({...r,notes:o.target.value}),disabled:!a&&c})]})]})]}),e.jsx("div",{className:"pt-2 sticky bottom-0 bg-white dark:bg-dark-800 pb-2",children:e.jsxs("button",{type:"submit",disabled:!a&&c,className:"w-full py-4 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-300 dark:disabled:bg-dark-600 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transform active:scale-[0.98] transition-all shadow-lg shadow-primary-500/30 flex items-center justify-center gap-2",children:[e.jsx(Ce,{size:20}),a?"ìˆ˜ì • ì™„ë£Œ":"êµ¬ë… ì¶”ê°€í•˜ê¸°"]})})]})]})]})}):null}const Mt=t=>{const s=["ì„œë¹„ìŠ¤ëª…","ì›” ê²°ì œê¸ˆì•¡","ê²°ì œì¼","ì¹´í…Œê³ ë¦¬","ê²°ì œì£¼ê¸°","URL","ì¼ì‹œì •ì§€","ë©”ëª¨","ìƒì„±ì¼"],n=t.map(r=>[r.name,r.cost,r.billingDay,r.category,r.billingCycle||"monthly",r.url||"",r.isPaused?"ì˜ˆ":"ì•„ë‹ˆì˜¤",r.notes||"",r.createdAt||""]);return[s.join(","),...n.map(r=>r.map(i=>typeof i=="string"&&i.includes(",")?`"${i}"`:i).join(","))].join(`
`)},Ut=t=>{const s={version:"1.0",exportedAt:new Date().toISOString(),subscriptions:t.map(n=>({name:n.name,cost:n.cost,billingDay:n.billingDay,category:n.category,billingCycle:n.billingCycle||"monthly",url:n.url||"",customColor:n.customColor||"",isPaused:n.isPaused||!1,notes:n.notes||""}))};return JSON.stringify(s,null,2)},Rt=t=>{var a,r,i,m,h,c;const s=t.trim().split(`
`);if(s.length<2)return[];const n=[];for(let l=1;l<s.length;l++){const x=Ft(s[l]);x.length>=4&&n.push({name:((a=x[0])==null?void 0:a.trim())||"",cost:parseInt(x[1])||0,billingDay:parseInt(x[2])||1,category:((r=x[3])==null?void 0:r.trim())||"Etc",billingCycle:((i=x[4])==null?void 0:i.trim())||"monthly",url:((m=x[5])==null?void 0:m.trim())||"",isPaused:((h=x[6])==null?void 0:h.trim())==="ì˜ˆ",notes:((c=x[7])==null?void 0:c.trim())||""})}return n},Ft=t=>{const s=[];let n="",a=!1;for(let r=0;r<t.length;r++){const i=t[r];i==='"'?a=!a:i===","&&!a?(s.push(n),n=""):n+=i}return s.push(n),s},zt=t=>{try{const s=JSON.parse(t);return s.subscriptions&&Array.isArray(s.subscriptions)?s.subscriptions.map(n=>({name:n.name||"",cost:parseInt(n.cost)||0,billingDay:parseInt(n.billingDay)||1,category:n.category||"Etc",billingCycle:n.billingCycle||"monthly",url:n.url||"",customColor:n.customColor||"",isPaused:n.isPaused||!1,notes:n.notes||""})):[]}catch(s){return console.error("JSON parsing error:",s),[]}},ge=(t,s,n)=>{const a=new Blob([t],{type:n}),r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},_t=t=>new Promise((s,n)=>{const a=new FileReader;a.onload=r=>s(r.target.result),a.onerror=r=>n(r),a.readAsText(t)}),Wt=t=>{const s=new Date,n=s.getFullYear(),a=s.getMonth(),r=t.filter(c=>!c.isPaused).map(c=>{const l=[];for(let x=0;x<12;x++){const d=(a+x)%12,u=n+Math.floor((a+x)/12),o=Math.min(c.billingDay,new Date(u,d+1,0).getDate()),b=new Date(u,d,o),p=`${c.id}-${u}${String(d+1).padStart(2,"0")}@subscription-manager`;l.push({uid:p,summary:`ðŸ’³ ${c.name} ê²°ì œì¼`,description:`${c.name} êµ¬ë…ë£Œ ${c.cost.toLocaleString()}ì› ê²°ì œ ì˜ˆì •`,start:b,cost:c.cost})}return l}).flat(),i=c=>c.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",m=c=>{const l=c.getFullYear(),x=String(c.getMonth()+1).padStart(2,"0"),d=String(c.getDate()).padStart(2,"0");return`${l}${x}${d}`};let h=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Subscription Manager Pro//KO","CALSCALE:GREGORIAN","METHOD:PUBLISH","X-WR-CALNAME:êµ¬ë… ê²°ì œì¼","X-WR-TIMEZONE:Asia/Seoul",""].join(`\r
`);return r.forEach(c=>{h+=["BEGIN:VEVENT",`UID:${c.uid}`,`DTSTAMP:${i(s)}`,`DTSTART;VALUE=DATE:${m(c.start)}`,`SUMMARY:${c.summary}`,`DESCRIPTION:${c.description}`,"END:VEVENT",""].join(`\r
`)}),h+="END:VCALENDAR",h},Bt=t=>{const s=Wt(t),n=new Blob([s],{type:"text/calendar;charset=utf-8"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=`subscription_payments_${new Date().toISOString().split("T")[0]}.ics`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)};function Jt({isOpen:t,onClose:s,subscriptions:n,onImport:a,onClearAll:r}){const{isDark:i,toggleTheme:m,setAutoTheme:h,autoTheme:c}=Oe(),{user:l,isDemo:x}=Y(),[d,u]=g.useState(!1),[o,b]=g.useState(null),[p,y]=g.useState(!1),[w,E]=g.useState("default"),[C,P]=g.useState(0),$=g.useRef(null);g.useEffect(()=>{if(R()){E(Z());const v=oe();y(v.enabled&&Z()==="granted")}if(l!=null&&l.uid&&!x){const v=k.getUserSettings(l.uid);P(v.budget||0)}},[t,l,x]);const O=()=>{const v=Mt(n),j=`subscriptions_${new Date().toISOString().split("T")[0]}.csv`;ge(v,j,"text/csv;charset=utf-8")},z=()=>{const v=Ut(n),j=`subscriptions_${new Date().toISOString().split("T")[0]}.json`;ge(v,j,"application/json")},_=async v=>{var D;const j=(D=v.target.files)==null?void 0:D[0];if(j){try{const L=await _t(j);let A=[];if(j.name.endsWith(".json")?A=zt(L):j.name.endsWith(".csv")&&(A=Rt(L)),A.length>0){const X=await a(A);b({success:!0,count:X}),setTimeout(()=>b(null),3e3)}else b({success:!1,message:"ìœ íš¨í•œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"}),setTimeout(()=>b(null),3e3)}catch(L){console.error("Import error:",L),b({success:!1,message:"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"}),setTimeout(()=>b(null),3e3)}$.current&&($.current.value="")}},H=async()=>{await r(),u(!1),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-end md:items-center justify-center backdrop-blur-sm modal-backdrop",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-md rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden modal-content max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-gray-50/50 dark:bg-dark-900/50 sticky top-0 z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"ì„¤ì •"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx(V,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"ë‹¤í¬ ëª¨ë“œ"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mt-0.5",children:"ì–´ë‘ìš´ í…Œë§ˆë¡œ ì „í™˜í•©ë‹ˆë‹¤"})]}),e.jsx("button",{onClick:m,className:`relative w-14 h-7 rounded-full transition-colors ${i?"bg-primary-500":"bg-gray-200 dark:bg-dark-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-6 h-6 rounded-full bg-white shadow-md transition-transform flex items-center justify-center ${i?"translate-x-7":"translate-x-0.5"}`,children:i?e.jsx(fe,{size:12,className:"text-primary-500"}):e.jsx(pe,{size:12,className:"text-amber-500"})})})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-800 dark:text-white text-sm flex items-center gap-2",children:[p?e.jsx(de,{size:16,className:"text-primary-500"}):e.jsx(ce,{size:16,className:"text-gray-400"}),"ê²°ì œì¼ ì•Œë¦¼"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mt-0.5",children:R()?w==="denied"?"ì•Œë¦¼ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ í—ˆìš©í•´ì£¼ì„¸ìš”.":"ê²°ì œ ì˜ˆì •ì¼ 3ì¼, 1ì¼ ì „ì— ì•Œë¦¼":"ì´ ë¸Œë¼ìš°ì €ëŠ” ì•Œë¦¼ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"})]}),e.jsx("button",{onClick:async()=>{if(p)jt(),y(!1);else{const v=await kt();y(v),E(Z())}},disabled:!R()||w==="denied",className:`relative w-14 h-7 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${p?"bg-primary-500":"bg-gray-200 dark:bg-dark-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-6 h-6 rounded-full bg-white shadow-md transition-transform flex items-center justify-center ${p?"translate-x-7":"translate-x-0.5"}`,children:p?e.jsx(de,{size:12,className:"text-primary-500"}):e.jsx(ce,{size:12,className:"text-gray-400"})})})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(tt,{size:16,className:"text-primary-500"}),e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"ì›” ì˜ˆì‚° ì„¤ì •"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",placeholder:"0",min:"0",step:"10000",value:C||"",onChange:v=>{const j=Number(v.target.value)||0;if(P(j),l!=null&&l.uid&&!x){const D=k.getUserSettings(l.uid);k.saveUserSettings(l.uid,{...D,budget:j})}},className:"flex-1 px-3 py-2 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm"}),e.jsx("span",{className:"text-gray-400 dark:text-dark-500 text-sm",children:"ì›/ì›”"})]}),C>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-500 dark:text-dark-400",children:"ì‚¬ìš©ëŸ‰"}),e.jsxs("span",{className:`font-bold ${n.reduce((v,j)=>v+(j.isPaused?0:j.cost),0)>C?"text-red-500":"text-primary-500"}`,children:[Math.round(n.reduce((v,j)=>v+(j.isPaused?0:j.cost),0)/C*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${n.reduce((v,j)=>v+(j.isPaused?0:j.cost),0)>C?"bg-red-500":"bg-primary-500"}`,style:{width:`${Math.min(100,n.reduce((v,j)=>v+(j.isPaused?0:j.cost),0)/C*100)}%`}})}),e.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-1",children:[n.reduce((v,j)=>v+(j.isPaused?0:j.cost),0).toLocaleString(),"ì› / ",C.toLocaleString(),"ì›"]})]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"ë°ì´í„° ë‚´ë³´ë‚´ê¸°"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:O,disabled:n.length===0,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(rt,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"CSV"})]}),e.jsxs("button",{onClick:z,disabled:n.length===0,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(st,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"JSON"})]})]}),e.jsxs("button",{onClick:()=>Bt(n),disabled:n.length===0,className:"w-full mt-3 flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-primary-200 dark:border-primary-800 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-primary-900/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(G,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"ìº¨ë¦°ë”ë¡œ ë‚´ë³´ë‚´ê¸° (.ics)"})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-2",children:[n.length,"ê°œì˜ êµ¬ë… ë°ì´í„°ë¥¼ ë‚´ë³´ëƒ…ë‹ˆë‹¤"]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"ë°ì´í„° ê°€ì ¸ì˜¤ê¸°"}),e.jsx("input",{ref:$,type:"file",accept:".csv,.json",onChange:_,className:"hidden",id:"import-file"}),e.jsxs("label",{htmlFor:"import-file",className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border-2 border-dashed border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700/50 text-gray-600 dark:text-dark-400 hover:border-primary-400 hover:text-primary-600 dark:hover:text-primary-400 cursor-pointer transition-colors",children:[e.jsx(at,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"CSV ë˜ëŠ” JSON íŒŒì¼ ì„ íƒ"})]}),o&&e.jsxs("div",{className:`mt-2 p-2 rounded-lg text-xs flex items-center gap-2 ${o.success?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400"}`,children:[o.success?e.jsx(Ce,{size:14}):e.jsx(ee,{size:14}),o.success?`${o.count}ê°œì˜ êµ¬ë…ì„ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤`:o.message]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"ìœ„í—˜ êµ¬ì—­"}),d?e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-3",children:[e.jsx(ee,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:"ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"})]}),e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400/80 mb-3",children:"ëª¨ë“  êµ¬ë… ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤. ì´ ìž‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-2 px-4 rounded-lg bg-white dark:bg-dark-700 text-gray-600 dark:text-dark-300 text-sm font-medium hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:H,className:"flex-1 py-2 px-4 rounded-lg bg-red-500 text-white text-sm font-medium hover:bg-red-600 transition-colors",children:"ì‚­ì œ"})]})]}):e.jsxs("button",{onClick:()=>u(!0),disabled:n.length===0,className:"w-full flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ne,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"ëª¨ë“  ë°ì´í„° ì‚­ì œ"})]})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"êµ¬ë… ë§¤ë‹ˆì € Pro v1.0.0"})})]})]})}):null}function Gt({onSignUp:t}){const s=Ee(),[n,a]=g.useState(null),[r,i]=g.useState(!1);if(g.useEffect(()=>{const h=()=>{const l=Ie();a(l)};h();const c=setInterval(h,6e4);return()=>clearInterval(c)},[]),!n||r)return null;const m=n.remainingMinutes<=5;return e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 ${m?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gradient-to-r from-amber-500 to-orange-500"} text-white py-2 px-4 shadow-lg`,children:e.jsxs("div",{className:"max-w-lg mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(we,{size:16,className:"animate-pulse"}),e.jsxs("span",{children:[e.jsx("strong",{children:"ì²´í—˜ ëª¨ë“œ"})," - ",n.remainingMinutes,"ë¶„ í›„ ë°ì´í„°ê°€ ì‚¬ë¼ì§‘ë‹ˆë‹¤"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>s("/login"),className:"flex items-center gap-1 px-3 py-1 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-medium transition-colors",children:[e.jsx(nt,{size:14}),"ê°€ìž…í•˜ê³  ì €ìž¥í•˜ê¸°"]}),e.jsx("button",{onClick:()=>i(!0),className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx(V,{size:16})})]})]})})}const Vt=g.lazy(()=>ne(()=>import("./LoginPage-Be91I2dC.js"),__vite__mapDeps([0,1,2]),import.meta.url)),Yt=g.lazy(()=>ne(()=>import("./ForgotPasswordPage-DWUdZgB3.js"),__vite__mapDeps([3,1,2]),import.meta.url)),Ht=g.lazy(()=>ne(()=>import("./ProfilePage-BkzV1EOc.js"),__vite__mapDeps([4,1,2]),import.meta.url));function Xt(){return e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsx("div",{className:"flex flex-col items-center gap-4",children:e.jsx("div",{className:"w-12 h-12 spinner"})})})}function Kt(){const{user:t,isDemo:s,isAuthenticated:n}=Y(),a=ht(s?null:t),[r,i]=g.useState([]);g.useEffect(()=>{s&&i(T())},[s]);const m=s?r:a.subscriptions,h=s?!1:a.loading,c=g.useCallback(async f=>{if(s){const N=q({...f,id:`demo-${Date.now()}`});return i(T()),N.id}return a.addSubscription(f)},[s,a]),l=g.useCallback(async(f,N)=>{if(s){const W=T().find(We=>We.id===f);W&&(q({...W,...N}),i(T()));return}return a.updateSubscription(f,N)},[s,a]),x=g.useCallback(async f=>{if(s){ut(f),i(T());return}return a.deleteSubscription(f)},[s,a]),d=g.useCallback(async f=>{if(s){const U=T().find(W=>W.id===f);U&&(q({...U,isPaused:!U.isPaused}),i(T()));return}return a.togglePause(f)},[s,a]),[u,o]=g.useState(!1),[b,p]=g.useState(!1),[y,w]=g.useState(null),[E,C]=g.useState(null),[P,$]=g.useState(""),[O,z]=g.useState(null),[_,H]=g.useState("daysLeft"),[v,j]=g.useState(!0),D=g.useMemo(()=>m.map(f=>({...f,daysLeft:bt(f.billingDay)})),[m]),L=g.useMemo(()=>m.filter(f=>!f.isPaused).reduce((f,N)=>f+(N.cost||0),0),[m]),A=L*12,X=g.useMemo(()=>{const f={};return m.filter(N=>!N.isPaused).forEach(N=>{f[N.category]||(f[N.category]={count:0,total:0}),f[N.category].count+=1,f[N.category].total+=N.cost}),f},[m]),Me=g.useMemo(()=>D.filter(f=>!f.isPaused&&f.daysLeft<=3).sort((f,N)=>f.daysLeft-N.daysLeft),[D]),M=g.useCallback((f,N="success")=>{C({message:f,type:N}),setTimeout(()=>C(null),3e3)},[]);g.useEffect(()=>{D.length>0&&yt(D)},[D]);const K=g.useCallback((f=null)=>{w(f),o(!0)},[]),Ue=g.useCallback(()=>{o(!1),w(null)},[]),Re=g.useCallback(async(f,N)=>{try{N?(await l(N,f),M("êµ¬ë…ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤")):(await c(f),M("ìƒˆ êµ¬ë…ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤"))}catch(U){M("ì €ìž¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤","error"),console.error(U)}},[c,l,M]),Fe=g.useCallback(async f=>{if(confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await x(f),M("êµ¬ë…ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤")}catch(N){M("ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤","error"),console.error(N)}},[x,M]),ze=g.useCallback(f=>{z(N=>N===f?null:f)},[]),_e=m.filter(f=>!f.isPaused).length;return h?e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 spinner"}),e.jsx("p",{className:"text-gray-500 dark:text-dark-400 text-sm",children:"ë¡œë”© ì¤‘..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900 text-gray-800 dark:text-white font-sans pb-24 md:pb-10 transition-colors",children:[s&&e.jsx(Gt,{}),e.jsx(wt,{subscriptionCount:_e,onOpenSettings:()=>p(!0)}),e.jsxs("main",{className:`max-w-lg mx-auto px-4 py-6 space-y-6 ${s?"pt-16":""}`,children:[e.jsx(Dt,{totalMonthlyCost:L,totalYearlyCost:A,subscriptions:D}),e.jsx(It,{items:Me}),e.jsx($t,{subscriptions:D,totalMonthlyCost:L,totalYearlyCost:A,categoryBreakdown:X,onCategoryClick:ze}),m.length>0&&e.jsx(Ot,{searchQuery:P,onSearchChange:$,selectedCategory:O,onCategoryChange:z,sortBy:_,onSortChange:H,showPaused:v,onShowPausedChange:j}),e.jsx(Lt,{subscriptions:D,searchQuery:P,selectedCategory:O,sortBy:_,showPaused:v,onEdit:K,onDelete:Fe,onTogglePause:d,onAddNew:()=>K()})]}),e.jsx("button",{onClick:()=>K(),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-xl shadow-primary-500/40 flex items-center justify-center transition-all hover:scale-105 active:scale-95 z-40 fab-pulse","aria-label":"ìƒˆ êµ¬ë… ì¶”ê°€",children:e.jsx(Se,{size:24})}),e.jsx(At,{isOpen:u,onClose:Ue,onSave:Re,editData:y}),e.jsx(Jt,{isOpen:b,onClose:()=>p(!1),subscriptions:m,onImport:s?null:a.importSubscriptions,onClearAll:s?null:a.clearAllSubscriptions}),E&&e.jsx("div",{className:`toast ${E.type==="error"?"bg-red-500 text-white":"bg-gray-900 dark:bg-white text-white dark:text-gray-900"}`,children:E.message})]})}function he({children:t}){const{isAuthenticated:s,loading:n}=Y();return n?e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsx("div",{className:"w-12 h-12 spinner"})}):s?t:e.jsx(dt,{to:"/login",replace:!0})}function qt(){return e.jsx($e,{children:e.jsx(gt,{children:e.jsx(lt,{children:e.jsx(g.Suspense,{fallback:e.jsx(Xt,{}),children:e.jsxs(it,{children:[e.jsx(B,{path:"/login",element:e.jsx(Vt,{})}),e.jsx(B,{path:"/forgot-password",element:e.jsx(Yt,{})}),e.jsx(B,{path:"/profile",element:e.jsx(he,{children:e.jsx(Ht,{})})}),e.jsx(B,{path:"/",element:e.jsx(he,{children:e.jsx(Kt,{})})})]})})})})})}te.createRoot(document.getElementById("root")).render(e.jsx(ct.StrictMode,{children:e.jsx($e,{children:e.jsx(qt,{})})}));export{k as l,Y as u};
