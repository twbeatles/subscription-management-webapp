import{j as e,t as S,Z as C,y as z,m as L,l as $,ai as P,aj as T}from"./vendor-ui-B6CU6qF1.js";import{r as i}from"./vendor-react-DtEkOSI3.js";function U({subscriptions:p}){const[l,u]=i.useState(""),[x,h]=i.useState(!1),[o,k]=i.useState(!1),[r,c]=i.useState([{id:1,name:"나",share:100,isMe:!0}]),n=p.filter(t=>t.sharedWith>1&&!t.isPaused),g=n.reduce((t,a)=>t+a.cost,0),b=()=>{const a=`https://subscription-manager.app/share/${Math.random().toString(36).substring(2,10)}`;u(a)},j=async()=>{try{await navigator.clipboard.writeText(l),h(!0),setTimeout(()=>h(!1),2e3)}catch(t){console.error("Failed to copy:",t)}},y=()=>{const t={id:Date.now(),name:`멤버 ${r.length}`,share:0,isMe:!1},a=[...r,t];m(a)},f=t=>{if(r.length<=1)return;const a=r.filter(d=>d.id!==t);m(a)},m=t=>{const a=Math.floor(100/t.length),d=100-a*t.length,s=t.map((w,M)=>({...w,share:a+(M===0?d:0)}));c(s)},N=(t,a)=>{const d=r.map(s=>s.id===t?{...s,share:Math.max(0,Math.min(100,a))}:s);c(d)},v=t=>Math.round(g*(t/100));return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-pink-50 dark:bg-pink-900/20 text-pink-500",children:e.jsx(S,{className:"w-5 h-5"})}),"공유 관리"]}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 bg-gray-100 dark:bg-dark-700 px-2.5 py-1 rounded-full",children:[n.length,"개 공유 중"]})]}),n.length>0&&e.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-gradient-to-br from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-dark-200",children:"공유 구독 총액"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[g.toLocaleString(),"원/월"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(t=>e.jsxs("span",{className:"text-xs px-2 py-1 bg-white/50 dark:bg-dark-800/50 rounded-full text-gray-600 dark:text-dark-300",children:[t.name," (",t.sharedWith,"명)"]},t.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:()=>k(!o),className:"w-full flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-dark-700/50 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:16,className:"text-pink-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-dark-200",children:"비용 분담 계산기"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:o?"접기":"펼치기"})]}),o&&e.jsxs("div",{className:"mt-3 p-4 rounded-xl border border-gray-200 dark:border-dark-600",children:[e.jsx("div",{className:"space-y-3 mb-4",children:r.map(t=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white ${t.isMe?"bg-pink-500":"bg-gray-400"}`,children:t.name[0]}),e.jsx("input",{type:"text",value:t.name,onChange:a=>{const d=r.map(s=>s.id===t.id?{...s,name:a.target.value}:s);c(d)},className:"flex-1 px-2 py-1.5 rounded-lg border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-800 text-sm"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",value:t.share,onChange:a=>N(t.id,Number(a.target.value)),className:"w-14 px-2 py-1.5 rounded-lg border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-800 text-sm text-center",min:"0",max:"100"}),e.jsx("span",{className:"text-xs text-gray-400",children:"%"})]}),e.jsx("div",{className:"w-20 text-right",children:e.jsxs("span",{className:"text-sm font-bold text-gray-800 dark:text-white",children:[v(t.share).toLocaleString(),"원"]})}),!t.isMe&&e.jsx("button",{onClick:()=>f(t.id),className:"text-gray-400 hover:text-red-500",children:"✕"})]},t.id))}),e.jsxs("button",{onClick:y,className:"w-full py-2 rounded-lg border-2 border-dashed border-gray-200 dark:border-dark-600 text-gray-400 hover:border-pink-400 hover:text-pink-500 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(z,{size:14}),"멤버 추가"]}),r.reduce((t,a)=>t+a.share,0)!==100&&e.jsxs("p",{className:"text-[10px] text-amber-500 text-center mt-2",children:["⚠️ 비율 합계가 ",r.reduce((t,a)=>t+a.share,0),"%입니다 (100%여야 함)"]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 dark:bg-dark-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(L,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-dark-300",children:"구독 목록 공유"})]}),l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:l,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-800 text-xs text-gray-600 dark:text-dark-300"}),e.jsx("button",{onClick:j,className:`p-2 rounded-lg transition-colors ${x?"bg-green-500 text-white":"bg-gray-200 dark:bg-dark-600 text-gray-600 dark:text-dark-300 hover:bg-gray-300 dark:hover:bg-dark-500"}`,children:x?e.jsx($,{size:14}):e.jsx(P,{size:14})})]}):e.jsxs("button",{onClick:b,className:"w-full py-2.5 bg-pink-500 hover:bg-pink-600 text-white text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(T,{size:14}),"공유 링크 생성"]}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-2 text-center",children:"링크를 통해 구독 목록을 공유할 수 있습니다 (읽기 전용)"})]})]})}export{U as default};
