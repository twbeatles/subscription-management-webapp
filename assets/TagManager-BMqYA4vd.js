import{j as e,ad as C,X as f,s as E,l as F,ae as z,af as B}from"./vendor-ui-B6CU6qF1.js";import{r as d}from"./vendor-react-DtEkOSI3.js";function K({subscriptions:l,allTags:m=[],selectedTags:a=[],onTagCreate:h,onTagDelete:x,onTagSelect:c,onTagDeselect:g,onClearFilter:b}){const[k,n]=d.useState(!1),[i,o]=d.useState(""),[u,y]=d.useState("#6366F1"),j=["#EF4444","#F97316","#F59E0B","#84CC16","#22C55E","#14B8A6","#06B6D4","#3B82F6","#6366F1","#8B5CF6","#D946EF","#EC4899"],N=d.useMemo(()=>{const r={};return l.forEach(s=>{(s.tags||[]).forEach(t=>{r[t]=(r[t]||0)+1})}),r},[l]),p=()=>{i.trim()&&h&&(h({name:i.trim(),color:u}),o(""),n(!1))},v=r=>{r.key==="Enter"?p():r.key==="Escape"&&(n(!1),o(""))};return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(C,{size:16,className:"text-indigo-500"}),"태그"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.length>0&&e.jsxs("button",{onClick:b,className:"text-[10px] text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 flex items-center gap-1",children:[e.jsx(f,{size:10}),"필터 초기화"]}),e.jsx("button",{onClick:()=>n(!0),className:"p-1.5 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 text-indigo-500 hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition-colors",children:e.jsx(E,{size:14})})]})]}),k&&e.jsxs("div",{className:"mb-3 p-3 rounded-xl bg-gray-50 dark:bg-dark-700/50 space-y-3",children:[e.jsx("input",{type:"text",value:i,onChange:r=>o(r.target.value),onKeyDown:v,placeholder:"태그 이름",className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-800 text-sm text-gray-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none",autoFocus:!0}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:j.map(r=>e.jsx("button",{onClick:()=>y(r),className:`w-6 h-6 rounded-full transition-transform ${u===r?"ring-2 ring-offset-2 ring-gray-400 scale-110":""}`,style:{backgroundColor:r}},r))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:p,disabled:!i.trim(),className:"flex-1 py-2 bg-indigo-500 text-white text-xs font-medium rounded-lg hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-1",children:[e.jsx(F,{size:12}),"생성"]}),e.jsx("button",{onClick:()=>{n(!1),o("")},className:"px-4 py-2 bg-gray-100 dark:bg-dark-600 text-gray-600 dark:text-dark-300 text-xs font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-dark-500 transition-colors",children:"취소"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.length===0?e.jsx("p",{className:"text-xs text-gray-400 dark:text-dark-500 py-2",children:"태그가 없습니다. 새 태그를 만들어보세요!"}):m.map(r=>{const s=a.includes(r.name),t=N[r.name]||0;return e.jsxs("div",{className:`group flex items-center gap-1.5 px-2.5 py-1.5 rounded-full text-xs font-medium transition-all cursor-pointer ${s?"ring-2 ring-offset-1 shadow-sm":"hover:shadow-sm"}`,style:{backgroundColor:s?r.color:`${r.color}20`,color:s?"white":r.color,ringColor:r.color},onClick:()=>s?g==null?void 0:g(r.name):c==null?void 0:c(r.name),children:[e.jsx(z,{size:10}),e.jsx("span",{children:r.name}),t>0&&e.jsx("span",{className:`text-[10px] px-1 rounded ${s?"bg-white/20":"bg-gray-100 dark:bg-dark-700 text-gray-500"}`,children:t}),e.jsx("button",{onClick:w=>{w.stopPropagation(),x==null||x(r.name)},className:`opacity-0 group-hover:opacity-100 p-0.5 rounded-full transition-opacity ${s?"hover:bg-white/20":"hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:e.jsx(f,{size:10})})]},r.name)})}),a.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-dark-700",children:e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-indigo-600 dark:text-indigo-400",children:[e.jsx(B,{size:10}),e.jsxs("span",{children:[a.length,"개 태그로 필터링 중 • ",l.filter(r=>a.every(s=>(r.tags||[]).includes(s))).length,"개 결과"]})]})})]})}export{K as default};
