import{j as e,h as S,a3 as C,D as L,ap as M,R as P,ao as f,d as A,a5 as E,l as D}from"./vendor-ui-B6CU6qF1.js";import{r as b}from"./vendor-react-DtEkOSI3.js";import{u as F,l as $}from"./index-XBRr7Ttx.js";const j={apple_one_individual:{name:"Apple One (ê°œì¸)",cost:10900,includes:["Apple Music","Apple TV+","Apple Arcade","iCloud+ 50GB"],savings:"ê°œë³„ êµ¬ë… ëŒ€ë¹„ ì•½ 30% ì ˆì•½"}},_={video_streaming:{label:"ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°",services:["Netflix","Disney+","Wavve","Tving","Watcha","Apple TV+","ì¿ íŒ¡í”Œë ˆì´"],recommendation:"ë™ì‹œì— 2ê°œ ì´ìƒ êµ¬ë… ì‹œ ì½˜í…ì¸  ì¤‘ë³µ ê°€ëŠ¥ì„± ë†’ìŒ"},music_streaming:{label:"ìŒì•… ìŠ¤íŠ¸ë¦¬ë°",services:["Spotify","Apple Music","Melon","Genie","Bugs","YouTube Music","FLO"],recommendation:"ìŒì•… ì„œë¹„ìŠ¤ëŠ” 1ê°œë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤"},cloud_storage:{label:"í´ë¼ìš°ë“œ ì €ì¥ì†Œ",services:["iCloud+","Google One","Dropbox","OneDrive","Naver MYBOX"],recommendation:"í•œ ì„œë¹„ìŠ¤ë¡œ í†µí•©í•˜ë©´ ê´€ë¦¬ê°€ í¸ë¦¬í•©ë‹ˆë‹¤"},productivity:{label:"ìƒì‚°ì„± ë„êµ¬",services:["Notion","Evernote","Obsidian","Roam Research"],recommendation:"ë…¸íŠ¸ ì•±ì€ 1ê°œë¡œ í†µí•© ê¶Œì¥"},news_reading:{label:"ë‰´ìŠ¤/ë…ì„œ",services:["ë°€ë¦¬ì˜ ì„œì¬","ë¦¬ë””ë¶ìŠ¤","ì˜ˆìŠ¤24 ë¶í´ëŸ½","êµë³´ë¬¸ê³  sam"],recommendation:"ì „ìì±… ì„œë¹„ìŠ¤ í†µí•©ìœ¼ë¡œ ì ˆì•½ ê°€ëŠ¥"},vpn:{label:"VPN",services:["NordVPN","ExpressVPN","Surfshark","ProtonVPN"],recommendation:"VPNì€ 1ê°œë©´ ì¶©ë¶„í•©ë‹ˆë‹¤"}};function v(t){const c=[],i=t.filter(d=>!d.isPaused);return Object.entries(_).forEach(([d,u])=>{const x=i.filter(m=>u.services.some(a=>m.name.toLowerCase().includes(a.toLowerCase())||a.toLowerCase().includes(m.name.toLowerCase())));if(x.length>=2){const m=x.reduce((n,r)=>n+(parseFloat(r.cost)||0),0),a=x.reduce((n,r)=>(parseFloat(r.cost)||0)<(parseFloat(n.cost)||1/0)?r:n),o=m-(parseFloat(a.cost)||0);c.push({groupId:d,groupLabel:u.label,services:x,totalCost:m,potentialSavings:o,recommendation:u.recommendation})}}),c}function y(t,c={}){const i=[],d=new Date,u=new Date(d.getTime()-30*24*60*60*1e3);return t.filter(x=>!x.isPaused).forEach(x=>{const o=(c[x.id]||[]).filter(p=>new Date(p)>=u).length,n=parseFloat(x.cost)||0,r=o>0?n/o:n;let s=Math.min(100,o*10);o<=2&&n>=5e3&&i.push({subscription:x,usageCount:o,costPerUse:Math.round(r),usageScore:s,recommendation:R(o,n),action:o===0?"cancel":"review"})}),i.sort((x,m)=>m.subscription.cost-x.subscription.cost)}function R(t,c){return t===0?"ì§€ë‚œ 30ì¼ê°„ ì‚¬ìš© ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤. í•´ì§€ë¥¼ ê³ ë ¤í•´ë³´ì„¸ìš”.":t===1?`ì›” 1íšŒ ì‚¬ìš©ìœ¼ë¡œ 1íšŒë‹¹ ${c.toLocaleString()}ì›ì…ë‹ˆë‹¤. ì •ë§ í•„ìš”í•œì§€ ê²€í† í•´ë³´ì„¸ìš”.`:"ì‚¬ìš© ë¹ˆë„ê°€ ë‚®ìŠµë‹ˆë‹¤. ë” ì €ë ´í•œ í”Œëœì´ë‚˜ ëŒ€ì•ˆì„ ì°¾ì•„ë³´ì„¸ìš”."}function N(t){var n;const c=[],i=t.filter(r=>!r.isPaused),d=i.map(r=>r.name.toLowerCase()),u=["apple music","apple tv","apple arcade","icloud"];if(u.filter(r=>d.some(s=>s.includes(r))).length>=2){const r=i.filter(p=>u.some(l=>p.name.toLowerCase().includes(l))),s=r.reduce((p,l)=>p+(parseFloat(l.cost)||0),0),g=j.apple_one_individual.cost;s>g&&c.push({type:"bundle",bundle:j.apple_one_individual,currentServices:r,currentCost:s,bundleCost:g,savings:s-g,priority:"high"})}const m=["youtube premium","youtube music"];if(m.filter(r=>d.some(s=>s.includes(r))).length>=2){const r=i.filter(s=>m.some(g=>s.name.toLowerCase().includes(g)));r.length>=2&&c.push({type:"redundancy",message:"YouTube Premiumì€ ì´ë¯¸ YouTube Musicì„ í¬í•¨í•©ë‹ˆë‹¤",currentServices:r,savings:((n=r.find(s=>s.name.toLowerCase().includes("music")))==null?void 0:n.cost)||0,priority:"high"})}return["spotify","youtube","netflix","apple music"].forEach(r=>{var g;const s=i.find(p=>p.name.toLowerCase().includes(r));s&&!s.name.toLowerCase().includes("family")&&!s.name.toLowerCase().includes("ê°€ì¡±")&&((g=s.sharedWith)==null?void 0:g.length)>=1&&c.push({type:"upgrade",message:`${s.name}ì„ ê°€ì¡± í”Œëœìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë©´ ë” ì €ë ´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤`,subscription:s,priority:"medium"})}),c.sort((r,s)=>(s.savings||0)-(r.savings||0))}function U(t,c,i={}){const d=t.filter(n=>!n.isPaused),u=d.reduce((n,r)=>n+(parseFloat(r.cost)||0),0);let x=100;const m=[];if(c&&u>c){const n=(u-c)/c*100;x-=Math.min(20,n/5),m.push({type:"budget",severity:"high",message:`ì˜ˆì‚°(${c.toLocaleString()}ì›)ì„ ${Math.round(n)}% ì´ˆê³¼`})}const a=v(t);a.length>0&&(x-=a.length*15,a.forEach(n=>{m.push({type:"duplicate",severity:"medium",message:`${n.groupLabel} ì¤‘ë³µ (${n.services.length}ê°œ)`})}));const o=y(t,i);return o.length>0&&(x-=o.length*10,o.forEach(n=>{m.push({type:"underused",severity:n.usageCount===0?"high":"low",message:`${n.subscription.name}: ì›” ${n.usageCount}íšŒ ì‚¬ìš©`})})),d.length>10&&(x-=5,m.push({type:"quantity",severity:"low",message:`í™œì„± êµ¬ë…ì´ ${d.length}ê°œë¡œ ë§ìŠµë‹ˆë‹¤`})),{score:Math.max(0,Math.round(x)),grade:O(x),issues:m,totalMonthly:u,subscriptionCount:d.length}}function O(t){return t>=90?{label:"A+",color:"#10B981",description:"ì™„ë²½í•œ êµ¬ë… ê´€ë¦¬!"}:t>=80?{label:"A",color:"#34D399",description:"í›Œë¥­í•©ë‹ˆë‹¤!"}:t>=70?{label:"B",color:"#60A5FA",description:"ì–‘í˜¸í•©ë‹ˆë‹¤"}:t>=60?{label:"C",color:"#FBBF24",description:"ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤"}:t>=50?{label:"D",color:"#F97316",description:"ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤"}:{label:"F",color:"#EF4444",description:"ì¦‰ì‹œ ì •ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤"}}function B(t,c={}){let i=0;const d=[];return v(t).forEach(a=>{i+=a.potentialSavings,d.push({category:"ì¤‘ë³µ ì„œë¹„ìŠ¤ ì •ë¦¬",item:a.groupLabel,amount:a.potentialSavings})}),y(t,c).filter(a=>a.usageCount===0).forEach(a=>{const o=parseFloat(a.subscription.cost)||0;i+=o,d.push({category:"ë¯¸ì‚¬ìš© êµ¬ë… í•´ì§€",item:a.subscription.name,amount:o})}),N(t).filter(a=>a.savings>0).forEach(a=>{var o;i+=a.savings,d.push({category:"ë²ˆë“¤ ìµœì í™”",item:((o=a.bundle)==null?void 0:o.name)||a.message,amount:a.savings})}),{totalMonthly:i,totalYearly:i*12,breakdown:d}}function I({subscriptions:t=[],budget:c=0}){const{user:i}=F(),[d,u]=b.useState(null),[x,m]=b.useState([]),a=b.useMemo(()=>{var l,h;return i!=null&&i.id?((h=(l=$).getUsageRecords)==null?void 0:h.call(l,i.id))||{}:{}},[i==null?void 0:i.id]),o=b.useMemo(()=>v(t),[t]),n=b.useMemo(()=>y(t,a),[t,a]),r=b.useMemo(()=>N(t),[t]),s=b.useMemo(()=>U(t,c,a),[t,c,a]),g=b.useMemo(()=>B(t,a),[t,a]),p=o.length+n.length+r.length;return t.length===0?e.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-blue-50 dark:from-primary-900/20 dark:to-blue-900/20 rounded-3xl p-8 text-center",children:[e.jsx(S,{className:"w-12 h-12 mx-auto text-primary-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"êµ¬ë…ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”"}),e.jsx("p",{className:"text-gray-600 dark:text-dark-400",children:"êµ¬ë…ì„ ë“±ë¡í•˜ë©´ AIê°€ ì ˆì•½ ë°©ë²•ì„ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl border border-gray-200 dark:border-dark-700 overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-primary-500"}),"êµ¬ë… ê±´ê°• ì ìˆ˜"]})}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"relative w-32 h-32 flex-shrink-0",children:[e.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"12",fill:"none",className:"text-gray-200 dark:text-dark-700"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:s.grade.color,strokeWidth:"12",fill:"none",strokeLinecap:"round",strokeDasharray:`${s.score*3.52} 352`,className:"transition-all duration-1000"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl font-bold",style:{color:s.grade.color},children:s.grade.label}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-dark-400",children:[s.score,"ì "]})]})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("p",{className:"text-gray-600 dark:text-dark-400",children:s.grade.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700/50 rounded-xl p-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-dark-400",children:"í™œì„± êµ¬ë…"}),e.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[s.subscriptionCount,"ê°œ"]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700/50 rounded-xl p-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-dark-400",children:"ì›” ì§€ì¶œ"}),e.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[s.totalMonthly.toLocaleString(),"ì›"]})]})]})]})]})]}),s.issues.length>0&&e.jsx("div",{className:"border-t border-gray-100 dark:border-dark-700 px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.issues.slice(0,3).map((l,h)=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${l.severity==="high"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":l.severity==="medium"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-400"}`,children:l.message},h)),s.issues.length>3&&e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-dark-700 text-gray-500",children:["+",s.issues.length-3,"ê°œ ë”"]})]})})]}),g.totalMonthly>0&&e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-3xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"ì˜ˆìƒ ì ˆì•½ ê¸ˆì•¡"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:["ì›” ",g.totalMonthly.toLocaleString(),"ì›"]}),e.jsxs("div",{className:"text-green-100 text-sm mt-1",children:["ì—°ê°„ ",g.totalYearly.toLocaleString(),"ì› ì ˆì•½ ê°€ëŠ¥"]})]}),e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(M,{className:"w-8 h-8"})})]})}),o.length>0&&e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl border border-gray-200 dark:border-dark-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>u(d==="duplicates"?null:"duplicates"),className:"w-full p-6 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-dark-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-2xl flex items-center justify-center",children:e.jsx(P,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ì¤‘ë³µ ì„œë¹„ìŠ¤ ê°ì§€"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:[o.length,"ê°œ ì¹´í…Œê³ ë¦¬ì—ì„œ ì¤‘ë³µ ë°œê²¬"]})]})]}),e.jsx(f,{className:`w-5 h-5 text-gray-400 transition-transform ${d==="duplicates"?"rotate-90":""}`})]}),d==="duplicates"&&e.jsx("div",{className:"px-6 pb-6 space-y-4",children:o.map((l,h)=>e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 rounded-2xl p-4 border border-orange-100 dark:border-orange-900/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium text-orange-800 dark:text-orange-300",children:l.groupLabel}),e.jsxs("span",{className:"text-sm text-orange-600 dark:text-orange-400",children:[l.potentialSavings.toLocaleString(),"ì›/ì›” ì ˆì•½ ê°€ëŠ¥"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:l.services.map((k,w)=>e.jsxs("span",{className:"px-3 py-1 bg-white dark:bg-dark-700 rounded-lg text-sm",children:[k.name," (",k.cost.toLocaleString(),"ì›)"]},w))}),e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:["ğŸ’¡ ",l.recommendation]})]},h))})]}),n.length>0&&e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl border border-gray-200 dark:border-dark-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>u(d==="underused"?null:"underused"),className:"w-full p-6 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-dark-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-2xl flex items-center justify-center",children:e.jsx(A,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ì €ì‚¬ìš©ë¥  êµ¬ë…"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:[n.length,"ê°œ êµ¬ë…ì˜ ì‚¬ìš© ë¹ˆë„ê°€ ë‚®ìŠµë‹ˆë‹¤"]})]})]}),e.jsx(f,{className:`w-5 h-5 text-gray-400 transition-transform ${d==="underused"?"rotate-90":""}`})]}),d==="underused"&&e.jsx("div",{className:"px-6 pb-6 space-y-3",children:n.map((l,h)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700/50 rounded-2xl",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.subscription.name}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${l.usageCount===0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:["ì›” ",l.usageCount,"íšŒ"]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:l.recommendation})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"font-bold text-gray-900 dark:text-white",children:[l.subscription.cost.toLocaleString(),"ì›"]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-dark-400",children:["1íšŒë‹¹ ",l.costPerUse.toLocaleString(),"ì›"]})]})]},h))})]}),r.length>0&&e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl border border-gray-200 dark:border-dark-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>u(d==="bundles"?null:"bundles"),className:"w-full p-6 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-dark-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-2xl flex items-center justify-center",children:e.jsx(E,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ë²ˆë“¤ ìµœì í™” ì¶”ì²œ"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:[r.length,"ê°œì˜ ìµœì í™” ë°©ë²• ë°œê²¬"]})]})]}),e.jsx(f,{className:`w-5 h-5 text-gray-400 transition-transform ${d==="bundles"?"rotate-90":""}`})]}),d==="bundles"&&e.jsx("div",{className:"px-6 pb-6 space-y-4",children:r.map((l,h)=>e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/10 rounded-2xl p-4 border border-purple-100 dark:border-purple-900/30",children:l.bundle?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-purple-800 dark:text-purple-300",children:l.bundle.name}),e.jsxs("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["ì›” ",l.savings.toLocaleString(),"ì› ì ˆì•½"]})]}),e.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-400 mb-2",children:["í˜„ì¬: ",l.currentCost.toLocaleString(),"ì› â†’ ë²ˆë“¤: ",l.bundleCost.toLocaleString(),"ì›"]}),e.jsxs("div",{className:"text-xs text-purple-600 dark:text-purple-500",children:["í¬í•¨: ",l.bundle.includes.join(", ")]})]}):e.jsxs("p",{className:"text-purple-800 dark:text-purple-300",children:["ğŸ’¡ ",l.message]})},h))})]}),p===0&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-3xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(D,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"ì™„ë²½í•œ êµ¬ë… ê´€ë¦¬!"}),e.jsx("p",{className:"text-gray-600 dark:text-dark-400",children:"í˜„ì¬ ë¶„ì„ ê²°ê³¼ ê°œì„ í•  ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤. í›Œë¥­í•©ë‹ˆë‹¤! ğŸ‰"})]})]})}export{I as default};
