import{j as e,ap as j,q as y,X as p,ao as u,C as k,e as N,B as v}from"./vendor-ui-B6CU6qF1.js";import{r as d}from"./vendor-react-DtEkOSI3.js";function L({subscriptions:n,onEdit:i}){var h;const[r,l]=d.useState(null),[x,o]=d.useState(!1),s=d.useMemo(()=>n.filter(t=>!t.isPaused&&t.daysLeft<=7&&t.daysLeft>=0).sort((t,a)=>t.daysLeft-a.daysLeft).slice(0,5),[n]),m=s.slice(0,3),c=d.useMemo(()=>s.reduce((t,a)=>t+(a.cost||0),0),[s]),g=s.filter(t=>t.daysLeft===0);if(n.length===0)return null;const b=t=>t===0?"오늘":t===1?"내일":`${t}일 후`,f=t=>t===0?"bg-red-500 text-white":t<=1?"bg-orange-500 text-white":t<=3?"bg-yellow-500 text-white":"bg-blue-500 text-white";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`fixed bottom-24 right-6 z-30 transition-all duration-300 ${x?"w-80":"w-auto"}`,children:[!x&&e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white px-4 py-3 rounded-2xl shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[e.jsx(j,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:g.length>0?`오늘 결제 ${g.length}건`:s.length>0?`이번 주 ${s.length}건`:"예정 없음"}),c>0&&e.jsxs("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:["₩",c.toLocaleString()]})]}),x&&e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-dark-700 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary-500 to-primary-600 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{size:18}),e.jsx("span",{className:"font-bold text-sm",children:"다가오는 결제"})]}),e.jsx("button",{onClick:()=>o(!1),className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(p,{size:16})})]}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-dark-700/50 border-b border-gray-100 dark:border-dark-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-dark-400",children:"이번 주 예정"}),e.jsxs("span",{className:"font-bold text-primary-600 dark:text-primary-400",children:["₩",c.toLocaleString()]})]})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:m.length===0?e.jsx("div",{className:"p-6 text-center text-gray-400 dark:text-dark-500 text-sm",children:"이번 주 예정된 결제가 없습니다"}):m.map(t=>{var a;return e.jsxs("button",{onClick:()=>l(t),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors border-b border-gray-50 dark:border-dark-700 last:border-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:t.color||"#6366F1"},children:((a=t.name)==null?void 0:a.charAt(0))||"?"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["₩",(t.cost||0).toLocaleString(),"/월"]})]}),e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full ${f(t.daysLeft)}`,children:b(t.daysLeft)}),e.jsx(u,{size:14,className:"text-gray-300"})]},t.id)})}),s.length>3&&e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 text-center",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.length-3,"개 더 있음"]})})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl max-w-sm w-full shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 text-white",style:{backgroundColor:r.color||"#6366F1"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold",children:((h=r.name)==null?void 0:h.charAt(0))||"?"})}),e.jsx("button",{onClick:()=>l(null),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:e.jsx(p,{size:20})})]}),e.jsx("h3",{className:"text-xl font-bold",children:r.name}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:r.category})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-dark-700 rounded-2xl",children:[e.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/30 rounded-xl",children:e.jsx(k,{className:"text-primary-600 dark:text-primary-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:"월 결제액"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["₩",(r.cost||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-dark-700 rounded-2xl",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-xl",children:e.jsx(N,{className:"text-orange-600 dark:text-orange-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:"다음 결제일"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:r.daysLeft===0?"오늘!":`${r.daysLeft}일 후 (${r.billingDay}일)`})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-dark-700 rounded-2xl",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:e.jsx(v,{className:"text-green-600 dark:text-green-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:"연간 비용"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:["₩",((r.cost||0)*12).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{l(null),i==null||i(r)},className:"flex-1 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-xl transition-colors",children:"수정하기"}),e.jsx("button",{onClick:()=>l(null),className:"flex-1 py-3 bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 text-gray-700 dark:text-dark-200 font-medium rounded-xl transition-colors",children:"닫기"})]})]})]})})]})}export{L as default};
