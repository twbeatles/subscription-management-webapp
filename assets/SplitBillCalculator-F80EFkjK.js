import{j as e,Z as S,t as f,aE as C,n as $,y as M,l as z,ai as L,m as E}from"./vendor-ui-B6CU6qF1.js";import{r as i}from"./vendor-react-DtEkOSI3.js";function R({subscriptions:m}){const[a,j]=i.useState(null),[r,o]=i.useState([{id:1,name:"ë‚˜",isOwner:!0,ratio:1}]),[d,g]=i.useState(""),[u,h]=i.useState(!1),[l,b]=i.useState(!0),c=i.useMemo(()=>m.filter(t=>!t.isPaused),[m]),x=i.useMemo(()=>{if(!a)return[];const t=a.cost,s=r.reduce((n,w)=>n+w.ratio,0);return r.map(n=>({...n,amount:Math.round(l?t/r.length:t*n.ratio/s)}))},[a,r,l]),p=()=>{d.trim()&&(o([...r,{id:Date.now(),name:d.trim(),isOwner:!1,ratio:1}]),g(""))},k=t=>{r.length<=1||o(r.filter(s=>s.id!==t))},v=(t,s)=>{o(r.map(n=>n.id===t?{...n,ratio:Math.max(.5,s)}:n))},y=()=>{if(!a)return;const t=`ğŸ“‹ ${a.name} ì •ì‚° ë‚´ì—­
ğŸ’° ì´ ê¸ˆì•¡: ${a.cost.toLocaleString()}ì›
ğŸ‘¥ ì¸ì›: ${r.length}ëª…

`+x.map(s=>`${s.isOwner?"ğŸ‘‘ ":""}${s.name}: ${s.amount.toLocaleString()}ì›`).join(`
`);navigator.clipboard.writeText(t),h(!0),setTimeout(()=>h(!1),2e3)},N=async()=>{if(!a||!navigator.share)return;const t=`ğŸ“‹ ${a.name} ì •ì‚° ë‚´ì—­
ğŸ’° ì´ ê¸ˆì•¡: ${a.cost.toLocaleString()}ì›

`+x.map(s=>`${s.name}: ${s.amount.toLocaleString()}ì›`).join(`
`);try{await navigator.share({title:`${a.name} ì •ì‚°`,text:t})}catch{}};return e.jsxs("section",{className:"bg-white dark:bg-dark-800 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700 overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-gray-100 dark:border-dark-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-violet-500/30",children:e.jsx(S,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Në¹µ ì •ì‚° ê³„ì‚°ê¸°"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400",children:"êµ¬ë…ë£Œë¥¼ ë‚˜ëˆ ì„œ ì •ì‚°í•˜ì„¸ìš”"})]})]})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2",children:"êµ¬ë… ì„œë¹„ìŠ¤ ì„ íƒ"}),e.jsxs("select",{value:(a==null?void 0:a.id)||"",onChange:t=>j(c.find(s=>s.id===t.target.value)),className:"w-full px-4 py-3 bg-gray-50 dark:bg-dark-700 border border-gray-200 dark:border-dark-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-violet-500/50 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"ì„ íƒí•˜ì„¸ìš”"}),c.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.cost.toLocaleString(),"ì›)"]},t.id))]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-xl",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-dark-300",children:"ê· ë“± ë¶„ë°°"}),e.jsx("button",{onClick:()=>b(!l),className:`relative w-12 h-6 rounded-full transition-colors ${l?"bg-violet-500":"bg-gray-300 dark:bg-dark-600"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${l?"translate-x-7":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-dark-300",children:[e.jsx(f,{size:14,className:"inline mr-1"}),"ì •ì‚° ë©¤ë²„ (",r.length,"ëª…)"]})}),e.jsx("div",{className:"space-y-2 mb-3",children:r.map(t=>{var s;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-dark-700 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t.isOwner&&e.jsx(C,{size:16,className:"text-amber-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-white truncate",children:t.name})]}),!l&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"ë¹„ìœ¨:"}),e.jsx("input",{type:"number",value:t.ratio,onChange:n=>v(t.id,parseFloat(n.target.value)||1),min:"0.5",step:"0.5",className:"w-16 px-2 py-1 text-center bg-white dark:bg-dark-600 border border-gray-200 dark:border-dark-500 rounded-lg text-sm"})]}),e.jsx("div",{className:"text-right min-w-[80px]",children:e.jsxs("span",{className:"text-sm font-bold text-violet-600 dark:text-violet-400",children:[(s=x.find(n=>n.id===t.id))==null?void 0:s.amount.toLocaleString(),"ì›"]})}),!t.isOwner&&e.jsx("button",{onClick:()=>k(t.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx($,{size:14})})]},t.id)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:t=>g(t.target.value),onKeyDown:t=>t.key==="Enter"&&p(),placeholder:"ë©¤ë²„ ì´ë¦„",className:"flex-1 px-4 py-2.5 bg-gray-50 dark:bg-dark-700 border border-gray-200 dark:border-dark-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/50"}),e.jsxs("button",{onClick:p,className:"px-4 py-2.5 bg-violet-500 hover:bg-violet-600 text-white rounded-xl text-sm font-medium flex items-center gap-1.5 transition-colors",children:[e.jsx(M,{size:16}),"ì¶”ê°€"]})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-violet-50 to-purple-50 dark:from-violet-900/20 dark:to-purple-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-dark-300",children:"ì´ ê¸ˆì•¡"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[a.cost.toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-dark-300",children:"1ì¸ë‹¹ í‰ê· "}),e.jsxs("span",{className:"text-lg font-bold text-violet-600 dark:text-violet-400",children:[Math.round(a.cost/r.length).toLocaleString(),"ì›"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:y,className:"flex-1 py-3 bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 rounded-xl text-sm font-medium text-gray-700 dark:text-dark-300 flex items-center justify-center gap-2 transition-colors",children:[u?e.jsx(z,{size:16,className:"text-green-500"}):e.jsx(L,{size:16}),u?"ë³µì‚¬ë¨!":"ë³µì‚¬í•˜ê¸°"]}),navigator.share&&e.jsxs("button",{onClick:N,className:"flex-1 py-3 bg-violet-500 hover:bg-violet-600 text-white rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-colors",children:[e.jsx(E,{size:16}),"ê³µìœ í•˜ê¸°"]})]})]}),!a&&c.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-dark-400",children:[e.jsx(f,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"í™œì„±í™”ëœ êµ¬ë…ì´ ì—†ìŠµë‹ˆë‹¤"})]})]})]})}export{R as default};
