import{j as e,g as S,l as B,X as E,p as O,s as L}from"./vendor-ui-B6CU6qF1.js";import{r as i}from"./vendor-react-DtEkOSI3.js";import{u as A,l as h,C as v,a as M}from"./index-XBRr7Ttx.js";function T({subscriptions:y=[]}){const{user:r}=A(),[n,c]=i.useState({}),[o,x]=i.useState(null),[b,m]=i.useState("");i.useEffect(()=>{var t,s;if(r!=null&&r.id){const a=(s=(t=h).getCategoryBudgets)==null?void 0:s.call(t,r.id);a&&c(a)}},[r==null?void 0:r.id]);const g=y.filter(t=>!t.isPaused).reduce((t,s)=>{const a=s.category||"기타";return t[a]=(t[a]||0)+(parseFloat(s.cost)||0),t},{}),k=[...new Set([...Object.keys(v),...Object.keys(g)])],N=(t,s)=>{var d,l;const a={...n,[t]:s};c(a),r!=null&&r.id&&((l=(d=h).saveCategoryBudgets)==null||l.call(d,r.id,a)),x(null),m("")},f=t=>{var a,d;const s={...n};delete s[t],c(s),r!=null&&r.id&&((d=(a=h).saveCategoryBudgets)==null||d.call(a,r.id,s))},p=t=>{var s;x(t),m(((s=n[t])==null?void 0:s.toString())||"")},j=()=>{const t=parseInt(b)||0;t>0&&o&&N(o,t)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl border border-gray-200 dark:border-dark-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-xl flex items-center justify-center",children:e.jsx(S,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"카테고리별 예산 설정"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:"카테고리별로 예산을 설정하고 지출을 관리하세요"})]})]}),e.jsx("div",{className:"space-y-3",children:k.map(t=>{const s=g[t]||0,a=n[t]||0,d=a>0?Math.round(s/a*100):0,l=a>0&&s>a,w=v[t]||t,C=M[t]||"#808080";return e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700/50 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C}}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w})]}),e.jsx("div",{className:"flex items-center gap-2",children:o===t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:b,onChange:u=>m(u.target.value),placeholder:"예산 입력",className:"w-28 px-3 py-1.5 bg-white dark:bg-dark-800 border border-gray-300 dark:border-dark-600 rounded-lg text-sm",autoFocus:!0,onKeyDown:u=>u.key==="Enter"&&j()}),e.jsx("button",{onClick:j,className:"p-1.5 bg-green-100 dark:bg-green-900/30 text-green-600 rounded-lg hover:bg-green-200",children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(null),className:"p-1.5 bg-gray-100 dark:bg-dark-600 text-gray-500 rounded-lg hover:bg-gray-200",children:e.jsx(E,{className:"w-4 h-4"})})]}):e.jsx(e.Fragment,{children:a>0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-sm font-medium ${l?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-dark-400"}`,children:[s.toLocaleString(),"/",a.toLocaleString(),"원"]}),l&&e.jsx(O,{className:"w-4 h-4 text-red-500"}),e.jsx("button",{onClick:()=>p(t),className:"text-xs text-primary-600 dark:text-primary-400 hover:underline",children:"수정"}),e.jsx("button",{onClick:()=>f(t),className:"text-xs text-red-500 hover:underline",children:"삭제"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-dark-400",children:[s.toLocaleString(),"원"]}),e.jsxs("button",{onClick:()=>p(t),className:"flex items-center gap-1 px-2 py-1 text-xs bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 rounded-lg hover:bg-primary-200",children:[e.jsx(L,{className:"w-3 h-3"}),"예산 설정"]})]})})})]}),a>0&&e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-dark-600 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${l?"bg-red-500":d>=80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,d)}%`}})})]},t)})})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-blue-600 rounded-3xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-primary-100 text-sm mb-1",children:"설정된 총 예산"}),e.jsxs("div",{className:"text-3xl font-bold",children:[Object.values(n).reduce((t,s)=>t+(s||0),0).toLocaleString(),"원"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-primary-100 text-sm mb-1",children:"현재 총 지출"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Object.values(g).reduce((t,s)=>t+s,0).toLocaleString(),"원"]})]})]})})]})}export{T as default};
