const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LoginPage-Dqxn3jNS.js","./vendor-ui-DvkZaKaL.js","./vendor-react-Cr-SFtWI.js","./ForgotPasswordPage-Oj9HPfBi.js","./ProfilePage-9ilLQhKR.js"])))=>i.map(i=>d[i]);
import{j as e,C as Ue,S as me,M as ue,a as Me,U as Re,b as ze,L as _e,T as q,c as Be,d as X,e as Je,f as ge,D as We,g as He,h as Ge,i as Ye,P as ae,G as Ve,k as he,l as H,E as pe,m as qe,n as Xe,o as be,p as fe,X as K,q as Ke,r as ye,B as ne,s as oe,F as Qe,t as Ze,u as et,v as tt}from"./vendor-ui-DvkZaKaL.js";import{a as rt,r as m,u as ke,H as st,R as at,b as M,N as nt,c as ot}from"./vendor-react-Cr-SFtWI.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();var G={},le=rt;G.createRoot=le.createRoot,G.hydrateRoot=le.hydrateRoot;const lt="modulepreload",it=function(t,s){return new URL(t,s).href},ie={},Q=function(s,a,n){let r=Promise.resolve();if(a&&a.length>0){const d=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),b=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));r=Promise.allSettled(a.map(o=>{if(o=it(o,n),o in ie)return;ie[o]=!0;const c=o.endsWith(".css"),x=c?'[rel="stylesheet"]':"";if(!!n)for(let h=d.length-1;h>=0;h--){const p=d[h];if(p.href===o&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${x}`))return;const l=document.createElement("link");if(l.rel=c?"stylesheet":lt,c||(l.as="script"),l.crossOrigin="",l.href=o,b&&l.setAttribute("nonce",b),document.head.appendChild(l),c)return new Promise((h,p)=>{l.addEventListener("load",h),l.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})}))}function i(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return r.then(d=>{for(const g of d||[])g.status==="rejected"&&i(g.reason);return s().catch(i)})},I={USERS:"sub_manager_users",CURRENT_USER_ID:"sub_manager_current_user_id",SUBSCRIPTIONS_PREFIX:"sub_manager_data_"},j={getUsers:()=>{try{const t=localStorage.getItem(I.USERS);return t?JSON.parse(t):[]}catch(t){return console.error("Error reading users from local storage",t),[]}},saveUsers:t=>{localStorage.setItem(I.USERS,JSON.stringify(t))},createUser:t=>{const s=j.getUsers(),a={id:`user_${Date.now()}`,displayName:t,createdAt:new Date().toISOString(),isAdmin:!1};return s.push(a),j.saveUsers(s),a},updateUser:(t,s)=>{const a=j.getUsers(),n=a.findIndex(r=>r.id===t);return n!==-1?(a[n]={...a[n],...s},j.saveUsers(a),a[n]):null},deleteUser:t=>{const a=j.getUsers().filter(n=>n.id!==t);j.saveUsers(a),localStorage.removeItem(`${I.SUBSCRIPTIONS_PREFIX}${t}`)},getCurrentUserId:()=>localStorage.getItem(I.CURRENT_USER_ID),login:t=>{localStorage.setItem(I.CURRENT_USER_ID,t)},logout:()=>{localStorage.removeItem(I.CURRENT_USER_ID)},getSubscriptions:t=>{if(!t)return[];try{const s=localStorage.getItem(`${I.SUBSCRIPTIONS_PREFIX}${t}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error reading subscriptions",s),[]}},saveSubscriptions:(t,s)=>{t&&localStorage.setItem(`${I.SUBSCRIPTIONS_PREFIX}${t}`,JSON.stringify(s))}},Y=[{id:"demo-1",name:"Netflix",cost:17e3,billingDay:15,billingCycle:"monthly",category:"OTT",url:"https://www.netflix.com",customColor:"#E50914",isPaused:!1,notes:"ÌîÑÎ¶¨ÎØ∏ÏóÑ ÏöîÍ∏àÏ†ú"},{id:"demo-2",name:"Spotify",cost:10900,billingDay:20,billingCycle:"monthly",category:"Music",url:"https://www.spotify.com",customColor:"#1DB954",isPaused:!1,notes:""},{id:"demo-3",name:"YouTube Premium",cost:14900,billingDay:5,billingCycle:"monthly",category:"OTT",url:"https://www.youtube.com",customColor:"#FF0000",isPaused:!1,notes:"Í∞ÄÏ°± ÏöîÍ∏àÏ†ú"},{id:"demo-4",name:"ChatGPT Plus",cost:28600,billingDay:10,billingCycle:"monthly",category:"Work",url:"https://chat.openai.com",customColor:"#10A37F",isPaused:!1,notes:"GPT-4 ÏÇ¨Ïö©"},{id:"demo-5",name:"Coupang Wow",cost:7890,billingDay:1,billingCycle:"monthly",category:"Shopping",url:"https://www.coupang.com",customColor:"#342971",isPaused:!1,notes:"Î°úÏºìÎ∞∞ÏÜ° Î¨¥Î£å"},{id:"demo-6",name:"iCloud+",cost:1100,billingDay:25,billingCycle:"monthly",category:"Utility",url:"https://www.icloud.com",customColor:"#3478F6",isPaused:!0,notes:"50GB Ï†ÄÏû•Í≥µÍ∞Ñ"},{id:"demo-7",name:"Notion",cost:1e4,billingDay:12,billingCycle:"monthly",category:"Work",url:"https://www.notion.so",customColor:"#000000",isPaused:!1,notes:"Plus ÏöîÍ∏àÏ†ú"},{id:"demo-8",name:"Î∞ÄÎ¶¨Ïùò ÏÑúÏû¨",cost:9900,billingDay:18,billingCycle:"monthly",category:"Education",url:"https://www.millie.co.kr",customColor:"#FFD700",isPaused:!1,notes:""}];function E(){const t=localStorage.getItem("demoSubscriptions");return t?JSON.parse(t):(localStorage.setItem("demoSubscriptions",JSON.stringify(Y)),Y)}function J(t){const s=E(),a=s.findIndex(n=>n.id===t.id);return a>=0?s[a]=t:(t.id=`demo-${Date.now()}`,s.push(t)),localStorage.setItem("demoSubscriptions",JSON.stringify(s)),t}function dt(t){const a=E().filter(n=>n.id!==t);localStorage.setItem("demoSubscriptions",JSON.stringify(a))}function je(){localStorage.removeItem("demoMode"),localStorage.removeItem("demoSubscriptions")}function we(){const t=localStorage.getItem("demoMode");if(!t)return null;const s=JSON.parse(t),a=new Date(s.expiresAt),n=new Date;if(a<=n)return je(),null;const r=a-n,i=Math.ceil(r/(1e3*60));return{...s,remainingMinutes:i,isExpired:!1}}const ve=m.createContext();function ct({children:t}){const[s,a]=m.useState(null),[n,r]=m.useState(!1),[i,d]=m.useState(!0);m.useEffect(()=>{(()=>{if(we()){r(!0),d(!1);return}const w=j.getCurrentUserId();if(w){const C=j.getUsers().find(v=>v.id===w);C?a(C):j.logout()}d(!1)})()},[]);const g=async p=>{const w=j.getUsers().find(S=>S.id===p);if(!w)throw new Error("User not found");return j.login(p),a(w),r(!1),w},b=async p=>{const y=j.createUser(p);return await g(y.id),y},o=()=>{const p=new Date;p.setMinutes(p.getMinutes()+30),localStorage.setItem("demoMode",JSON.stringify({startedAt:new Date().toISOString(),expiresAt:p.toISOString()})),localStorage.setItem("demoSubscriptions",JSON.stringify(Y)),r(!0),a(null)},c=()=>{je(),r(!1)},x=async p=>{if(!s)return;const y=j.updateUser(s.id,p);a(y)},u=async()=>{n?c():(j.logout(),a(null))},l=async()=>{s&&(j.deleteUser(s.id),await u())},h={user:s,userProfile:s,loading:i,isDemo:n,isAuthenticated:!!s||n,isAdmin:(s==null?void 0:s.isAdmin)||!1,login:g,register:b,updateProfile:x,updateUserProfile:x,logout:u,deleteAccount:l,startDemoMode:o,endDemoMode:c,signOut:u};return e.jsx(ve.Provider,{value:h,children:t})}function Z(){const t=m.useContext(ve);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const Ne=m.createContext();function Se({children:t}){const[s,a]=m.useState(()=>{if(typeof window<"u"){const r=localStorage.getItem("theme");return r?r==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});m.useEffect(()=>{const r=document.documentElement;s?(r.classList.add("dark"),localStorage.setItem("theme","dark")):(r.classList.remove("dark"),localStorage.setItem("theme","light"))},[s]);const n=()=>a(r=>!r);return e.jsx(Ne.Provider,{value:{isDark:s,toggleTheme:n},children:t})}function Ce(){const t=m.useContext(Ne);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}function xt(t){const[s,a]=m.useState([]),[n,r]=m.useState(!0),[i,d]=m.useState(null);m.useEffect(()=>{if(!t){a([]),r(!1);return}try{r(!0);const l=j.getSubscriptions(t.id);a(l)}catch(l){console.error(l),d(l)}finally{r(!1)}},[t]);const g=m.useCallback(async l=>{if(t)try{const h={...l,id:`sub_${Date.now()}`,userId:t.id,createdAt:new Date().toISOString()},y=[...j.getSubscriptions(t.id),h];return j.saveSubscriptions(t.id,y),a(y),h.id}catch(h){throw d(h),h}},[t]),b=m.useCallback(async(l,h)=>{if(t)try{const y=j.getSubscriptions(t.id).map(w=>w.id===l?{...w,...h}:w);j.saveSubscriptions(t.id,y),a(y)}catch(p){throw d(p),p}},[t]),o=m.useCallback(async l=>{if(t)try{const p=j.getSubscriptions(t.id).filter(y=>y.id!==l);j.saveSubscriptions(t.id,p),a(p)}catch(h){throw d(h),h}},[t]),c=m.useCallback(async l=>{if(t)try{const p=j.getSubscriptions(t.id).find(y=>y.id===l);p&&await b(l,{isPaused:!p.isPaused})}catch(h){throw d(h),h}},[t,b]),x=m.useCallback(async()=>{if(t)try{j.saveSubscriptions(t.id,[]),a([])}catch(l){throw d(l),l}},[t]),u=m.useCallback(async l=>{if(t)try{const h=l.map(w=>({...w,id:w.id||`sub_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,userId:t.id,createdAt:new Date().toISOString()})),y=[...j.getSubscriptions(t.id),...h];j.saveSubscriptions(t.id,y),a(y)}catch(h){throw d(h),h}},[t]);return{subscriptions:s,loading:n,error:i,addSubscription:g,updateSubscription:b,deleteSubscription:o,togglePause:c,clearAllSubscriptions:x,importSubscriptions:u}}const mt=t=>{const s=new Date,a=s.getDate(),n=s.getMonth(),r=s.getFullYear();let i=new Date(r,n,t);for(a>t&&(i=new Date(r,n+1,t));i.getDate()!==t;)i.setDate(i.getDate()-1);if(a===t)return 0;const d=i.getTime()-s.getTime();return Math.ceil(d/(1e3*60*60*24))},ut=t=>{if(!t)return-1;const s=new Date(t);return Math.ceil((s-new Date)/(1e3*60*60*24))},De="sub_manager_notifications",F=()=>"Notification"in window,W=()=>F()?Notification.permission:"denied",gt=async()=>{if(!F())return!1;try{return await Notification.requestPermission()==="granted"}catch(t){return console.error("Failed to request notification permission:",t),!1}},V=(t,s={})=>{if(!F()||Notification.permission!=="granted")return null;const a={icon:"/favicon.ico",badge:"/favicon.ico",tag:"subscription-reminder",requireInteraction:!1,silent:!1,...s};try{const n=new Notification(t,a);return setTimeout(()=>n.close(),5e3),n}catch(n){return console.error("Failed to send notification:",n),null}},ee=()=>{try{const t=localStorage.getItem(De);return t?JSON.parse(t):{enabled:!1,reminderDays:[3,1],lastChecked:null}}catch{return{enabled:!1,reminderDays:[3,1],lastChecked:null}}},te=t=>{localStorage.setItem(De,JSON.stringify(t))},ht=t=>{const s=ee();if(!s.enabled||Notification.permission!=="granted")return;const a=new Date().toDateString();if(s.lastChecked===a)return;const n=t.filter(r=>!r.isPaused&&s.reminderDays.includes(r.daysLeft));if(n.length>0)if(n.length===1){const r=n[0];V("üí≥ Í≤∞Ï†úÏùº ÏïåÎ¶º",{body:`${r.name} Í≤∞Ï†úÏùºÏù¥ ${r.daysLeft===0?"Ïò§Îäò":`${r.daysLeft}Ïùº ÌõÑ`}ÏûÖÎãàÎã§. (${r.cost.toLocaleString()}Ïõê)`,tag:`subscription-${r.id}`})}else{const r=n.reduce((i,d)=>i+d.cost,0);V("üí≥ Í≤∞Ï†úÏùº ÏïåÎ¶º",{body:`${n.length}Í∞úÏùò Íµ¨ÎèÖ Í≤∞Ï†úÍ∞Ä Í≥ß ÏòàÏ†ïÎêòÏñ¥ ÏûàÏäµÎãàÎã§. (Ï¥ù ${r.toLocaleString()}Ïõê)`,tag:"subscription-multiple"})}te({...s,lastChecked:a})},pt=async()=>{const t=await gt();return t&&(te({enabled:!0,reminderDays:[3,1,0],lastChecked:null}),V("üîî ÏïåÎ¶º ÌôúÏÑ±Ìôî",{body:"Íµ¨ÎèÖ Í≤∞Ï†úÏùº ÏïåÎ¶ºÏù¥ ÌôúÏÑ±ÌôîÎêòÏóàÏäµÎãàÎã§.",tag:"notification-enabled"})),t},bt=()=>{const t=ee();te({...t,enabled:!1})};function ft({subscriptionCount:t,onOpenSettings:s}){var p;const{isDark:a,toggleTheme:n}=Ce(),{user:r,userProfile:i,isAdmin:d,isDemo:g,signOut:b}=Z(),o=ke(),[c,x]=m.useState(!1),u=async()=>{await b(),o("/login")},l=(i==null?void 0:i.displayName)||(r==null?void 0:r.displayName)||(g?"Ï≤¥Ìóò Ï§ë":"ÏÇ¨Ïö©Ïûê"),h=(i==null?void 0:i.photoURL)||(r==null?void 0:r.photoURL);return e.jsx("header",{className:"bg-white dark:bg-dark-800 sticky top-0 z-20 shadow-sm dark:shadow-dark-900/50 transition-colors",children:e.jsxs("div",{className:"max-w-lg mx-auto px-4 py-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary-500 to-primary-600 p-2 rounded-xl text-white shadow-lg shadow-primary-500/30",children:e.jsx(Ue,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white tracking-tight",children:"Íµ¨ÎèÖ Îß§ÎãàÏ†Ä"}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-400 -mt-0.5",children:"Pro Edition"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 bg-gray-100 dark:bg-dark-700 px-3 py-1.5 rounded-full",children:[e.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-bold",children:t}),e.jsx("span",{className:"ml-1",children:"Íµ¨ÎèÖÏ§ë"})]}),e.jsx("button",{onClick:n,className:"p-2 rounded-xl text-gray-600 dark:text-dark-300 hover:bg-gray-100 dark:hover:bg-dark-700 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 hover:scale-105 active:scale-95","aria-label":"ÌÖåÎßà Î≥ÄÍ≤Ω",children:a?e.jsx(me,{size:18}):e.jsx(ue,{size:18})}),e.jsx("button",{onClick:s,className:"p-2 rounded-xl text-gray-600 dark:text-dark-300 hover:bg-gray-100 dark:hover:bg-dark-700 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-200 hover:scale-105 active:scale-95 hover:rotate-45","aria-label":"ÏÑ§Ï†ï",children:e.jsx(Me,{size:18})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>x(!c),className:"flex items-center gap-2 p-1.5 pr-3 rounded-xl hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx("div",{className:"w-7 h-7 rounded-full bg-primary-500 flex items-center justify-center text-white text-xs font-medium overflow-hidden",children:h?e.jsx("img",{src:h,alt:"",className:"w-full h-full object-cover"}):((p=l[0])==null?void 0:p.toUpperCase())||"U"})}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-dark-700 rounded-xl shadow-lg border border-gray-100 dark:border-dark-600 z-20 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-dark-600",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:l}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 truncate",children:(r==null?void 0:r.email)||"Ï≤¥Ìóò Î™®Îìú"})]}),e.jsxs("div",{className:"py-1",children:[!g&&e.jsxs("button",{onClick:()=>{x(!1),o("/profile")},className:"w-full px-4 py-2.5 text-left text-sm text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 flex items-center gap-2",children:[e.jsx(Re,{size:16}),"ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï"]}),d&&e.jsxs("button",{onClick:()=>{x(!1),o("/admin")},className:"w-full px-4 py-2.5 text-left text-sm text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 flex items-center gap-2",children:[e.jsx(ze,{size:16}),"Í¥ÄÎ¶¨Ïûê ÎåÄÏãúÎ≥¥Îìú"]}),e.jsxs("button",{onClick:()=>{x(!1),u()},className:"w-full px-4 py-2.5 text-left text-sm text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 flex items-center gap-2",children:[e.jsx(_e,{size:16}),g?"Ï≤¥Ìóò Ï¢ÖÎ£å":"Î°úÍ∑∏ÏïÑÏõÉ"]})]})]})]})]})]})]})})}const N={OTT:"#E50914",Music:"#1DB954",Shopping:"#FF9900",Utility:"#00A4EF",Work:"#5A5A5A",Education:"#FFD700",Health:"#10B981",Finance:"#8B5CF6",Etc:"#808080"},R={OTT:"ÏòÅÏÉÅ/Ïä§Ìä∏Î¶¨Î∞ç",Music:"ÏùåÏïÖ",Shopping:"ÏáºÌïë/Ïù¥Ïª§Î®∏Ïä§",Utility:"Ïú†Ìã∏Î¶¨Ìã∞",Work:"ÏóÖÎ¨¥/ÏÉùÏÇ∞ÏÑ±",Education:"ÍµêÏú°/ÌïôÏäµ",Health:"Í±¥Í∞ï/Ïö¥Îèô",Finance:"Í∏àÏúµ/Ìà¨Ïûê",Etc:"Í∏∞ÌÉÄ"},yt=[{name:"Netflix",category:"OTT",color:"#E50914",url:"https://www.netflix.com",defaultCost:17e3},{name:"YouTube Premium",category:"OTT",color:"#FF0000",url:"https://www.youtube.com",defaultCost:14900},{name:"Disney+",category:"OTT",color:"#113CCF",url:"https://www.disneyplus.com",defaultCost:9900},{name:"Wavve",category:"OTT",color:"#1C1B1F",url:"https://www.wavve.com",defaultCost:13900},{name:"Tving",category:"OTT",color:"#FF153C",url:"https://www.tving.com",defaultCost:13900},{name:"Watcha",category:"OTT",color:"#FF0558",url:"https://watcha.com",defaultCost:12900},{name:"Spotify",category:"Music",color:"#1DB954",url:"https://www.spotify.com",defaultCost:10900},{name:"Melon",category:"Music",color:"#00CD3C",url:"https://www.melon.com",defaultCost:10900},{name:"Apple Music",category:"Music",color:"#FA233B",url:"https://music.apple.com",defaultCost:10900},{name:"Genie",category:"Music",color:"#3D85C6",url:"https://www.genie.co.kr",defaultCost:10900},{name:"Bugs",category:"Music",color:"#FF3366",url:"https://music.bugs.co.kr",defaultCost:9500},{name:"Coupang Wow",category:"Shopping",color:"#342971",url:"https://www.coupang.com",defaultCost:7890},{name:"Naver Plus",category:"Shopping",color:"#03C75A",url:"https://nid.naver.com",defaultCost:4900},{name:"SSG Ïú†ÎãàÎ≤ÑÏä§",category:"Shopping",color:"#FF5A5A",url:"https://www.ssg.com",defaultCost:4900},{name:"Notion",category:"Work",color:"#000000",url:"https://www.notion.so",defaultCost:1e4},{name:"ChatGPT Plus",category:"Work",color:"#10A37F",url:"https://chat.openai.com",defaultCost:2e4},{name:"Figma",category:"Work",color:"#F24E1E",url:"https://www.figma.com",defaultCost:15e3},{name:"GitHub Copilot",category:"Work",color:"#000000",url:"https://github.com",defaultCost:1e4},{name:"Slack",category:"Work",color:"#4A154B",url:"https://slack.com",defaultCost:1e4},{name:"Zoom",category:"Work",color:"#2D8CFF",url:"https://zoom.us",defaultCost:16e3},{name:"Adobe CC",category:"Work",color:"#FF0000",url:"https://www.adobe.com",defaultCost:24e3},{name:"Î∞ÄÎ¶¨Ïùò ÏÑúÏû¨",category:"Education",color:"#FFD700",url:"https://www.millie.co.kr",defaultCost:9900},{name:"Duolingo",category:"Education",color:"#58CC02",url:"https://www.duolingo.com",defaultCost:14900},{name:"Coursera",category:"Education",color:"#0056D2",url:"https://www.coursera.org",defaultCost:59e3},{name:"ÌÅ¥ÎûòÏä§101",category:"Education",color:"#FF6B00",url:"https://class101.net",defaultCost:19900},{name:"Nike Training Club",category:"Health",color:"#000000",url:"https://www.nike.com",defaultCost:0},{name:"Keep",category:"Health",color:"#00C8FF",url:"https://www.gotokeep.com",defaultCost:9900},{name:"iCloud+",category:"Utility",color:"#3478F6",url:"https://www.icloud.com",defaultCost:1100},{name:"Google One",category:"Utility",color:"#4285F4",url:"https://one.google.com",defaultCost:2400},{name:"Dropbox",category:"Utility",color:"#0061FF",url:"https://www.dropbox.com",defaultCost:12e3},{name:"1Password",category:"Utility",color:"#1A8CFF",url:"https://1password.com",defaultCost:5e3},{name:"NordVPN",category:"Utility",color:"#4687FF",url:"https://nordvpn.com",defaultCost:15e3}],kt={monthly:{label:"ÏõîÍ∞Ñ",multiplier:1},yearly:{label:"Ïó∞Í∞Ñ",multiplier:12},weekly:{label:"Ï£ºÍ∞Ñ",multiplier:.25}},jt=[{value:"daysLeft",label:"Í≤∞Ï†úÏùº Ïàú"},{value:"cost-desc",label:"Í∏àÏï° ÎÜíÏùÄ Ïàú"},{value:"cost-asc",label:"Í∏àÏï° ÎÇÆÏùÄ Ïàú"},{value:"name",label:"Ïù¥Î¶Ñ Ïàú"},{value:"category",label:"Ïπ¥ÌÖåÍ≥†Î¶¨ Ïàú"}];function wt({items:t}){const s=new Date().getDate(),[a,n]=m.useState(null),r=m.useMemo(()=>[...t].filter(d=>!d.isPaused).sort((d,g)=>{let b=d.billingDay<s?d.billingDay+31:d.billingDay,o=g.billingDay<s?g.billingDay+31:g.billingDay;return b-o}),[t,s]);if(r.length===0)return e.jsx("div",{className:"text-xs text-white/60 text-center py-4",children:"Í≤∞Ï†ú ÏòàÏ†ïÏù∏ Íµ¨ÎèÖÏù¥ ÏóÜÏäµÎãàÎã§"});const i=r.slice(0,7);return e.jsxs("div",{className:"relative pt-2 pb-4",children:[e.jsx("div",{className:"relative h-2 bg-white/10 rounded-full overflow-hidden",children:i.map((d,g)=>{const b=d.billingDay<s?(d.billingDay+31-s)/31:(d.billingDay-s)/31,o=d.customColor||N[d.category]||N.Etc;return e.jsx("div",{className:"absolute h-full w-1.5 rounded-full transition-all hover:w-2",style:{left:`${b*100}%`,backgroundColor:o,boxShadow:`0 0 4px ${o}80`}},d.id)})}),e.jsx("div",{className:"flex justify-between mt-4 px-1 gap-1",children:i.slice(0,5).map((d,g)=>{const b=d.billingDay<s,o=d.billingDay===s,c=d.customColor||N[d.category]||N.Etc,x=a===d.id;return e.jsxs("div",{className:"relative flex flex-col items-center group cursor-pointer",style:{flex:`0 0 ${100/5}%`},onMouseEnter:()=>n(d.id),onMouseLeave:()=>n(null),children:[x&&e.jsxs("div",{className:"absolute -top-14 left-1/2 -translate-x-1/2 px-2.5 py-1.5 rounded-lg text-xs whitespace-nowrap z-10 shadow-lg animate-fadeIn",style:{backgroundColor:c,color:"white"},children:[e.jsx("div",{className:"font-bold",children:d.name}),e.jsxs("div",{className:"text-white/80 text-[10px]",children:[d.cost.toLocaleString(),"Ïõê"]}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-1 w-2 h-2 rotate-45",style:{backgroundColor:c}})]}),e.jsx("div",{className:`w-3.5 h-3.5 rounded-full border-2 transition-all duration-200 ${o?"animate-pulse scale-125":b?"opacity-40":x?"scale-125 shadow-lg":"group-hover:scale-110"}`,style:{backgroundColor:c,borderColor:"rgba(255,255,255,0.6)",boxShadow:x?`0 0 8px ${c}`:"none"}}),e.jsx("span",{className:`text-[10px] font-semibold mt-1.5 transition-colors ${o?"text-white":b?"text-white/40":x?"text-white":"text-white/80"}`,children:o?"Ïò§Îäò":`${d.billingDay}Ïùº`}),e.jsx("span",{className:`text-[10px] max-w-full text-center transition-colors ${o?"text-white font-bold":b?"text-white/40":x?"text-white font-medium":"text-white/70"}`,children:d.name.length>5?d.name.slice(0,5)+"..":d.name})]},d.id)})}),r.length>5&&e.jsx("div",{className:"text-center mt-2",children:e.jsxs("span",{className:"text-[10px] text-white/50 hover:text-white/70 transition-colors cursor-pointer",children:["+",r.length-5,"Í∞ú Îçî ÏûàÏùå"]})})]})}function vt({totalMonthlyCost:t,totalYearlyCost:s,subscriptions:a,previousMonthCost:n=null}){const r=n?((t-n)/n*100).toFixed(1):null;return e.jsxs("div",{className:"relative bg-gradient-to-br from-primary-500 via-primary-600 to-violet-600 dark:from-primary-600 dark:via-primary-700 dark:to-violet-700 rounded-3xl p-6 text-white shadow-xl shadow-primary-500/30 dark:shadow-primary-900/40 transition-all duration-300 hover:shadow-2xl hover:shadow-primary-500/40",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-3xl pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-6 -mt-6 w-36 h-36 rounded-full bg-white opacity-[0.1] blur-2xl animate-pulse",style:{animationDuration:"4s"}}),e.jsx("div",{className:"absolute bottom-0 left-0 -ml-6 -mb-6 w-28 h-28 rounded-full bg-white opacity-[0.08] blur-xl animate-pulse",style:{animationDuration:"5s"}}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-24 h-24 rounded-full bg-violet-300 opacity-[0.12] blur-2xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-0 w-16 h-16 rounded-full bg-indigo-300 opacity-[0.1] blur-xl"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("p",{className:"text-white/70 text-sm font-medium mb-1 flex items-center gap-2",children:["Ïù¥Î≤à Îã¨ ÏòàÏÉÅ ÏßÄÏ∂úÏï°",r!==null&&e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full flex items-center gap-0.5 ${parseFloat(r)>0?"bg-red-500/20 text-red-200":"bg-green-500/20 text-green-200"}`,children:[parseFloat(r)>0?e.jsx(q,{size:10}):e.jsx(Be,{size:10}),Math.abs(parseFloat(r)),"%"]})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-2",children:[e.jsx("h2",{className:"text-4xl font-extrabold tracking-tight tabular-nums drop-shadow-sm",children:t.toLocaleString()}),e.jsx("span",{className:"text-xl opacity-90 font-medium",children:"Ïõê"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/60 mb-6",children:[e.jsxs("span",{children:["Ïó∞Í∞Ñ ÏïΩ ",Math.round(s/1e4).toLocaleString(),"ÎßåÏõê"]}),e.jsx("span",{className:"text-white/30",children:"|"}),e.jsxs("span",{children:["Ïùº ÌèâÍ∑† ",Math.round(t/30).toLocaleString(),"Ïõê"]})]})]}),e.jsxs("div",{className:"bg-white/[0.08] backdrop-blur-md rounded-2xl p-4 border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-white/70 flex items-center gap-1.5",children:[e.jsx(X,{size:12}),"Í≤∞Ï†ú ÏùºÏ†ï"]}),e.jsxs("span",{className:"text-[10px] text-white/50",children:[new Date().getMonth()+1,"Ïõî"]})]}),e.jsx(wt,{items:a})]})]})}function Nt({items:t}){return!t||t.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl p-4 shadow-sm border-l-4 border-red-500 dark:border-red-400 flex items-start gap-3 animate-fade-in",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-2 rounded-full text-red-500 dark:text-red-400 flex-shrink-0",children:e.jsx(Je,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-2",children:["Í≥ß Í≤∞Ï†úÎêòÎäî ÏÑúÎπÑÏä§",e.jsx("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-[10px] px-1.5 py-0.5 rounded-full font-medium",children:t.length})]}),e.jsx("div",{className:"mt-2 space-y-1.5",children:t.map(s=>e.jsxs("div",{className:"text-sm flex justify-between items-center py-1 border-b border-gray-50 dark:border-dark-700 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:s.customColor||"#E50914"}}),e.jsx("span",{className:"text-gray-600 dark:text-dark-300 truncate",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("span",{className:"text-xs text-gray-400 dark:text-dark-500",children:[s.cost.toLocaleString(),"Ïõê"]}),e.jsx("span",{className:`font-bold text-xs px-2 py-0.5 rounded ${s.daysLeft===0?"bg-red-500 text-white":"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400"}`,children:s.daysLeft===0?"Ïò§Îäò":`D-${s.daysLeft}`})]})]},s.id))})]})]})}function St({data:t,onCategoryClick:s}){const[a,n]=m.useState(null);if(!t||t.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-400 dark:text-dark-500 bg-gray-50 dark:bg-dark-800 rounded-2xl border border-dashed border-gray-200 dark:border-dark-700",children:[e.jsx(ge,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§"})]});const r=t.reduce((o,c)=>o+c.cost,0);let i=0;const d=o=>{const c=Math.cos(2*Math.PI*o),x=Math.sin(2*Math.PI*o);return[c,x]},g=t.map(o=>{const c=o.cost/r,x=i;i+=c;const u=i,[l,h]=d(x),[p,y]=d(u),w=c>.5?1:0,S=["M 0 0",`L ${l} ${h}`,`A 1 1 0 ${w} 1 ${p} ${y}`,"L 0 0"].join(" "),C=o.customColor||N[o.category]||N.Etc,v=a===o.id;return e.jsx("path",{d:S,fill:C,className:"chart-segment cursor-pointer",style:{opacity:a&&!v?.4:1,transform:v?"scale(1.05)":"scale(1)",filter:v?`drop-shadow(0 0 6px ${C}80)`:"none",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:()=>n(o.id),onMouseLeave:()=>n(null),onClick:()=>s==null?void 0:s(o.category)},o.id)}),b=t.find(o=>o.id===a);return e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative w-36 h-36 flex-shrink-0",children:[e.jsx("svg",{viewBox:"-1.1 -1.1 2.2 2.2",className:"transform -rotate-90 w-full h-full drop-shadow-sm",children:g}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-20 h-20 bg-white dark:bg-dark-800 rounded-full flex flex-col items-center justify-center shadow-inner dark:shadow-dark-900/50",children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs font-bold text-gray-800 dark:text-white truncate max-w-[70px]",children:b.name}),e.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-dark-400",children:[Math.round(b.cost/r*100),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"Ïù¥Î≤àÎã¨"}),e.jsxs("span",{className:"text-sm font-bold text-gray-800 dark:text-white",children:[Math.round(r/1e4),"ÎßåÏõê"]})]})})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-1.5 text-xs max-h-36 overflow-y-auto scrollbar-hide",children:[t.slice(0,6).map(o=>{const c=o.customColor||N[o.category]||N.Etc,x=a===o.id;return e.jsxs("div",{className:`flex items-center justify-between p-1.5 rounded-lg transition-all duration-200 cursor-pointer ${x?"bg-gray-100 dark:bg-dark-700 scale-102":"hover:bg-gray-50 dark:hover:bg-dark-700/50"}`,onMouseEnter:()=>n(o.id),onMouseLeave:()=>n(null),onClick:()=>s==null?void 0:s(o.category),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:c}}),e.jsx("span",{className:"truncate max-w-[80px] text-gray-600 dark:text-dark-300",children:o.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400 dark:text-dark-500 text-[10px]",children:[o.cost.toLocaleString(),"Ïõê"]}),e.jsxs("span",{className:"font-semibold text-gray-800 dark:text-white w-8 text-right",children:[Math.round(o.cost/r*100),"%"]})]})]},o.id)}),t.length>6&&e.jsxs("div",{className:"text-gray-400 dark:text-dark-500 pl-4 text-[10px]",children:["...Ïô∏ ",t.length-6,"Í∞ú"]})]})]})}function Ct({subscriptions:t,totalMonthlyCost:s,totalYearlyCost:a,categoryBreakdown:n,onCategoryClick:r}){const i=m.useMemo(()=>{const c=["1Ïõî","2Ïõî","3Ïõî","4Ïõî","5Ïõî","6Ïõî","7Ïõî","8Ïõî","9Ïõî","10Ïõî","11Ïõî","12Ïõî"],x=new Date().getMonth();return Array.from({length:6},(u,l)=>{const h=(x-5+l+12)%12,p=Math.random()*.3-.15,y=Math.round(s*(1+p));return{month:c[h],cost:l===5?s:y,isCurrentMonth:l===5}})},[s]),d=Math.max(...i.map(c=>c.cost)),g=m.useMemo(()=>Object.entries(n).sort((c,x)=>x[1].total-c[1].total).slice(0,5),[n]),b=m.useMemo(()=>[...t].filter(c=>!c.isPaused).sort((c,x)=>x.cost-c.cost)[0],[t]),o=t.filter(c=>!c.isPaused);return t.length===0?null:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(ge,{className:"w-4 h-4 text-primary-500"}),"ÏßÄÏ∂ú Î∂ÑÏÑù"]}),e.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-dark-500 bg-gray-100 dark:bg-dark-700 px-2 py-1 rounded-full",children:[o.length,"Í∞ú ÌôúÏÑ±"]})]}),e.jsx(St,{data:o,onCategoryClick:r})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-dark-400 mb-2",children:[e.jsx(We,{size:14}),e.jsx("span",{className:"text-xs",children:"Ïõî ÌèâÍ∑†"})]}),e.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[Math.round(s).toLocaleString(),e.jsx("span",{className:"text-sm font-normal text-gray-400 dark:text-dark-500 ml-0.5",children:"Ïõê"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-dark-400 mb-2",children:[e.jsx(X,{size:14}),e.jsx("span",{className:"text-xs",children:"Ïó∞Í∞Ñ ÏòàÏÉÅ"})]}),e.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[Math.round(a/1e4).toLocaleString(),e.jsx("span",{className:"text-sm font-normal text-gray-400 dark:text-dark-500 ml-0.5",children:"ÎßåÏõê"})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(He,{className:"w-4 h-4 text-primary-500"}),"ÏõîÎ≥Ñ Ï∂îÏù¥"]}),e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"ÏµúÍ∑º 6Í∞úÏõî"})]}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:i.map((c,x)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:`w-full rounded-t-lg transition-all ${c.isCurrentMonth?"bg-gradient-to-t from-primary-500 to-primary-400":"bg-gray-200 dark:bg-dark-600"}`,style:{height:`${c.cost/d*100}%`,minHeight:"8px"}}),e.jsx("span",{className:`text-[10px] ${c.isCurrentMonth?"text-primary-600 dark:text-primary-400 font-bold":"text-gray-400 dark:text-dark-500"}`,children:c.month})]},x))})]}),g.length>0&&e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(q,{className:"w-4 h-4 text-primary-500"}),"Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ"]})}),e.jsx("div",{className:"space-y-3",children:g.map(([c,x])=>{const u=x.total/s*100,l=N[c]||N.Etc;return e.jsxs("button",{onClick:()=>r==null?void 0:r(c),className:"w-full text-left hover:bg-gray-50 dark:hover:bg-dark-700 rounded-xl p-2 -mx-2 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:l}}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-dark-300",children:R[c]||c}),e.jsxs("span",{className:"text-xs text-gray-400 dark:text-dark-500",children:["(",x.count,"Í∞ú)"]})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[x.total.toLocaleString(),"Ïõê"]})]}),e.jsx("div",{className:"h-1.5 bg-gray-100 dark:bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${u}%`,backgroundColor:l}})})]},c)})})]}),b&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 p-4 rounded-2xl border border-amber-100 dark:border-amber-900/30",children:[e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium mb-1",children:"üí∞ Í∞ÄÏû• ÎπÑÏãº Íµ¨ÎèÖ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:b.name}),e.jsxs("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:[b.cost.toLocaleString(),"Ïõê/Ïõî"]})]})]})]})}function Dt({searchQuery:t,onSearchChange:s,selectedCategory:a,onCategoryChange:n,sortBy:r,onSortChange:i,showPaused:d,onShowPausedChange:g}){const b=["All",...Object.keys(N)];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-dark-500"}),e.jsx("input",{type:"text",placeholder:"Íµ¨ÎèÖ ÏÑúÎπÑÏä§ Í≤ÄÏÉâ...",value:t,onChange:o=>s(o.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-dark-500 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all text-sm"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 pb-1",children:b.map(o=>e.jsxs("button",{onClick:()=>n(o==="All"?null:o),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all duration-200 transform active:scale-95 ${o==="All"&&!a||a===o?"bg-primary-500 text-white shadow-md shadow-primary-500/30 scale-105":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300 hover:bg-gray-200 dark:hover:bg-dark-600 hover:scale-102"}`,children:[o!=="All"&&e.jsx("span",{className:"w-2.5 h-2.5 rounded-full transition-transform group-hover:scale-110",style:{backgroundColor:N[o],boxShadow:o==="All"&&!a||a===o?`0 0 6px ${N[o]}`:"none"}}),o==="All"?"Ï†ÑÏ≤¥":R[o]||o]},o))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:r,onChange:o=>i(o.target.value),className:"appearance-none pl-3 pr-8 py-1.5 rounded-lg border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-gray-600 dark:text-dark-300 text-xs font-medium cursor-pointer focus:ring-2 focus:ring-primary-500 outline-none",children:jt.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))}),e.jsx(Ye,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-dark-400",children:"ÏùºÏãúÏ†ïÏßÄ Ìè¨Ìï®"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:o=>g(o.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 dark:bg-dark-700 rounded-full peer peer-checked:bg-primary-500 transition-colors"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform peer-checked:translate-x-4"})]})]})]})]})}function de({subscription:t,onEdit:s,onDelete:a,onTogglePause:n}){const{id:r,name:i,cost:d,billingDay:g,billingCycle:b,category:o,url:c,customColor:x,isPaused:u,trialEndDate:l,daysLeft:h}=t,p=x||N[o]||N.Etc,y=ut(l),w=y>=0;return e.jsxs("div",{className:`group bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border transition-all card-hover ${u?"border-gray-200 dark:border-dark-700 opacity-60":h<=3?"border-red-200 dark:border-red-900/50 glow-urgent":"border-gray-100 dark:border-dark-700 hover:border-primary-200 dark:hover:border-primary-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsxs("div",{className:`relative w-11 h-11 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:shadow-xl ${u?"grayscale":""}`,style:{background:u?p:`linear-gradient(135deg, ${p} 0%, ${p}CC 100%)`,boxShadow:u?"none":`0 4px 12px -2px ${p}50`},children:[i.slice(0,1).toUpperCase(),u&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-500 rounded-full flex items-center justify-center shadow-md",children:e.jsx(ae,{size:10,className:"text-white"})})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-1.5 truncate",children:[i,c&&e.jsx(Ve,{size:10,className:"text-gray-300 dark:text-dark-500 flex-shrink-0"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-dark-400 mt-0.5 flex-wrap",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium",style:{backgroundColor:`${p}15`,color:p},children:R[o]||o}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(he,{size:10}),"Îß§Ïõî ",g,"Ïùº"]}),b&&b!=="monthly"&&e.jsx("span",{className:"text-primary-500 dark:text-primary-400 font-medium",children:b==="yearly"?"Ïó∞Í∞Ñ":"Ï£ºÍ∞Ñ"})]}),w&&e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] text-amber-600 dark:text-amber-400",children:[e.jsx(H,{size:10}),"Î¨¥Î£åÏ≤¥Ìóò D-",y]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[e.jsxs("div",{className:`font-bold text-sm ${u?"text-gray-400 line-through":"text-gray-900 dark:text-white"}`,children:[d.toLocaleString(),"Ïõê"]}),e.jsx("div",{className:`text-[10px] font-bold mt-0.5 ${u?"text-gray-400 dark:text-dark-500":h===0?"text-red-600 dark:text-red-400 animate-pulse":h<=3?"text-red-500 dark:text-red-400":"text-primary-500 dark:text-primary-400"}`,children:u?"ÏùºÏãúÏ†ïÏßÄ":h===0?"Today!":`D-${h}`})]})]}),e.jsxs("div",{className:"pt-3 mt-3 border-t border-gray-50 dark:border-dark-700 flex justify-end items-center gap-2",children:[c&&e.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-1.5 py-1.5 rounded-lg bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 text-xs font-medium hover:bg-primary-100 dark:hover:bg-primary-900/40 transition-colors",children:[e.jsx(pe,{size:12}),"ÏÑúÎπÑÏä§ Ïù¥Îèô"]}),e.jsx("button",{onClick:()=>n(r),className:`p-1.5 rounded-lg transition-colors ${u?"text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20":"text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20"}`,title:u?"Ïû¨Í∞ú":"ÏùºÏãúÏ†ïÏßÄ",children:u?e.jsx(qe,{size:16}):e.jsx(ae,{size:16})}),e.jsx("button",{onClick:()=>s(t),className:"p-1.5 text-gray-400 hover:text-primary-600 hover:bg-gray-50 dark:hover:bg-dark-700 rounded-lg transition-colors",title:"ÏàòÏ†ï",children:e.jsx(Xe,{size:16})}),e.jsx("button",{onClick:()=>a(r),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"ÏÇ≠Ï†ú",children:e.jsx(be,{size:16})})]})]})}function Et({subscriptions:t,searchQuery:s,selectedCategory:a,sortBy:n,showPaused:r,onEdit:i,onDelete:d,onTogglePause:g,onAddNew:b}){const o=m.useMemo(()=>{let x=[...t];if(s){const u=s.toLowerCase();x=x.filter(l=>l.name.toLowerCase().includes(u)||l.category.toLowerCase().includes(u))}switch(a&&(x=x.filter(u=>u.category===a)),r||(x=x.filter(u=>!u.isPaused)),n){case"daysLeft":x.sort((u,l)=>(u.daysLeft||0)-(l.daysLeft||0));break;case"cost-desc":x.sort((u,l)=>l.cost-u.cost);break;case"cost-asc":x.sort((u,l)=>u.cost-l.cost);break;case"name":x.sort((u,l)=>u.name.localeCompare(l.name,"ko"));break;case"category":x.sort((u,l)=>u.category.localeCompare(l.category));break}return x},[t,s,a,n,r]),c=m.useMemo(()=>{if(n!=="category")return null;const x={};return o.forEach(u=>{x[u.category]||(x[u.category]=[]),x[u.category].push(u)}),x},[o,n]);return t.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-dark-800 rounded-2xl border border-dashed border-gray-200 dark:border-dark-700",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-dark-700 rounded-full flex items-center justify-center",children:e.jsx(fe,{size:24,className:"text-gray-400 dark:text-dark-500"})}),e.jsx("p",{className:"text-gray-500 dark:text-dark-400 text-sm mb-4",children:"Îì±Î°ùÎêú Íµ¨ÎèÖ ÏÑúÎπÑÏä§Í∞Ä ÏóÜÏäµÎãàÎã§."}),e.jsx("button",{onClick:b,className:"text-primary-600 dark:text-primary-400 text-sm font-bold hover:underline",children:"+ Ï≤´ Íµ¨ÎèÖ Ï∂îÍ∞ÄÌïòÍ∏∞"})]}):o.length===0?e.jsx("div",{className:"text-center py-8 bg-white dark:bg-dark-800 rounded-2xl",children:e.jsx("p",{className:"text-gray-400 dark:text-dark-500 text-sm",children:"Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§."})}):e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(q,{className:"w-4 h-4 text-primary-500"}),"Íµ¨ÎèÖ Î¶¨Ïä§Ìä∏",e.jsxs("span",{className:"text-xs font-normal text-gray-400 dark:text-dark-500",children:["(",o.length,")"]})]}),n==="daysLeft"&&e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"Í≤∞Ï†úÏùº Ïàú"})]}),e.jsx("div",{className:"space-y-3",children:c?Object.entries(c).map(([x,u])=>e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 mb-2 pl-1",children:[x," (",u.length,")"]}),e.jsx("div",{className:"space-y-3",children:u.map((l,h)=>e.jsx("div",{className:"subscription-item",style:{animationDelay:`${h*50}ms`},children:e.jsx(de,{subscription:l,onEdit:i,onDelete:d,onTogglePause:g})},l.id))})]},x)):o.map((x,u)=>e.jsx("div",{className:"subscription-item",style:{animationDelay:`${u*50}ms`},children:e.jsx(de,{subscription:x,onEdit:i,onDelete:d,onTogglePause:g})},x.id))})]})}function Pt({isOpen:t,onClose:s,onSave:a,editData:n=null}){const[r,i]=m.useState({name:"",cost:"",billingDay:1,billingCycle:"monthly",category:"OTT",url:"",customColor:"",notes:"",trialEndDate:""}),[d,g]=m.useState({}),[b,o]=m.useState(!0);m.useEffect(()=>{n?(i({name:n.name||"",cost:n.cost||"",billingDay:n.billingDay||1,billingCycle:n.billingCycle||"monthly",category:n.category||"OTT",url:n.url||"",customColor:n.customColor||"",notes:n.notes||"",trialEndDate:n.trialEndDate?typeof n.trialEndDate=="object"&&n.trialEndDate.seconds?new Date(n.trialEndDate.seconds*1e3).toISOString().split("T")[0]:new Date(n.trialEndDate).toISOString().split("T")[0]:""}),o(!1)):(i({name:"",cost:"",billingDay:new Date().getDate(),billingCycle:"monthly",category:"OTT",url:"",customColor:"",notes:"",trialEndDate:""}),o(!0)),g({})},[n,t]);const c=l=>{i({...r,name:l.name,category:l.category,url:l.url,customColor:l.color,cost:l.defaultCost||""}),o(!1)},x=()=>{const l={};return r.name.trim()||(l.name="ÏÑúÎπÑÏä§ Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"),(!r.cost||isNaN(r.cost)||Number(r.cost)<0)&&(l.cost="Ïò¨Î∞îÎ•∏ Í∏àÏï°ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"),(!r.billingDay||r.billingDay<1||r.billingDay>31)&&(l.billingDay="1~31 ÏÇ¨Ïù¥Ïùò ÎÇ†ÏßúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"),g(l),Object.keys(l).length===0},u=l=>{if(l.preventDefault(),!x())return;const h={...r,cost:Number(r.cost),billingDay:Number(r.billingDay),trialEndDate:r.trialEndDate?new Date(r.trialEndDate):null};a(h,n==null?void 0:n.id),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-end md:items-center justify-center backdrop-blur-sm modal-backdrop",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-md rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden modal-content max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-gray-50/50 dark:bg-dark-900/50 sticky top-0 z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:n?"Íµ¨ÎèÖ Ï†ïÎ≥¥ ÏàòÏ†ï":"ÏÉà Íµ¨ÎèÖ Ï∂îÍ∞Ä"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx(K,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[!n&&b&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-dark-400 uppercase tracking-wider mb-2 block",children:"Ïù∏Í∏∞ ÏÑúÎπÑÏä§ Í∞ÑÌé∏ Îì±Î°ù"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto scrollbar-hide",children:yt.slice(0,16).map(l=>e.jsxs("button",{type:"button",onClick:()=>c(l),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-gray-200 dark:border-dark-600 hover:border-primary-500 hover:text-primary-600 dark:hover:text-primary-400 bg-white dark:bg-dark-700 text-xs font-medium transition-all duration-200 hover:scale-105 hover:shadow-md active:scale-95",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0 shadow-sm",style:{backgroundColor:l.color,boxShadow:`0 2px 4px ${l.color}40`}}),l.name]},l.name))}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"text-xs text-gray-400 dark:text-dark-500 mt-2 hover:text-primary-500",children:"ÏßÅÏ†ë ÏûÖÎ†•ÌïòÍ∏∞ ‚Üí"})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"ÏÑúÎπÑÏä§ Ïù¥Î¶Ñ *"}),e.jsx("input",{type:"text",placeholder:"Ïòà: ÎÑ∑ÌîåÎ¶≠Ïä§",className:`w-full px-4 py-2.5 rounded-xl border ${d.name?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-dark-500 focus:bg-white dark:focus:bg-dark-600 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all`,value:r.name,onChange:l=>i({...r,name:l.target.value})}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"Í≤∞Ï†ú Í∏àÏï° *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"0",min:"0",className:`w-full pl-4 pr-10 py-2.5 rounded-xl border ${d.cost?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all`,value:r.cost,onChange:l=>i({...r,cost:l.target.value})}),e.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400 dark:text-dark-500 text-sm",children:"Ïõê"})]}),d.cost&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.cost})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"Í≤∞Ï†úÏùº *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"1",max:"31",className:`w-full pl-4 pr-10 py-2.5 rounded-xl border ${d.billingDay?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all`,value:r.billingDay,onChange:l=>i({...r,billingDay:l.target.value})}),e.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400 dark:text-dark-500 text-sm",children:"Ïùº"})]}),d.billingDay&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.billingDay})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"Í≤∞Ï†ú Ï£ºÍ∏∞"}),e.jsx("div",{className:"flex gap-2",children:Object.entries(kt).map(([l,{label:h}])=>e.jsx("button",{type:"button",onClick:()=>i({...r,billingCycle:l}),className:`flex-1 py-2 rounded-xl text-xs font-bold transition-all ${r.billingCycle===l?"bg-primary-500 text-white shadow-md":"bg-gray-100 dark:bg-dark-700 text-gray-500 dark:text-dark-400 hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:h},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"ÏõπÏÇ¨Ïù¥Ìä∏ ÎßÅÌÅ¨ (ÏÑ†ÌÉù)"}),e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-2.5 text-gray-400 dark:text-dark-500",size:16}),e.jsx("input",{type:"url",placeholder:"https://...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm",value:r.url,onChange:l=>i({...r,url:l.target.value})})]}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-1 pl-1",children:"ÏûÖÎ†•Ïãú Î¶¨Ïä§Ìä∏ÏóêÏÑú Î∞îÎ°úÍ∞ÄÍ∏∞ Î≤ÑÌäºÏù¥ ÏÉùÏÑ±Îê©ÎãàÎã§."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5 flex items-center gap-1",children:["Î¨¥Î£å Ï≤¥Ìóò Ï¢ÖÎ£åÏùº (ÏÑ†ÌÉù)",e.jsx(Ke,{size:12,className:"text-gray-400"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-2.5 text-gray-400 dark:text-dark-500",size:16}),e.jsx("input",{type:"date",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm",value:r.trialEndDate,onChange:l=>i({...r,trialEndDate:l.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:Object.keys(N).map(l=>e.jsxs("button",{type:"button",onClick:()=>i({...r,category:l}),className:`px-3.5 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-all duration-200 flex items-center gap-1.5 ${r.category===l?"bg-gray-800 dark:bg-white text-white dark:text-gray-900 shadow-lg transform scale-105":"bg-gray-100 dark:bg-dark-700 text-gray-500 dark:text-dark-400 hover:bg-gray-200 dark:hover:bg-dark-600 hover:scale-102"}`,children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full transition-transform",style:{backgroundColor:N[l],boxShadow:r.category===l?`0 0 6px ${N[l]}`:"none"}}),R[l]||l]},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"Î©îÎ™® (ÏÑ†ÌÉù)"}),e.jsx("textarea",{placeholder:"Í≥µÏú† Í≥ÑÏ†ï, ÏöîÍ∏àÏ†ú Îì± Î©îÎ™®...",rows:2,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm resize-none",value:r.notes,onChange:l=>i({...r,notes:l.target.value})})]}),e.jsxs("button",{type:"submit",className:"w-full py-3.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold text-base transform active:scale-[0.98] transition-all shadow-lg shadow-primary-500/30 mt-2 flex items-center justify-center gap-2 btn-press",children:[e.jsx(ye,{size:20}),n?"ÏàòÏ†ï ÏôÑÎ£å":"Îì±Î°ùÌïòÍ∏∞"]})]})]})]})}):null}const It=t=>{const s=["ÏÑúÎπÑÏä§Î™Ö","Ïõî Í≤∞Ï†úÍ∏àÏï°","Í≤∞Ï†úÏùº","Ïπ¥ÌÖåÍ≥†Î¶¨","Í≤∞Ï†úÏ£ºÍ∏∞","URL","ÏùºÏãúÏ†ïÏßÄ","Î©îÎ™®","ÏÉùÏÑ±Ïùº"],a=t.map(r=>[r.name,r.cost,r.billingDay,r.category,r.billingCycle||"monthly",r.url||"",r.isPaused?"Ïòà":"ÏïÑÎãàÏò§",r.notes||"",r.createdAt||""]);return[s.join(","),...a.map(r=>r.map(i=>typeof i=="string"&&i.includes(",")?`"${i}"`:i).join(","))].join(`
`)},Ot=t=>{const s={version:"1.0",exportedAt:new Date().toISOString(),subscriptions:t.map(a=>({name:a.name,cost:a.cost,billingDay:a.billingDay,category:a.category,billingCycle:a.billingCycle||"monthly",url:a.url||"",customColor:a.customColor||"",isPaused:a.isPaused||!1,notes:a.notes||""}))};return JSON.stringify(s,null,2)},Tt=t=>{var n,r,i,d,g,b;const s=t.trim().split(`
`);if(s.length<2)return[];const a=[];for(let o=1;o<s.length;o++){const c=At(s[o]);c.length>=4&&a.push({name:((n=c[0])==null?void 0:n.trim())||"",cost:parseInt(c[1])||0,billingDay:parseInt(c[2])||1,category:((r=c[3])==null?void 0:r.trim())||"Etc",billingCycle:((i=c[4])==null?void 0:i.trim())||"monthly",url:((d=c[5])==null?void 0:d.trim())||"",isPaused:((g=c[6])==null?void 0:g.trim())==="Ïòà",notes:((b=c[7])==null?void 0:b.trim())||""})}return a},At=t=>{const s=[];let a="",n=!1;for(let r=0;r<t.length;r++){const i=t[r];i==='"'?n=!n:i===","&&!n?(s.push(a),a=""):a+=i}return s.push(a),s},Lt=t=>{try{const s=JSON.parse(t);return s.subscriptions&&Array.isArray(s.subscriptions)?s.subscriptions.map(a=>({name:a.name||"",cost:parseInt(a.cost)||0,billingDay:parseInt(a.billingDay)||1,category:a.category||"Etc",billingCycle:a.billingCycle||"monthly",url:a.url||"",customColor:a.customColor||"",isPaused:a.isPaused||!1,notes:a.notes||""})):[]}catch(s){return console.error("JSON parsing error:",s),[]}},ce=(t,s,a)=>{const n=new Blob([t],{type:a}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},Ft=t=>new Promise((s,a)=>{const n=new FileReader;n.onload=r=>s(r.target.result),n.onerror=r=>a(r),n.readAsText(t)});function $t({isOpen:t,onClose:s,subscriptions:a,onImport:n,onClearAll:r}){const{isDark:i,toggleTheme:d}=Ce(),[g,b]=m.useState(!1),[o,c]=m.useState(null),[x,u]=m.useState(!1),[l,h]=m.useState("default"),p=m.useRef(null);m.useEffect(()=>{if(F()){h(W());const v=ee();u(v.enabled&&W()==="granted")}},[t]);const y=()=>{const v=It(a),D=`subscriptions_${new Date().toISOString().split("T")[0]}.csv`;ce(v,D,"text/csv;charset=utf-8")},w=()=>{const v=Ot(a),D=`subscriptions_${new Date().toISOString().split("T")[0]}.json`;ce(v,D,"application/json")},S=async v=>{var $;const D=($=v.target.files)==null?void 0:$[0];if(D){try{const O=await Ft(D);let T=[];if(D.name.endsWith(".json")?T=Lt(O):D.name.endsWith(".csv")&&(T=Tt(O)),T.length>0){const z=await n(T);c({success:!0,count:z}),setTimeout(()=>c(null),3e3)}else c({success:!1,message:"Ïú†Ìö®Ìïú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§"}),setTimeout(()=>c(null),3e3)}catch(O){console.error("Import error:",O),c({success:!1,message:"ÌååÏùºÏùÑ ÏùΩÎäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§"}),setTimeout(()=>c(null),3e3)}p.current&&(p.current.value="")}},C=async()=>{await r(),b(!1),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-end md:items-center justify-center backdrop-blur-sm modal-backdrop",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-md rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden modal-content max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-gray-50/50 dark:bg-dark-900/50 sticky top-0 z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"ÏÑ§Ï†ï"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx(K,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Îã§ÌÅ¨ Î™®Îìú"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mt-0.5",children:"Ïñ¥ÎëêÏö¥ ÌÖåÎßàÎ°ú Ï†ÑÌôòÌï©ÎãàÎã§"})]}),e.jsx("button",{onClick:d,className:`relative w-14 h-7 rounded-full transition-colors ${i?"bg-primary-500":"bg-gray-200 dark:bg-dark-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-6 h-6 rounded-full bg-white shadow-md transition-transform flex items-center justify-center ${i?"translate-x-7":"translate-x-0.5"}`,children:i?e.jsx(ue,{size:12,className:"text-primary-500"}):e.jsx(me,{size:12,className:"text-amber-500"})})})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-800 dark:text-white text-sm flex items-center gap-2",children:[x?e.jsx(ne,{size:16,className:"text-primary-500"}):e.jsx(oe,{size:16,className:"text-gray-400"}),"Í≤∞Ï†úÏùº ÏïåÎ¶º"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mt-0.5",children:F()?l==="denied"?"ÏïåÎ¶º Í∂åÌïúÏù¥ Í±∞Î∂ÄÎêòÏóàÏäµÎãàÎã§. Î∏åÎùºÏö∞Ï†Ä ÏÑ§Ï†ïÏóêÏÑú ÌóàÏö©Ìï¥Ï£ºÏÑ∏Ïöî.":"Í≤∞Ï†ú ÏòàÏ†ïÏùº 3Ïùº, 1Ïùº Ï†ÑÏóê ÏïåÎ¶º":"Ïù¥ Î∏åÎùºÏö∞Ï†ÄÎäî ÏïåÎ¶ºÏùÑ ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§"})]}),e.jsx("button",{onClick:async()=>{if(x)bt(),u(!1);else{const v=await pt();u(v),h(W())}},disabled:!F()||l==="denied",className:`relative w-14 h-7 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${x?"bg-primary-500":"bg-gray-200 dark:bg-dark-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-6 h-6 rounded-full bg-white shadow-md transition-transform flex items-center justify-center ${x?"translate-x-7":"translate-x-0.5"}`,children:x?e.jsx(ne,{size:12,className:"text-primary-500"}):e.jsx(oe,{size:12,className:"text-gray-400"})})})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:y,disabled:a.length===0,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Qe,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"CSV"})]}),e.jsxs("button",{onClick:w,disabled:a.length===0,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ze,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"JSON"})]})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-2",children:[a.length,"Í∞úÏùò Íµ¨ÎèÖ Îç∞Ïù¥ÌÑ∞Î•º ÎÇ¥Î≥¥ÎÉÖÎãàÎã§"]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞"}),e.jsx("input",{ref:p,type:"file",accept:".csv,.json",onChange:S,className:"hidden",id:"import-file"}),e.jsxs("label",{htmlFor:"import-file",className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border-2 border-dashed border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700/50 text-gray-600 dark:text-dark-400 hover:border-primary-400 hover:text-primary-600 dark:hover:text-primary-400 cursor-pointer transition-colors",children:[e.jsx(et,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"CSV ÎòêÎäî JSON ÌååÏùº ÏÑ†ÌÉù"})]}),o&&e.jsxs("div",{className:`mt-2 p-2 rounded-lg text-xs flex items-center gap-2 ${o.success?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400"}`,children:[o.success?e.jsx(ye,{size:14}):e.jsx(H,{size:14}),o.success?`${o.count}Í∞úÏùò Íµ¨ÎèÖÏùÑ Í∞ÄÏ†∏ÏôîÏäµÎãàÎã§`:o.message]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"ÏúÑÌóò Íµ¨Ïó≠"}),g?e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-3",children:[e.jsx(H,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:"Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?"})]}),e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400/80 mb-3",children:"Î™®Îì† Íµ¨ÎèÖ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏòÅÍµ¨Ï†ÅÏúºÎ°ú ÏÇ≠Ï†úÎê©ÎãàÎã§. Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-2 px-4 rounded-lg bg-white dark:bg-dark-700 text-gray-600 dark:text-dark-300 text-sm font-medium hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:"Ï∑®ÏÜå"}),e.jsx("button",{onClick:C,className:"flex-1 py-2 px-4 rounded-lg bg-red-500 text-white text-sm font-medium hover:bg-red-600 transition-colors",children:"ÏÇ≠Ï†ú"})]})]}):e.jsxs("button",{onClick:()=>b(!0),disabled:a.length===0,className:"w-full flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(be,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú"})]})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"Íµ¨ÎèÖ Îß§ÎãàÏ†Ä Pro v1.0.0"})})]})]})}):null}function Ut({onSignUp:t}){const s=ke(),[a,n]=m.useState(null),[r,i]=m.useState(!1);if(m.useEffect(()=>{const g=()=>{const o=we();n(o)};g();const b=setInterval(g,6e4);return()=>clearInterval(b)},[]),!a||r)return null;const d=a.remainingMinutes<=5;return e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 ${d?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gradient-to-r from-amber-500 to-orange-500"} text-white py-2 px-4 shadow-lg`,children:e.jsxs("div",{className:"max-w-lg mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(he,{size:16,className:"animate-pulse"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Ï≤¥Ìóò Î™®Îìú"})," - ",a.remainingMinutes,"Î∂Ñ ÌõÑ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÇ¨ÎùºÏßëÎãàÎã§"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>s("/login"),className:"flex items-center gap-1 px-3 py-1 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-medium transition-colors",children:[e.jsx(tt,{size:14}),"Í∞ÄÏûÖÌïòÍ≥† Ï†ÄÏû•ÌïòÍ∏∞"]}),e.jsx("button",{onClick:()=>i(!0),className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx(K,{size:16})})]})]})})}const Mt=m.lazy(()=>Q(()=>import("./LoginPage-Dqxn3jNS.js"),__vite__mapDeps([0,1,2]),import.meta.url)),Rt=m.lazy(()=>Q(()=>import("./ForgotPasswordPage-Oj9HPfBi.js"),__vite__mapDeps([3,1,2]),import.meta.url)),zt=m.lazy(()=>Q(()=>import("./ProfilePage-9ilLQhKR.js"),__vite__mapDeps([4,1,2]),import.meta.url));function _t(){return e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsx("div",{className:"flex flex-col items-center gap-4",children:e.jsx("div",{className:"w-12 h-12 spinner"})})})}function Bt(){const{user:t,isDemo:s,isAuthenticated:a}=Z(),n=xt(s?null:t),[r,i]=m.useState([]);m.useEffect(()=>{s&&i(E())},[s]);const d=s?r:n.subscriptions,g=s?!1:n.loading,b=m.useCallback(async f=>{if(s){const k=J({...f,id:`demo-${Date.now()}`});return i(E()),k.id}return n.addSubscription(f)},[s,n]),o=m.useCallback(async(f,k)=>{if(s){const U=E().find($e=>$e.id===f);U&&(J({...U,...k}),i(E()));return}return n.updateSubscription(f,k)},[s,n]),c=m.useCallback(async f=>{if(s){dt(f),i(E());return}return n.deleteSubscription(f)},[s,n]),x=m.useCallback(async f=>{if(s){const L=E().find(U=>U.id===f);L&&(J({...L,isPaused:!L.isPaused}),i(E()));return}return n.togglePause(f)},[s,n]),[u,l]=m.useState(!1),[h,p]=m.useState(!1),[y,w]=m.useState(null),[S,C]=m.useState(null),[v,D]=m.useState(""),[$,O]=m.useState(null),[T,z]=m.useState("daysLeft"),[re,Ee]=m.useState(!0),P=m.useMemo(()=>d.map(f=>({...f,daysLeft:mt(f.billingDay)})),[d]),_=m.useMemo(()=>d.filter(f=>!f.isPaused).reduce((f,k)=>f+(k.cost||0),0),[d]),se=_*12,Pe=m.useMemo(()=>{const f={};return d.filter(k=>!k.isPaused).forEach(k=>{f[k.category]||(f[k.category]={count:0,total:0}),f[k.category].count+=1,f[k.category].total+=k.cost}),f},[d]),Ie=m.useMemo(()=>P.filter(f=>!f.isPaused&&f.daysLeft<=3).sort((f,k)=>f.daysLeft-k.daysLeft),[P]),A=m.useCallback((f,k="success")=>{C({message:f,type:k}),setTimeout(()=>C(null),3e3)},[]);m.useEffect(()=>{P.length>0&&ht(P)},[P]);const B=m.useCallback((f=null)=>{w(f),l(!0)},[]),Oe=m.useCallback(()=>{l(!1),w(null)},[]),Te=m.useCallback(async(f,k)=>{try{k?(await o(k,f),A("Íµ¨ÎèÖÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§")):(await b(f),A("ÏÉà Íµ¨ÎèÖÏù¥ Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§"))}catch(L){A("Ï†ÄÏû• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§","error"),console.error(L)}},[b,o,A]),Ae=m.useCallback(async f=>{if(confirm("Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?"))try{await c(f),A("Íµ¨ÎèÖÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")}catch(k){A("ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§","error"),console.error(k)}},[c,A]),Le=m.useCallback(f=>{O(k=>k===f?null:f)},[]),Fe=d.filter(f=>!f.isPaused).length;return g?e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 spinner"}),e.jsx("p",{className:"text-gray-500 dark:text-dark-400 text-sm",children:"Î°úÎî© Ï§ë..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900 text-gray-800 dark:text-white font-sans pb-24 md:pb-10 transition-colors",children:[s&&e.jsx(Ut,{}),e.jsx(ft,{subscriptionCount:Fe,onOpenSettings:()=>p(!0)}),e.jsxs("main",{className:`max-w-lg mx-auto px-4 py-6 space-y-6 ${s?"pt-16":""}`,children:[e.jsx(vt,{totalMonthlyCost:_,totalYearlyCost:se,subscriptions:P}),e.jsx(Nt,{items:Ie}),e.jsx(Ct,{subscriptions:P,totalMonthlyCost:_,totalYearlyCost:se,categoryBreakdown:Pe,onCategoryClick:Le}),d.length>0&&e.jsx(Dt,{searchQuery:v,onSearchChange:D,selectedCategory:$,onCategoryChange:O,sortBy:T,onSortChange:z,showPaused:re,onShowPausedChange:Ee}),e.jsx(Et,{subscriptions:P,searchQuery:v,selectedCategory:$,sortBy:T,showPaused:re,onEdit:B,onDelete:Ae,onTogglePause:x,onAddNew:()=>B()})]}),e.jsx("button",{onClick:()=>B(),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-xl shadow-primary-500/40 flex items-center justify-center transition-all hover:scale-105 active:scale-95 z-40 fab-pulse","aria-label":"ÏÉà Íµ¨ÎèÖ Ï∂îÍ∞Ä",children:e.jsx(fe,{size:24})}),e.jsx(Pt,{isOpen:u,onClose:Oe,onSave:Te,editData:y}),e.jsx($t,{isOpen:h,onClose:()=>p(!1),subscriptions:d,onImport:s?null:n.importSubscriptions,onClearAll:s?null:n.clearAllSubscriptions}),S&&e.jsx("div",{className:`toast ${S.type==="error"?"bg-red-500 text-white":"bg-gray-900 dark:bg-white text-white dark:text-gray-900"}`,children:S.message})]})}function xe({children:t}){const{isAuthenticated:s,loading:a}=Z();return a?e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsx("div",{className:"w-12 h-12 spinner"})}):s?t:e.jsx(nt,{to:"/login",replace:!0})}function Jt(){return e.jsx(Se,{children:e.jsx(ct,{children:e.jsx(st,{children:e.jsx(m.Suspense,{fallback:e.jsx(_t,{}),children:e.jsxs(at,{children:[e.jsx(M,{path:"/login",element:e.jsx(Mt,{})}),e.jsx(M,{path:"/forgot-password",element:e.jsx(Rt,{})}),e.jsx(M,{path:"/profile",element:e.jsx(xe,{children:e.jsx(zt,{})})}),e.jsx(M,{path:"/",element:e.jsx(xe,{children:e.jsx(Bt,{})})})]})})})})})}G.createRoot(document.getElementById("root")).render(e.jsx(ot.StrictMode,{children:e.jsx(Se,{children:e.jsx(Jt,{})})}));export{j as l,Z as u};
