import{R as N,N as k,p as w,D as b,d as M,T as R,g as E,j as e,Y as $}from"./vendor-ui-B6CU6qF1.js";import{R as D,r as S}from"./vendor-react-DtEkOSI3.js";import{C as y}from"./index-XBRr7Ttx.js";const H=D.memo(function({subscriptions:o,budget:p=0,monthlyIncome:f=0}){const a=S.useMemo(()=>{const r=o.filter(t=>!t.isPaused),i=r.reduce((t,n)=>t+n.cost,0);let s=100;const c=[],h=[],m={};r.forEach(t=>{m[t.category]=(m[t.category]||0)+1});let u=0;if(Object.entries(m).forEach(([t,n])=>{n>=3?(u+=10,c.push({icon:N,text:`${y[t]||t} ì¹´í…Œê³ ë¦¬ ${n}ê°œ ì¤‘ë³µ`,points:-10})):n>=2&&(u+=5,c.push({icon:N,text:`${y[t]||t} ì¹´í…Œê³ ë¦¬ ${n}ê°œ`,points:-5}))}),s-=Math.min(u,30),(o.length>0?o.filter(t=>t.isPaused).length/o.length:0)>.3&&(h.push({icon:k,text:"ì ê·¹ì ì¸ êµ¬ë… ê´€ë¦¬ ì¤‘",points:5}),s+=5),p>0){const t=i/p;if(t>1.2){const n=Math.min(20,Math.floor((t-1)*20));s-=n,c.push({icon:w,text:`ì˜ˆì‚° ${Math.round(t*100)}% ì´ˆê³¼`,points:-n})}else t<=.8&&(h.push({icon:b,text:"ì˜ˆì‚° ë‚´ ì ì • ì§€ì¶œ",points:5}),s+=5)}if(f>0){const t=i/f;if(t>.15){const n=Math.min(15,Math.floor((t-.1)*100));s-=n,c.push({icon:M,text:`ìˆ˜ì…ì˜ ${Math.round(t*100)}% êµ¬ë… ì§€ì¶œ`,points:-n})}else t<=.1&&(h.push({icon:R,text:"ìˆ˜ì… ëŒ€ë¹„ ì ì • êµ¬ë…",points:5}),s+=5)}const C=r.filter(t=>t.cost>=2e4),j=r.length>0?C.length/r.length:0;j>.5&&(s-=10,c.push({icon:b,text:`ê³ ê°€ êµ¬ë…ì´ ${Math.round(j*100)}%`,points:-10})),Object.keys(m).length>=4&&(h.push({icon:E,text:"ë‹¤ì–‘í•œ ì¹´í…Œê³ ë¦¬ í™œìš©",points:5}),s+=5),s=Math.max(0,Math.min(100,s));let l,d,x;return s>=90?(l="Excellent",d="text-emerald-500",x="ğŸŒŸ"):s>=75?(l="Good",d="text-green-500",x="ğŸ‘"):s>=60?(l="Fair",d="text-yellow-500",x="âš ï¸"):s>=40?(l="Poor",d="text-orange-500",x="ğŸ˜Ÿ"):(l="Critical",d="text-red-500",x="ğŸš¨"),{score:s,grade:l,gradeColor:d,gradeEmoji:x,deductions:c,bonuses:h,totalMonthly:i}},[o,p,f]);if(o.length===0)return null;const g=2*Math.PI*45,v=g-a.score/100*g;return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-rose-50 dark:bg-rose-900/20 text-rose-500",children:e.jsx($,{className:"w-5 h-5"})}),"êµ¬ë… ê±´ê°• ì ìˆ˜"]}),e.jsxs("span",{className:`text-sm font-bold ${a.gradeColor}`,children:[a.gradeEmoji," ",a.grade]})]}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"45",stroke:"currentColor",strokeWidth:"10",fill:"none",className:"text-gray-100 dark:text-dark-700"}),e.jsx("circle",{cx:"64",cy:"64",r:"45",stroke:"url(#scoreGradient)",strokeWidth:"10",fill:"none",strokeLinecap:"round",strokeDasharray:g,strokeDashoffset:v,className:"transition-all duration-1000 ease-out"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"scoreGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:a.score>=60?"#10B981":"#EF4444"}),e.jsx("stop",{offset:"100%",stopColor:a.score>=60?"#34D399":"#F87171"})]})})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.score}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-dark-500",children:"/ 100"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[a.deductions.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-red-500 uppercase tracking-wider",children:"ê°ì  ìš”ì¸"}),a.deductions.map((r,i)=>e.jsxs("div",{className:"flex items-center justify-between bg-red-50 dark:bg-red-900/10 p-2.5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r.icon,{size:14,className:"text-red-500"}),e.jsx("span",{className:"text-xs text-red-700 dark:text-red-400",children:r.text})]}),e.jsx("span",{className:"text-xs font-bold text-red-600",children:r.points})]},i))]}),a.bonuses.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-green-500 uppercase tracking-wider",children:"ê°€ì‚° ìš”ì¸"}),a.bonuses.map((r,i)=>e.jsxs("div",{className:"flex items-center justify-between bg-green-50 dark:bg-green-900/10 p-2.5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r.icon,{size:14,className:"text-green-500"}),e.jsx("span",{className:"text-xs text-green-700 dark:text-green-400",children:r.text})]}),e.jsxs("span",{className:"text-xs font-bold text-green-600",children:["+",r.points]})]},i))]}),a.deductions.length===0&&a.bonuses.length===0&&e.jsxs("div",{className:"text-center py-3",children:[e.jsx(k,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-dark-300",children:"êµ¬ë… ê´€ë¦¬ê°€ ì˜ ë˜ê³  ìˆì–´ìš”!"})]})]})]})});export{H as default};
