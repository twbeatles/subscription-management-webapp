import{j as e,aq as y,I as w,f as v,T as R,d as S,D as C}from"./vendor-ui-B6CU6qF1.js";import{r as o}from"./vendor-react-DtEkOSI3.js";import{b as E,c as m,d as f}from"./index-XBRr7Ttx.js";function z({subscriptions:g}){const{rates:d,lastUpdated:h,loading:x,error:j,fetchRates:k}=E(),[i,b]=o.useState(!1),l=o.useMemo(()=>g.filter(t=>t.currency&&t.currency!=="KRW"&&!t.isPaused),[g]),u=o.useMemo(()=>{const t={};let s=0,r={USD:0,EUR:0,JPY:0};return l.forEach(n=>{const a=n.currency||"USD",c=d[a]||m[a],p=(n.cost||0)*c;s+=p,r[a]=(r[a]||0)+(n.cost||0),t[a]||(t[a]={count:0,total:0,krwTotal:0}),t[a].count++,t[a].total+=n.cost||0,t[a].krwTotal+=p}),{byCategory:t,totalKRW:s,totalOriginal:r}},[l,d]),N=t=>{const s=m[t],r=d[t];return!s||!r?0:((r-s)/s*100).toFixed(1)};return l.length===0?null:e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-50 dark:bg-green-900/20 text-green-500",children:e.jsx(y,{className:"w-5 h-5"})}),"환율 변환"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>k(!0),disabled:x,className:`p-2 rounded-lg transition-all ${x?"bg-gray-100 dark:bg-dark-700 text-gray-400":"bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 text-gray-600 dark:text-dark-300"}`,children:e.jsx(w,{size:16,className:x?"animate-spin":""})})})]}),j&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-xl flex items-center gap-2 text-red-600 dark:text-red-400 text-xs",children:[e.jsx(v,{size:14}),j]}),h&&e.jsxs("p",{className:"text-[10px] text-gray-400 mb-4",children:["마지막 업데이트: ",h.toLocaleString("ko-KR")]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:["USD","EUR","JPY"].map(t=>{var r,n;const s=parseFloat(N(t));return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl text-center",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-dark-400 mb-1",children:[(r=f[t])==null?void 0:r.symbol," 1 ",t]}),e.jsxs("p",{className:"font-bold text-gray-800 dark:text-white",children:["₩",(n=d[t])==null?void 0:n.toLocaleString()]}),s!==0&&e.jsxs("p",{className:`text-[10px] flex items-center justify-center gap-0.5 mt-1 ${s>0?"text-red-500":"text-green-500"}`,children:[s>0?e.jsx(R,{size:10}):e.jsx(S,{size:10}),Math.abs(s),"%"]})]},t)})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600/70 dark:text-green-400/70",children:"해외 구독 총액 (원화 환산)"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:["₩",Math.round(u.totalKRW).toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-white/50 dark:bg-dark-800/50 rounded-xl",children:e.jsx(C,{className:"text-green-500",size:24})})]})}),e.jsx("button",{onClick:()=>b(!i),className:"w-full text-left",children:e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-dark-300",children:["해외 결제 구독 ",l.length,"개"]}),e.jsx("span",{className:"text-xs text-primary-500",children:i?"접기":"펼치기"})]})}),i&&e.jsx("div",{className:"space-y-2 mt-2",children:l.map(t=>{var a,c;const s=t.currency||"USD",r=d[s]||m[s],n=Math.round((t.cost||0)*r);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:t.color||"#6366F1"},children:(a=t.name)==null?void 0:a.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[(c=f[s])==null?void 0:c.symbol,t.cost," ",s]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-800 dark:text-white",children:["₩",n.toLocaleString()]}),e.jsxs("p",{className:"text-[10px] text-gray-400",children:["@",r.toLocaleString()]})]})]},t.id)})})]})}export{z as default};
