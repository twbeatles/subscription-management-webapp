const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LoginPage-Cdwiyth8.js","./vendor-ui-BfBX_U0Y.js","./vendor-react-Cr-SFtWI.js","./ForgotPasswordPage-crhA1oCU.js","./ProfilePage-CwpWWgFS.js"])))=>i.map(i=>d[i]);
import{j as e,C as V,S as nt,M as lt,a as Mt,U as Rt,b as it,L as Tt,X as W,T as K,c as te,d as se,e as ce,f as ke,R as $e,g as It,D as Q,h as fe,i as ze,k as ie,P as Ye,l as J,m as Ne,E as Ue,n as ve,o as At,p as Be,q as le,r as ye,s as ge,t as H,B as pe,u as be,W as xe,F as me,v as Lt,w as Ge,x as dt,y as Me,H as Ft,z as ot,A as _t,G as Re,I as Ot,J as zt,K as Ut,N as Te,O as Xe,Q as Bt,V as Gt,Y as Wt,Z as Jt,_ as Ht,$ as Yt,a0 as Xt,a1 as ct,a2 as Ie,a3 as Vt,a4 as Kt,a5 as qt,a6 as Qt,a7 as Zt,a8 as es,a9 as xt,aa as ts,ab as Ve,ac as mt,ad as gt,ae as ss,af as Ae,ag as rs,ah as as,ai as Ke,aj as ns,ak as ls,al as is,am as ds,an as je,ao as os,ap as cs,aq as xs,ar as ms,as as gs,at as hs,au as us,av as ps}from"./vendor-ui-BfBX_U0Y.js";import{a as bs,r as u,u as ht,H as fs,R as ys,b as ue,N as js,c as ks}from"./vendor-react-Cr-SFtWI.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();var Le={},qe=bs;Le.createRoot=qe.createRoot,Le.hydrateRoot=qe.hydrateRoot;const Ns="modulepreload",vs=function(t,s){return new URL(t,s).href},Qe={},We=function(s,i,r){let a=Promise.resolve();if(i&&i.length>0){const m=document.getElementsByTagName("link"),y=document.querySelector("meta[property=csp-nonce]"),c=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));a=Promise.allSettled(i.map(h=>{if(h=vs(h,r),h in Qe)return;Qe[h]=!0;const d=h.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(!!r)for(let j=m.length-1;j>=0;j--){const x=m[j];if(x.href===h&&(!d||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${g}`))return;const n=document.createElement("link");if(n.rel=d?"stylesheet":Ns,d||(n.as="script"),n.crossOrigin="",n.href=h,c&&n.setAttribute("nonce",c),document.head.appendChild(n),d)return new Promise((j,x)=>{n.addEventListener("load",j),n.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(m){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=m,window.dispatchEvent(y),!y.defaultPrevented)throw m}return a.then(m=>{for(const y of m||[])y.status==="rejected"&&o(y.reason);return s().catch(o)})},F={USERS:"sub_manager_users",CURRENT_USER_ID:"sub_manager_current_user_id",SUBSCRIPTIONS_PREFIX:"sub_manager_data_",SETTINGS_PREFIX:"sub_manager_settings_",GLOBAL_SETTINGS:"sub_manager_global_settings",TAGS_PREFIX:"sub_manager_tags_",PRICE_HISTORY_PREFIX:"sub_manager_price_history_",PAYMENT_METHODS_PREFIX:"sub_manager_payment_methods_",USAGE_RECORDS_PREFIX:"sub_manager_usage_records_",GOALS_PREFIX:"sub_manager_goals_",BADGES_PREFIX:"sub_manager_badges_",CHALLENGES_PREFIX:"sub_manager_challenges_",SECURITY_PREFIX:"sub_manager_security_",CURRENCY_RATES:"sub_manager_currency_rates",REPORTS_PREFIX:"sub_manager_reports_",USER_STATS_PREFIX:"sub_manager_user_stats_"},w={getUsers:()=>{try{const t=localStorage.getItem(F.USERS);return t?JSON.parse(t):[]}catch(t){return console.error("Error reading users from local storage",t),[]}},saveUsers:t=>{localStorage.setItem(F.USERS,JSON.stringify(t))},createUser:t=>{const s=w.getUsers(),i={id:`user_${Date.now()}`,displayName:t,createdAt:new Date().toISOString(),isAdmin:!1};return s.push(i),w.saveUsers(s),i},updateUser:(t,s)=>{const i=w.getUsers(),r=i.findIndex(a=>a.id===t);return r!==-1?(i[r]={...i[r],...s},w.saveUsers(i),i[r]):null},deleteUser:t=>{const i=w.getUsers().filter(r=>r.id!==t);w.saveUsers(i),localStorage.removeItem(`${F.SUBSCRIPTIONS_PREFIX}${t}`),localStorage.removeItem(`${F.SETTINGS_PREFIX}${t}`),localStorage.removeItem(`${F.TAGS_PREFIX}${t}`),localStorage.removeItem(`${F.PRICE_HISTORY_PREFIX}${t}`)},getCurrentUserId:()=>localStorage.getItem(F.CURRENT_USER_ID),login:t=>{localStorage.setItem(F.CURRENT_USER_ID,t)},logout:()=>{localStorage.removeItem(F.CURRENT_USER_ID)},getSubscriptions:t=>{if(!t)return[];try{const s=localStorage.getItem(`${F.SUBSCRIPTIONS_PREFIX}${t}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error reading subscriptions",s),[]}},saveSubscriptions:(t,s)=>{t&&localStorage.setItem(`${F.SUBSCRIPTIONS_PREFIX}${t}`,JSON.stringify(s))},getUserSettings:t=>{if(!t)return{budget:0,monthlyIncome:0,autoTheme:!1,priceAlertEnabled:!0};try{const s=localStorage.getItem(`${F.SETTINGS_PREFIX}${t}`),i={budget:0,monthlyIncome:0,autoTheme:!1,priceAlertEnabled:!0};return s?{...i,...JSON.parse(s)}:i}catch(s){return console.error("Error reading user settings",s),{budget:0,monthlyIncome:0,autoTheme:!1,priceAlertEnabled:!0}}},saveUserSettings:(t,s)=>{t&&localStorage.setItem(`${F.SETTINGS_PREFIX}${t}`,JSON.stringify(s))},getTags:t=>{if(!t)return[];try{const s=localStorage.getItem(`${F.TAGS_PREFIX}${t}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error reading tags",s),[]}},saveTags:(t,s)=>{t&&localStorage.setItem(`${F.TAGS_PREFIX}${t}`,JSON.stringify(s))},addTag:(t,s)=>{const i=w.getTags(t);return i.find(r=>r.name===s.name)||(i.push(s),w.saveTags(t,i)),i},deleteTag:(t,s)=>{const i=w.getTags(t).filter(r=>r.name!==s);return w.saveTags(t,i),i},getPriceHistory:t=>{if(!t)return{};try{const s=localStorage.getItem(`${F.PRICE_HISTORY_PREFIX}${t}`);return s?JSON.parse(s):{}}catch(s){return console.error("Error reading price history",s),{}}},savePriceHistory:(t,s)=>{t&&localStorage.setItem(`${F.PRICE_HISTORY_PREFIX}${t}`,JSON.stringify(s))},addPriceRecord:(t,s,i)=>{const r=w.getPriceHistory(t);return r[s]||(r[s]=[]),r[s].push({price:i,date:new Date().toISOString()}),w.savePriceHistory(t,r),r[s]},getSubscriptionPriceHistory:(t,s)=>w.getPriceHistory(t)[s]||[],getPaymentMethods:t=>{if(!t)return[];try{const s=localStorage.getItem(`${F.PAYMENT_METHODS_PREFIX}${t}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error reading payment methods",s),[]}},savePaymentMethods:(t,s)=>{t&&localStorage.setItem(`${F.PAYMENT_METHODS_PREFIX}${t}`,JSON.stringify(s))},addPaymentMethod:(t,s)=>{const i=w.getPaymentMethods(t),r={...s,id:`pm_${Date.now()}`,createdAt:new Date().toISOString()};return i.push(r),w.savePaymentMethods(t,i),r},updatePaymentMethod:(t,s,i)=>{const r=w.getPaymentMethods(t),a=r.findIndex(o=>o.id===s);return a!==-1?(r[a]={...r[a],...i},w.savePaymentMethods(t,r),r[a]):null},deletePaymentMethod:(t,s)=>{const i=w.getPaymentMethods(t).filter(r=>r.id!==s);return w.savePaymentMethods(t,i),i},getUsageRecords:t=>{if(!t)return{};try{const s=localStorage.getItem(`${F.USAGE_RECORDS_PREFIX}${t}`);return s?JSON.parse(s):{}}catch(s){return console.error("Error reading usage records",s),{}}},saveUsageRecords:(t,s)=>{t&&localStorage.setItem(`${F.USAGE_RECORDS_PREFIX}${t}`,JSON.stringify(s))},recordUsage:(t,s,i=new Date().toISOString().split("T")[0])=>{const r=w.getUsageRecords(t);return r[s]||(r[s]=[]),r[s].includes(i)||r[s].push(i),w.saveUsageRecords(t,r),r[s]},getSubscriptionUsageRecords:(t,s)=>w.getUsageRecords(t)[s]||[],getGoals:t=>{if(!t)return[];try{const s=localStorage.getItem(`${F.GOALS_PREFIX}${t}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error reading goals",s),[]}},saveGoals:(t,s)=>{t&&localStorage.setItem(`${F.GOALS_PREFIX}${t}`,JSON.stringify(s))},addGoal:(t,s)=>{const i=w.getGoals(t),r={...s,id:`goal_${Date.now()}`,createdAt:new Date().toISOString(),progress:0,completed:!1};return i.push(r),w.saveGoals(t,i),r},updateGoal:(t,s,i)=>{const r=w.getGoals(t),a=r.findIndex(o=>o.id===s);return a!==-1?(r[a]={...r[a],...i},w.saveGoals(t,r),r[a]):null},deleteGoal:(t,s)=>{const i=w.getGoals(t).filter(r=>r.id!==s);return w.saveGoals(t,i),i},getBadges:t=>{if(!t)return[];try{const s=localStorage.getItem(`${F.BADGES_PREFIX}${t}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error reading badges",s),[]}},saveBadges:(t,s)=>{t&&localStorage.setItem(`${F.BADGES_PREFIX}${t}`,JSON.stringify(s))},addBadge:(t,s)=>{const i=w.getBadges(t);return i.find(r=>r.id===s)||(i.push({id:s,earnedAt:new Date().toISOString()}),w.saveBadges(t,i)),i},getChallenges:t=>{if(!t)return[];try{const s=localStorage.getItem(`${F.CHALLENGES_PREFIX}${t}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error reading challenges",s),[]}},saveChallenges:(t,s)=>{t&&localStorage.setItem(`${F.CHALLENGES_PREFIX}${t}`,JSON.stringify(s))},startChallenge:(t,s)=>{const i=w.getChallenges(t);return i.find(a=>a.challengeId===s&&!a.completed)||(i.push({id:`ch_${Date.now()}`,challengeId:s,startedAt:new Date().toISOString(),progress:0,completed:!1}),w.saveChallenges(t,i)),i},updateChallengeProgress:(t,s,i,r=!1)=>{const a=w.getChallenges(t),o=a.findIndex(m=>m.id===s);return o!==-1&&(a[o].progress=i,a[o].completed=r,r&&(a[o].completedAt=new Date().toISOString()),w.saveChallenges(t,a)),a},getSecuritySettings:t=>{if(!t)return{pinEnabled:!1,pin:null,autoLockMinutes:5,dataEncrypted:!1};try{const s=localStorage.getItem(`${F.SECURITY_PREFIX}${t}`),i={pinEnabled:!1,pin:null,autoLockMinutes:5,dataEncrypted:!1};return s?{...i,...JSON.parse(s)}:i}catch(s){return console.error("Error reading security settings",s),{pinEnabled:!1,pin:null,autoLockMinutes:5,dataEncrypted:!1}}},saveSecuritySettings:(t,s)=>{t&&localStorage.setItem(`${F.SECURITY_PREFIX}${t}`,JSON.stringify(s))},getCurrencyRates:()=>{try{const t=localStorage.getItem(F.CURRENCY_RATES);if(!t)return null;const s=JSON.parse(t),i=new Date(s.updatedAt).getTime();return Date.now()-i>24*60*60*1e3?null:s}catch(t){return console.error("Error reading currency rates",t),null}},saveCurrencyRates:t=>{localStorage.setItem(F.CURRENCY_RATES,JSON.stringify({rates:t,updatedAt:new Date().toISOString()}))},getReportHistory:t=>{if(!t)return[];try{const s=localStorage.getItem(`${F.REPORTS_PREFIX}${t}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error reading report history",s),[]}},saveReportSnapshot:(t,s)=>{if(!t)return;const i=w.getReportHistory(t);i.push({...s,id:`report_${Date.now()}`,createdAt:new Date().toISOString()});const r=i.slice(-12);localStorage.setItem(`${F.REPORTS_PREFIX}${t}`,JSON.stringify(r))},getUserStats:t=>{if(!t)return{totalSubscriptions:0,activeSubscriptions:0,totalSaved:0,consecutiveCheckDays:0,featuresUsed:0,monthsUnderBudget:0,preventedAutoRenewals:0,linkedPaymentMethods:0,lastCheckDate:null};try{const s=localStorage.getItem(`${F.USER_STATS_PREFIX}${t}`),i={totalSubscriptions:0,activeSubscriptions:0,totalSaved:0,consecutiveCheckDays:0,featuresUsed:0,monthsUnderBudget:0,preventedAutoRenewals:0,linkedPaymentMethods:0,lastCheckDate:null};return s?{...i,...JSON.parse(s)}:i}catch(s){return console.error("Error reading user stats",s),{totalSubscriptions:0,activeSubscriptions:0,totalSaved:0,consecutiveCheckDays:0,featuresUsed:0,monthsUnderBudget:0,preventedAutoRenewals:0,linkedPaymentMethods:0,lastCheckDate:null}}},saveUserStats:(t,s)=>{t&&localStorage.setItem(`${F.USER_STATS_PREFIX}${t}`,JSON.stringify(s))},updateUserStats:(t,s)=>{const r={...w.getUserStats(t),...s};return w.saveUserStats(t,r),r}},Fe=[{id:"demo-1",name:"Netflix",cost:17e3,billingDay:15,billingCycle:"monthly",category:"OTT",url:"https://www.netflix.com",customColor:"#E50914",isPaused:!1,notes:"ÌîÑÎ¶¨ÎØ∏ÏóÑ ÏöîÍ∏àÏ†ú"},{id:"demo-2",name:"Spotify",cost:10900,billingDay:20,billingCycle:"monthly",category:"Music",url:"https://www.spotify.com",customColor:"#1DB954",isPaused:!1,notes:""},{id:"demo-3",name:"YouTube Premium",cost:14900,billingDay:5,billingCycle:"monthly",category:"OTT",url:"https://www.youtube.com",customColor:"#FF0000",isPaused:!1,notes:"Í∞ÄÏ°± ÏöîÍ∏àÏ†ú"},{id:"demo-4",name:"ChatGPT Plus",cost:28600,billingDay:10,billingCycle:"monthly",category:"Work",url:"https://chat.openai.com",customColor:"#10A37F",isPaused:!1,notes:"GPT-4 ÏÇ¨Ïö©"},{id:"demo-5",name:"Coupang Wow",cost:7890,billingDay:1,billingCycle:"monthly",category:"Shopping",url:"https://www.coupang.com",customColor:"#342971",isPaused:!1,notes:"Î°úÏºìÎ∞∞ÏÜ° Î¨¥Î£å"},{id:"demo-6",name:"iCloud+",cost:1100,billingDay:25,billingCycle:"monthly",category:"Utility",url:"https://www.icloud.com",customColor:"#3478F6",isPaused:!0,notes:"50GB Ï†ÄÏû•Í≥µÍ∞Ñ"},{id:"demo-7",name:"Notion",cost:1e4,billingDay:12,billingCycle:"monthly",category:"Work",url:"https://www.notion.so",customColor:"#000000",isPaused:!1,notes:"Plus ÏöîÍ∏àÏ†ú"},{id:"demo-8",name:"Î∞ÄÎ¶¨Ïùò ÏÑúÏû¨",cost:9900,billingDay:18,billingCycle:"monthly",category:"Education",url:"https://www.millie.co.kr",customColor:"#FFD700",isPaused:!1,notes:""}];function q(){const t=localStorage.getItem("demoSubscriptions");return t?JSON.parse(t):(localStorage.setItem("demoSubscriptions",JSON.stringify(Fe)),Fe)}function we(t){const s=q(),i=s.findIndex(r=>r.id===t.id);return i>=0?s[i]=t:(t.id=`demo-${Date.now()}`,s.push(t)),localStorage.setItem("demoSubscriptions",JSON.stringify(s)),t}function ws(t){const i=q().filter(r=>r.id!==t);localStorage.setItem("demoSubscriptions",JSON.stringify(i))}function ut(){localStorage.removeItem("demoMode"),localStorage.removeItem("demoSubscriptions")}function pt(){const t=localStorage.getItem("demoMode");if(!t)return null;const s=JSON.parse(t),i=new Date(s.expiresAt),r=new Date;if(i<=r)return ut(),null;const a=i-r,o=Math.ceil(a/(1e3*60));return{...s,remainingMinutes:o,isExpired:!1}}const bt=u.createContext();function Ss({children:t}){const[s,i]=u.useState(null),[r,a]=u.useState(!1),[o,m]=u.useState(!0);u.useEffect(()=>{(()=>{if(pt()){a(!0),m(!1);return}const S=w.getCurrentUserId();if(S){const N=w.getUsers().find(b=>b.id===S);N?i(N):w.logout()}m(!1)})()},[]);const y=async x=>{const S=w.getUsers().find(p=>p.id===x);if(!S)throw new Error("User not found");return w.login(x),i(S),a(!1),S},c=async x=>{const v=w.createUser(x);return await y(v.id),v},h=()=>{const x=new Date;x.setMinutes(x.getMinutes()+30),localStorage.setItem("demoMode",JSON.stringify({startedAt:new Date().toISOString(),expiresAt:x.toISOString()})),localStorage.setItem("demoSubscriptions",JSON.stringify(Fe)),a(!0),i(null)},d=()=>{ut(),a(!1)},g=async x=>{if(!s)return;const v=w.updateUser(s.id,x);i(v)},l=async()=>{r?d():(w.logout(),i(null))},n=async()=>{s&&(w.deleteUser(s.id),await l())},j={user:s,userProfile:s,loading:o,isDemo:r,isAuthenticated:!!s||r,isAdmin:(s==null?void 0:s.isAdmin)||!1,login:y,register:c,updateProfile:g,updateUserProfile:g,logout:l,deleteAccount:n,startDemoMode:h,endDemoMode:d,signOut:l};return e.jsx(bt.Provider,{value:j,children:t})}function Z(){const t=u.useContext(bt);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const ft=u.createContext();function yt({children:t}){const[s,i]=u.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("theme");return a?a==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});u.useEffect(()=>{const a=document.documentElement;s?(a.classList.add("dark"),localStorage.setItem("theme","dark")):(a.classList.remove("dark"),localStorage.setItem("theme","light"))},[s]);const r=()=>i(a=>!a);return e.jsx(ft.Provider,{value:{isDark:s,toggleTheme:r},children:t})}function jt(){const t=u.useContext(ft);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}function Cs(t){const[s,i]=u.useState([]),[r,a]=u.useState(!0),[o,m]=u.useState(null);u.useEffect(()=>{if(!t){i([]),a(!1);return}try{a(!0);const n=w.getSubscriptions(t.id);i(n)}catch(n){console.error(n),m(n)}finally{a(!1)}},[t]);const y=u.useCallback(async n=>{if(t)try{const j={...n,id:`sub_${Date.now()}`,userId:t.id,createdAt:new Date().toISOString()},v=[...w.getSubscriptions(t.id),j];return w.saveSubscriptions(t.id,v),i(v),j.id}catch(j){throw m(j),j}},[t]),c=u.useCallback(async(n,j)=>{if(t)try{const v=w.getSubscriptions(t.id).map(S=>S.id===n?{...S,...j}:S);w.saveSubscriptions(t.id,v),i(v)}catch(x){throw m(x),x}},[t]),h=u.useCallback(async n=>{if(t)try{const x=w.getSubscriptions(t.id).filter(v=>v.id!==n);w.saveSubscriptions(t.id,x),i(x)}catch(j){throw m(j),j}},[t]),d=u.useCallback(async n=>{if(t)try{const x=w.getSubscriptions(t.id).find(v=>v.id===n);x&&await c(n,{isPaused:!x.isPaused})}catch(j){throw m(j),j}},[t,c]),g=u.useCallback(async()=>{if(t)try{w.saveSubscriptions(t.id,[]),i([])}catch(n){throw m(n),n}},[t]),l=u.useCallback(async n=>{if(t)try{const j=n.map(S=>({...S,id:S.id||`sub_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,userId:t.id,createdAt:new Date().toISOString()})),v=[...w.getSubscriptions(t.id),...j];w.saveSubscriptions(t.id,v),i(v)}catch(j){throw m(j),j}},[t]);return{subscriptions:s,loading:r,error:o,addSubscription:y,updateSubscription:c,deleteSubscription:h,togglePause:d,clearAllSubscriptions:g,importSubscriptions:l}}const Es=t=>{const s=new Date,i=s.getDate(),r=s.getMonth(),a=s.getFullYear();let o=new Date(a,r,t);for(i>t&&(o=new Date(a,r+1,t));o.getDate()!==t;)o.setDate(o.getDate()-1);if(i===t)return 0;const m=o.getTime()-s.getTime();return Math.ceil(m/(1e3*60*60*24))},kt=t=>{if(!t)return-1;const s=new Date(t);return Math.ceil((s-new Date)/(1e3*60*60*24))},Nt="sub_manager_notifications",ae=()=>"Notification"in window,Se=()=>ae()?Notification.permission:"denied",Ps=async()=>{if(!ae())return!1;try{return await Notification.requestPermission()==="granted"}catch(t){return console.error("Failed to request notification permission:",t),!1}},_e=(t,s={})=>{if(!ae()||Notification.permission!=="granted")return null;const i={icon:"/favicon.ico",badge:"/favicon.ico",tag:"subscription-reminder",requireInteraction:!1,silent:!1,...s};try{const r=new Notification(t,i);return setTimeout(()=>r.close(),5e3),r}catch(r){return console.error("Failed to send notification:",r),null}},Je=()=>{try{const t=localStorage.getItem(Nt);return t?JSON.parse(t):{enabled:!1,reminderDays:[3,1],lastChecked:null}}catch{return{enabled:!1,reminderDays:[3,1],lastChecked:null}}},He=t=>{localStorage.setItem(Nt,JSON.stringify(t))},Ds=t=>{const s=Je();if(!s.enabled||Notification.permission!=="granted")return;const i=new Date().toDateString();if(s.lastChecked===i)return;const r=t.filter(a=>!a.isPaused&&s.reminderDays.includes(a.daysLeft));if(r.length>0)if(r.length===1){const a=r[0];_e("üí≥ Í≤∞Ï†úÏùº ÏïåÎ¶º",{body:`${a.name} Í≤∞Ï†úÏùºÏù¥ ${a.daysLeft===0?"Ïò§Îäò":`${a.daysLeft}Ïùº ÌõÑ`}ÏûÖÎãàÎã§. (${a.cost.toLocaleString()}Ïõê)`,tag:`subscription-${a.id}`})}else{const a=r.reduce((o,m)=>o+m.cost,0);_e("üí≥ Í≤∞Ï†úÏùº ÏïåÎ¶º",{body:`${r.length}Í∞úÏùò Íµ¨ÎèÖ Í≤∞Ï†úÍ∞Ä Í≥ß ÏòàÏ†ïÎêòÏñ¥ ÏûàÏäµÎãàÎã§. (Ï¥ù ${a.toLocaleString()}Ïõê)`,tag:"subscription-multiple"})}He({...s,lastChecked:i})},$s=async()=>{const t=await Ps();return t&&(He({enabled:!0,reminderDays:[3,1,0],lastChecked:null}),_e("üîî ÏïåÎ¶º ÌôúÏÑ±Ìôî",{body:"Íµ¨ÎèÖ Í≤∞Ï†úÏùº ÏïåÎ¶ºÏù¥ ÌôúÏÑ±ÌôîÎêòÏóàÏäµÎãàÎã§.",tag:"notification-enabled"})),t},Ms=()=>{const t=Je();He({...t,enabled:!1})};function Rs({subscriptionCount:t,onOpenSettings:s}){var S;const{isDark:i,toggleTheme:r}=jt(),{user:a,userProfile:o,isAdmin:m,isDemo:y,signOut:c}=Z(),h=ht(),[d,g]=u.useState(!1),[l,n]=u.useState(!1);u.useEffect(()=>{const p=()=>{n(window.scrollY>20)};return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[]);const j=async()=>{await c(),h("/login")},x=(o==null?void 0:o.displayName)||(a==null?void 0:a.displayName)||(y?"Ï≤¥Ìóò Ï§ë":"ÏÇ¨Ïö©Ïûê"),v=(o==null?void 0:o.photoURL)||(a==null?void 0:a.photoURL);return e.jsx("header",{className:`sticky top-0 z-30 transition-all duration-300 ${l?"glass shadow-sm dark:shadow-dark-900/50 py-3":"bg-transparent py-5"}`,children:e.jsxs("div",{className:"max-w-xl mx-auto px-5 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary-500 to-primary-600 p-2.5 rounded-xl text-white shadow-lg shadow-primary-500/30 transition-transform hover:scale-105 active:scale-95",children:e.jsx(V,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight leading-none",children:"Íµ¨ÎèÖ Îß§ÎãàÏ†Ä"}),e.jsx("p",{className:"text-[10px] text-gray-500 dark:text-dark-400 font-medium tracking-wide ml-0.5",children:"PRO EDITION"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-xs font-medium text-gray-600 dark:text-dark-300 bg-white dark:bg-dark-800 border border-gray-100 dark:border-dark-700 px-3 py-1.5 rounded-full shadow-sm",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"font-bold",children:t}),e.jsx("span",{children:"Íµ¨ÎèÖÏ§ë"})]}),e.jsx("button",{onClick:r,className:"p-2.5 rounded-xl text-gray-500 dark:text-dark-400 hover:bg-white dark:hover:bg-dark-700 hover:text-primary-600 dark:hover:text-primary-400 hover:shadow-sm border border-transparent hover:border-gray-100 dark:hover:border-dark-600 transition-all duration-200","aria-label":"ÌÖåÎßà Î≥ÄÍ≤Ω",children:i?e.jsx(nt,{size:18}):e.jsx(lt,{size:18})}),e.jsx("button",{onClick:s,className:"p-2.5 rounded-xl text-gray-500 dark:text-dark-400 hover:bg-white dark:hover:bg-dark-700 hover:text-primary-600 dark:hover:text-primary-400 hover:shadow-sm border border-transparent hover:border-gray-100 dark:hover:border-dark-600 transition-all duration-200 hover:rotate-45","aria-label":"ÏÑ§Ï†ï",children:e.jsx(Mt,{size:18})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>g(!d),className:"flex items-center gap-2 pl-1 pr-0.5 rounded-xl transition-colors",children:e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 p-[2px] shadow-md shadow-primary-500/20 hover:shadow-lg hover:shadow-primary-500/30 transition-all",children:e.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-dark-800 flex items-center justify-center overflow-hidden",children:v?e.jsx("img",{src:v,alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-bold text-xs",children:((S=x[0])==null?void 0:S.toUpperCase())||"U"})})})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-3 w-56 bg-white dark:bg-dark-800 rounded-2xl shadow-xl border border-gray-100 dark:border-dark-700 z-20 overflow-hidden animate-slide-up origin-top-right",children:[e.jsxs("div",{className:"p-4 bg-gray-50/50 dark:bg-dark-700/50 border-b border-gray-100 dark:border-dark-600",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-sm truncate",children:x}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 truncate mt-0.5 font-medium",children:(a==null?void 0:a.email)||"Ï≤¥Ìóò Î™®Îìú"})]}),e.jsxs("div",{className:"p-1.5 space-y-0.5",children:[!y&&e.jsxs("button",{onClick:()=>{g(!1),h("/profile")},className:"w-full px-3 py-2.5 text-left text-sm font-medium text-gray-700 dark:text-dark-200 hover:bg-gray-50 dark:hover:bg-dark-700 rounded-xl flex items-center gap-3 transition-colors",children:[e.jsx(Rt,{size:16,className:"text-gray-400 dark:text-dark-400"}),"ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï"]}),m&&e.jsxs("button",{onClick:()=>{g(!1),h("/admin")},className:"w-full px-3 py-2.5 text-left text-sm font-medium text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-xl flex items-center gap-3 transition-colors",children:[e.jsx(it,{size:16}),"Í¥ÄÎ¶¨Ïûê ÎåÄÏãúÎ≥¥Îìú"]}),e.jsxs("button",{onClick:()=>{g(!1),j()},className:"w-full px-3 py-2.5 text-left text-sm font-medium text-gray-700 dark:text-dark-200 hover:bg-red-50 dark:hover:bg-red-900/10 hover:text-red-600 dark:hover:text-red-400 rounded-xl flex items-center gap-3 transition-colors",children:[e.jsx(Tt,{size:16,className:"text-gray-400 dark:text-dark-400 group-hover:text-red-500"}),y?"Ï≤¥Ìóò Ï¢ÖÎ£å":"Î°úÍ∑∏ÏïÑÏõÉ"]})]})]})]})]})]})]})})}const U={OTT:"#E50914",Music:"#1DB954",Shopping:"#FF9900",Utility:"#00A4EF",Work:"#5A5A5A",Education:"#FFD700",Health:"#10B981",Finance:"#8B5CF6",Etc:"#808080"},G={OTT:"ÏòÅÏÉÅ/Ïä§Ìä∏Î¶¨Î∞ç",Music:"ÏùåÏïÖ",Shopping:"ÏáºÌïë/Ïù¥Ïª§Î®∏Ïä§",Utility:"Ïú†Ìã∏Î¶¨Ìã∞",Work:"ÏóÖÎ¨¥/ÏÉùÏÇ∞ÏÑ±",Education:"ÍµêÏú°/ÌïôÏäµ",Health:"Í±¥Í∞ï/Ïö¥Îèô",Finance:"Í∏àÏúµ/Ìà¨Ïûê",Etc:"Í∏∞ÌÉÄ"},ne=[{name:"Netflix",category:"OTT",color:"#E50914",url:"https://www.netflix.com",defaultCost:17e3},{name:"YouTube Premium",category:"OTT",color:"#FF0000",url:"https://www.youtube.com",defaultCost:14900},{name:"Disney+",category:"OTT",color:"#113CCF",url:"https://www.disneyplus.com",defaultCost:9900},{name:"Wavve",category:"OTT",color:"#1C1B1F",url:"https://www.wavve.com",defaultCost:13900},{name:"Tving",category:"OTT",color:"#FF153C",url:"https://www.tving.com",defaultCost:13900},{name:"Watcha",category:"OTT",color:"#FF0558",url:"https://watcha.com",defaultCost:12900},{name:"Spotify",category:"Music",color:"#1DB954",url:"https://www.spotify.com",defaultCost:10900},{name:"Melon",category:"Music",color:"#00CD3C",url:"https://www.melon.com",defaultCost:10900},{name:"Apple Music",category:"Music",color:"#FA233B",url:"https://music.apple.com",defaultCost:10900},{name:"Genie",category:"Music",color:"#3D85C6",url:"https://www.genie.co.kr",defaultCost:10900},{name:"Bugs",category:"Music",color:"#FF3366",url:"https://music.bugs.co.kr",defaultCost:9500},{name:"Coupang Wow",category:"Shopping",color:"#342971",url:"https://www.coupang.com",defaultCost:7890},{name:"Naver Plus",category:"Shopping",color:"#03C75A",url:"https://nid.naver.com",defaultCost:4900},{name:"SSG Ïú†ÎãàÎ≤ÑÏä§",category:"Shopping",color:"#FF5A5A",url:"https://www.ssg.com",defaultCost:4900},{name:"Notion",category:"Work",color:"#000000",url:"https://www.notion.so",defaultCost:1e4},{name:"ChatGPT Plus",category:"Work",color:"#10A37F",url:"https://chat.openai.com",defaultCost:2e4},{name:"Figma",category:"Work",color:"#F24E1E",url:"https://www.figma.com",defaultCost:15e3},{name:"GitHub Copilot",category:"Work",color:"#000000",url:"https://github.com",defaultCost:1e4},{name:"Slack",category:"Work",color:"#4A154B",url:"https://slack.com",defaultCost:1e4},{name:"Zoom",category:"Work",color:"#2D8CFF",url:"https://zoom.us",defaultCost:16e3},{name:"Adobe CC",category:"Work",color:"#FF0000",url:"https://www.adobe.com",defaultCost:24e3},{name:"Î∞ÄÎ¶¨Ïùò ÏÑúÏû¨",category:"Education",color:"#FFD700",url:"https://www.millie.co.kr",defaultCost:9900},{name:"Duolingo",category:"Education",color:"#58CC02",url:"https://www.duolingo.com",defaultCost:14900},{name:"Coursera",category:"Education",color:"#0056D2",url:"https://www.coursera.org",defaultCost:59e3},{name:"ÌÅ¥ÎûòÏä§101",category:"Education",color:"#FF6B00",url:"https://class101.net",defaultCost:19900},{name:"Nike Training Club",category:"Health",color:"#000000",url:"https://www.nike.com",defaultCost:0},{name:"Keep",category:"Health",color:"#00C8FF",url:"https://www.gotokeep.com",defaultCost:9900},{name:"iCloud+",category:"Utility",color:"#3478F6",url:"https://www.icloud.com",defaultCost:1100},{name:"Google One",category:"Utility",color:"#4285F4",url:"https://one.google.com",defaultCost:2400},{name:"Dropbox",category:"Utility",color:"#0061FF",url:"https://www.dropbox.com",defaultCost:12e3},{name:"1Password",category:"Utility",color:"#1A8CFF",url:"https://1password.com",defaultCost:5e3},{name:"NordVPN",category:"Utility",color:"#4687FF",url:"https://nordvpn.com",defaultCost:15e3}],Ts={monthly:{label:"ÏõîÍ∞Ñ",multiplier:1},yearly:{label:"Ïó∞Í∞Ñ",multiplier:12},weekly:{label:"Ï£ºÍ∞Ñ",multiplier:.25}},Is=[{value:"daysLeft",label:"Í≤∞Ï†úÏùº Ïàú"},{value:"cost-desc",label:"Í∏àÏï° ÎÜíÏùÄ Ïàú"},{value:"cost-asc",label:"Í∏àÏï° ÎÇÆÏùÄ Ïàú"},{value:"name",label:"Ïù¥Î¶Ñ Ïàú"},{value:"category",label:"Ïπ¥ÌÖåÍ≥†Î¶¨ Ïàú"}],Oe={KRW:{symbol:"‚Ç©",label:"Ïõê",locale:"ko-KR"},USD:{symbol:"$",label:"USD",locale:"en-US"},JPY:{symbol:"¬•",label:"Ïóî",locale:"ja-JP"},EUR:{symbol:"‚Ç¨",label:"EUR",locale:"de-DE"}},ee={USD:1300,EUR:1420,JPY:8.7,KRW:1},Ce={credit:{label:"Ïã†Ïö©Ïπ¥Îìú",icon:"CreditCard",color:"#3B82F6"},debit:{label:"Ï≤¥ÌÅ¨Ïπ¥Îìú",icon:"Wallet",color:"#10B981"},digital:{label:"Í∞ÑÌé∏Í≤∞Ï†ú",icon:"Smartphone",color:"#8B5CF6"},bank:{label:"Í≥ÑÏ¢åÏù¥Ï≤¥",icon:"Building",color:"#6B7280"},paypal:{label:"PayPal",icon:"Globe",color:"#003087"}},As=[{name:"ÏÇºÏÑ±Ïπ¥Îìú",type:"credit",color:"#1428A0"},{name:"Ïã†ÌïúÏπ¥Îìú",type:"credit",color:"#0046FF"},{name:"ÌòÑÎåÄÏπ¥Îìú",type:"credit",color:"#000000"},{name:"KBÍµ≠ÎØºÏπ¥Îìú",type:"credit",color:"#FFBC00"},{name:"Ïπ¥Ïπ¥Ïò§ÌéòÏù¥",type:"digital",color:"#FEE500"},{name:"ÎÑ§Ïù¥Î≤ÑÌéòÏù¥",type:"digital",color:"#03C75A"},{name:"ÌÜ†Ïä§",type:"digital",color:"#0064FF"},{name:"ÌéòÏù¥ÏΩî",type:"digital",color:"#E52528"},{name:"Ïï†ÌîåÌéòÏù¥",type:"digital",color:"#000000"}],vt={daily:{label:"Îß§Ïùº",value:30,color:"#10B981"},weekly:{label:"Ï£º 1-2Ìöå",value:8,color:"#3B82F6"},biweekly:{label:"Ï£º 3-4Ìöå",value:15,color:"#6366F1"},monthly:{label:"Ïõî 1-2Ìöå",value:2,color:"#F59E0B"},rarely:{label:"Í±∞Ïùò Ïïà Ìï®",value:.5,color:"#EF4444"}},Ze={first_subscription:{id:"first_subscription",name:"Ï≤´ Î∞úÍ±∏Ïùå",description:"Ï≤´ Íµ¨ÎèÖ Îì±Î°ù",icon:"üéâ",condition:t=>t.totalSubscriptions>=1},saver_10k:{id:"saver_10k",name:"ÏïåÎú∞Ï°±",description:"ÎàÑÏ†Å 10,000Ïõê Ï†àÏïΩ",icon:"üí∞",condition:t=>t.totalSaved>=1e4},saver_100k:{id:"saver_100k",name:"Ï†àÏïΩÏôï",description:"ÎàÑÏ†Å 100,000Ïõê Ï†àÏïΩ",icon:"üëë",condition:t=>t.totalSaved>=1e5},minimalist:{id:"minimalist",name:"ÎØ∏ÎãàÎ©ÄÎ¶¨Ïä§Ìä∏",description:"Íµ¨ÎèÖ 5Í∞ú Ïù¥Ìïò Ïú†ÏßÄ",icon:"üéØ",condition:t=>t.activeSubscriptions<=5&&t.activeSubscriptions>0},tracker_7days:{id:"tracker_7days",name:"Íæ∏Ï§ÄÌï®Ïùò ÏãúÏûë",description:"7Ïùº Ïó∞ÏÜç ÏÇ¨Ïö© Ï≤¥ÌÅ¨",icon:"üî•",condition:t=>t.consecutiveCheckDays>=7},tracker_30days:{id:"tracker_30days",name:"ÏäµÍ¥ÄÏùò Ìûò",description:"30Ïùº Ïó∞ÏÜç ÏÇ¨Ïö© Ï≤¥ÌÅ¨",icon:"‚ö°",condition:t=>t.consecutiveCheckDays>=30},master:{id:"master",name:"Íµ¨ÎèÖ ÎßàÏä§ÌÑ∞",description:"Î™®Îì† Í∏∞Îä• ÏÇ¨Ïö©",icon:"‚≠ê",condition:t=>t.featuresUsed>=10},budget_keeper:{id:"budget_keeper",name:"ÏòàÏÇ∞ ÏàòÌò∏Ïûê",description:"3Í∞úÏõî Ïó∞ÏÜç ÏòàÏÇ∞ ÎÇ¥ Ïú†ÏßÄ",icon:"üõ°Ô∏è",condition:t=>t.monthsUnderBudget>=3},early_bird:{id:"early_bird",name:"ÏñºÎ¶¨Î≤ÑÎìú",description:"Íµ¨ÎèÖ Ìï¥ÏßÄÎ°ú ÏûêÎèôÍ≤∞Ï†ú Î∞©ÏßÄ",icon:"üê¶",condition:t=>t.preventedAutoRenewals>=1},organizer:{id:"organizer",name:"Ï†ïÎ¶¨Ïôï",description:"Î™®Îì† Íµ¨ÎèÖÏóê Í≤∞Ï†úÏàòÎã® Ïó∞Í≤∞",icon:"üìã",condition:t=>t.linkedPaymentMethods>=t.activeSubscriptions&&t.activeSubscriptions>0}},et={subscription_diet_7:{id:"subscription_diet_7",name:"7Ïùº Íµ¨ÎèÖ Îã§Ïù¥Ïñ¥Ìä∏",description:"7Ïùº ÎèôÏïà ÏÉà Íµ¨ÎèÖ Ï∂îÍ∞ÄÌïòÏßÄ ÏïäÍ∏∞",duration:7,reward:"üèÜ Îã§Ïù¥Ïñ¥ÌÑ∞ Î∞∞ÏßÄ",xp:50},subscription_diet_30:{id:"subscription_diet_30",name:"30Ïùº Íµ¨ÎèÖ Îã§Ïù¥Ïñ¥Ìä∏",description:"30Ïùº ÎèôÏïà ÏÉà Íµ¨ÎèÖ Ï∂îÍ∞ÄÌïòÏßÄ ÏïäÍ∏∞",duration:30,reward:"ü•á Í≥®Îìú Îã§Ïù¥Ïñ¥ÌÑ∞ Î∞∞ÏßÄ",xp:200},cancel_one:{id:"cancel_one",name:"Ï†ïÎ¶¨Ïùò ÏãúÏûë",description:"ÎØ∏ÏÇ¨Ïö© Íµ¨ÎèÖ 1Í∞ú Ìï¥ÏßÄÌïòÍ∏∞",duration:7,reward:"‚úÇÔ∏è Í∞ÄÏúÑÏÜê Î∞∞ÏßÄ",xp:100},track_daily_7:{id:"track_daily_7",name:"ÏÇ¨Ïö© Í∏∞Î°ù Ï±åÎ¶∞ÏßÄ",description:"7Ïùº Ïó∞ÏÜç ÏÇ¨Ïö© ÎπàÎèÑ Ï≤¥ÌÅ¨ÌïòÍ∏∞",duration:7,reward:"üìä Î∂ÑÏÑùÍ∞Ä Î∞∞ÏßÄ",xp:75},save_50k:{id:"save_50k",name:"5ÎßåÏõê Ï†àÏïΩ ÎØ∏ÏÖò",description:"Ïù¥Î≤à Îã¨ 5ÎßåÏõê Ï†àÏïΩÌïòÍ∏∞",duration:30,reward:"üíµ Ï†àÏïΩ ÎßàÏä§ÌÑ∞ Î∞∞ÏßÄ",xp:150}},Ee={toss:{id:"toss",name:"Toss Í∞ÄÍ≥ÑÎ∂Ä",extension:"csv",description:"Toss Ïï±ÏóêÏÑú Í∞ÄÏ†∏Ïò§Í∏∞ Í∞ÄÎä•",icon:"üíô"},banksalad:{id:"banksalad",name:"Î±ÖÌÅ¨ÏÉêÎü¨Îìú",extension:"csv",description:"Î±ÖÌÅ¨ÏÉêÎü¨Îìú Ìò∏Ìôò ÌòïÏãù",icon:"üíö"},excel:{id:"excel",name:"Excel",extension:"xlsx",description:"ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Ìè¨Ìï® Ïä§ÌîÑÎ†àÎìúÏãúÌä∏",icon:"üìä"},qif:{id:"qif",name:"QIF (Quicken)",extension:"qif",description:"Í∏àÏúµ Ïï± Ìò∏Ìôò ÌòïÏãù",icon:"üè¶"}},Ls=[30,7,3,1],Pe={usageFrequency:.4,satisfaction:.3,priceValue:.3};function wt({isOpen:t,onClose:s,title:i,items:r,type:a="timeline",totalCost:o}){if(!t)return null;const m=y=>y.toLocaleString();return e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-center justify-center backdrop-blur-sm p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden animate-scaleIn",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-gray-50/50 dark:bg-dark-900/50",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white",children:i}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx(W,{size:20})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto p-2",children:r.length===0?e.jsx("div",{className:"p-8 text-center text-gray-400 dark:text-dark-500 text-sm",children:"Ìï≠Î™©Ïù¥ ÏóÜÏäµÎãàÎã§"}):e.jsx("div",{className:"space-y-1",children:r.map(y=>{const c=y.customColor||U[y.category]||U.Etc;return e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-dark-700 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold text-white shadow-sm",style:{backgroundColor:c},children:y.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800 dark:text-white text-sm",children:y.name}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-dark-400 flex items-center gap-1.5",children:[e.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full",style:{backgroundColor:c}}),G[y.category]||y.category,a==="timeline"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300 dark:text-dark-600",children:"‚Ä¢"}),e.jsxs("span",{children:["Îß§Ïõî ",y.billingDay,"Ïùº"]})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-gray-900 dark:text-white text-sm",children:[m(y.cost),"Ïõê"]}),a==="chart"&&o>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-dark-400",children:[Math.round(y.cost/o*100),"%"]})]})]},y.id)})})}),a==="chart"&&o>0&&e.jsxs("div",{className:"px-5 py-4 bg-gray-50 dark:bg-dark-900 border-t border-gray-100 dark:border-dark-700 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-dark-300",children:"Ï¥ùÍ≥Ñ"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[m(o),"Ïõê"]})]})]})})}function Fs({items:t}){const s=new Date().getDate(),[i,r]=u.useState(null),[a,o]=u.useState(!1),m=u.useMemo(()=>[...t].filter(c=>!c.isPaused).sort((c,h)=>{let d=c.billingDay<s?c.billingDay+31:c.billingDay,g=h.billingDay<s?h.billingDay+31:h.billingDay;return d-g}),[t,s]);if(m.length===0)return e.jsx("div",{className:"text-xs text-white/60 text-center py-4",children:"Í≤∞Ï†ú ÏòàÏ†ïÏù∏ Íµ¨ÎèÖÏù¥ ÏóÜÏäµÎãàÎã§"});const y=m.slice(0,7);return e.jsxs("div",{className:"relative pt-2 pb-4",children:[e.jsx("div",{className:"relative h-2 bg-white/10 rounded-full overflow-hidden",children:y.map((c,h)=>{const d=c.billingDay<s?(c.billingDay+31-s)/31:(c.billingDay-s)/31,g=c.customColor||U[c.category]||U.Etc;return e.jsx("div",{className:"absolute h-full w-1.5 rounded-full transition-all hover:w-2",style:{left:`${d*100}%`,backgroundColor:g,boxShadow:`0 0 4px ${g}80`}},c.id)})}),e.jsx("div",{className:"flex justify-between mt-4 px-1 gap-1",children:y.slice(0,5).map((c,h)=>{const d=c.billingDay<s,g=c.billingDay===s,l=c.customColor||U[c.category]||U.Etc,n=i===c.id;return e.jsxs("div",{className:"relative flex flex-col items-center group cursor-pointer",style:{flex:`0 0 ${100/5}%`},onMouseEnter:()=>r(c.id),onMouseLeave:()=>r(null),children:[n&&e.jsxs("div",{className:"absolute -top-14 left-1/2 -translate-x-1/2 px-2.5 py-1.5 rounded-lg text-xs whitespace-nowrap z-10 shadow-lg animate-fadeIn",style:{backgroundColor:l,color:"white"},children:[e.jsx("div",{className:"font-bold",children:c.name}),e.jsxs("div",{className:"text-white/80 text-[10px]",children:[c.cost.toLocaleString(),"Ïõê"]}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-1 w-2 h-2 rotate-45",style:{backgroundColor:l}})]}),e.jsx("div",{className:`w-3.5 h-3.5 rounded-full border-2 transition-all duration-200 ${g?"animate-pulse scale-125":d?"opacity-40":n?"scale-125 shadow-lg":"group-hover:scale-110"}`,style:{backgroundColor:l,borderColor:"rgba(255,255,255,0.6)",boxShadow:n?`0 0 8px ${l}`:"none"}}),e.jsx("span",{className:`text-[10px] font-semibold mt-1.5 transition-colors ${g?"text-white":d?"text-white/40":n?"text-white":"text-white/80"}`,children:g?"Ïò§Îäò":`${c.billingDay}Ïùº`}),e.jsx("span",{className:`text-[10px] max-w-full text-center transition-colors ${g?"text-white font-bold":d?"text-white/40":n?"text-white font-medium":"text-white/70"}`,children:c.name.length>5?c.name.slice(0,5)+"..":c.name})]},c.id)})}),m.length>5&&e.jsx("div",{className:"text-center mt-2",children:e.jsxs("button",{onClick:()=>o(!0),className:"text-[10px] text-white/50 hover:text-white/70 transition-colors cursor-pointer hover:underline",children:["+",m.length-5,"Í∞ú Îçî ÏûàÏùå"]})}),e.jsx(wt,{isOpen:a,onClose:()=>o(!1),title:"Ïù¥Îã¨Ïùò Í≤∞Ï†ú ÏòàÏ†ï",items:m,type:"timeline"})]})}function _s({totalMonthlyCost:t,totalYearlyCost:s,subscriptions:i,previousMonthCost:r=null}){const a=r?((t-r)/r*100).toFixed(1):null;return e.jsxs("div",{className:"relative bg-gradient-to-br from-primary-500 via-primary-600 to-violet-600 dark:from-primary-600 dark:via-primary-700 dark:to-violet-700 rounded-3xl p-6 text-white shadow-xl shadow-primary-500/30 dark:shadow-primary-900/40 transition-all duration-300 hover:shadow-2xl hover:shadow-primary-500/40",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-3xl pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-6 -mt-6 w-36 h-36 rounded-full bg-white opacity-[0.1] blur-2xl animate-pulse",style:{animationDuration:"4s"}}),e.jsx("div",{className:"absolute bottom-0 left-0 -ml-6 -mb-6 w-28 h-28 rounded-full bg-white opacity-[0.08] blur-xl animate-pulse",style:{animationDuration:"5s"}}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-24 h-24 rounded-full bg-violet-300 opacity-[0.12] blur-2xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-0 w-16 h-16 rounded-full bg-indigo-300 opacity-[0.1] blur-xl"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("p",{className:"text-white/70 text-sm font-medium mb-1 flex items-center gap-2",children:["Ïù¥Î≤à Îã¨ ÏòàÏÉÅ ÏßÄÏ∂úÏï°",a!==null&&e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full flex items-center gap-0.5 ${parseFloat(a)>0?"bg-red-500/20 text-red-200":"bg-green-500/20 text-green-200"}`,children:[parseFloat(a)>0?e.jsx(K,{size:10}):e.jsx(te,{size:10}),Math.abs(parseFloat(a)),"%"]})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-2",children:[e.jsx("h2",{className:"text-4xl font-extrabold tracking-tight tabular-nums drop-shadow-sm",children:t.toLocaleString()}),e.jsx("span",{className:"text-xl opacity-90 font-medium",children:"Ïõê"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/60 mb-6",children:[e.jsxs("span",{children:["Ïó∞Í∞Ñ ÏïΩ ",Math.round(s/1e4).toLocaleString(),"ÎßåÏõê"]}),e.jsx("span",{className:"text-white/30",children:"|"}),e.jsxs("span",{children:["Ïùº ÌèâÍ∑† ",Math.round(t/30).toLocaleString(),"Ïõê"]})]})]}),e.jsxs("div",{className:"bg-white/[0.08] backdrop-blur-md rounded-2xl p-4 border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-white/70 flex items-center gap-1.5",children:[e.jsx(se,{size:12}),"Í≤∞Ï†ú ÏùºÏ†ï"]}),e.jsxs("span",{className:"text-[10px] text-white/50",children:[new Date().getMonth()+1,"Ïõî"]})]}),e.jsx(Fs,{items:i})]})]})}function Os({items:t}){return!t||t.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl p-4 shadow-sm border-l-4 border-red-500 dark:border-red-400 flex items-start gap-3 animate-fade-in",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-2 rounded-full text-red-500 dark:text-red-400 flex-shrink-0",children:e.jsx(ce,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-2",children:["Í≥ß Í≤∞Ï†úÎêòÎäî ÏÑúÎπÑÏä§",e.jsx("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-[10px] px-1.5 py-0.5 rounded-full font-medium",children:t.length})]}),e.jsx("div",{className:"mt-2 space-y-1.5",children:t.map(s=>e.jsxs("div",{className:"text-sm flex justify-between items-center py-1 border-b border-gray-50 dark:border-dark-700 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:s.customColor||"#E50914"}}),e.jsx("span",{className:"text-gray-600 dark:text-dark-300 truncate",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("span",{className:"text-xs text-gray-400 dark:text-dark-500",children:[s.cost.toLocaleString(),"Ïõê"]}),e.jsx("span",{className:`font-bold text-xs px-2 py-0.5 rounded ${s.daysLeft===0?"bg-red-500 text-white":"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400"}`,children:s.daysLeft===0?"Ïò§Îäò":`D-${s.daysLeft}`})]})]},s.id))})]})]})}function zs({data:t,onCategoryClick:s}){const[i,r]=u.useState(null),[a,o]=u.useState(!1);if(!t||t.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-400 dark:text-dark-500 bg-gray-50 dark:bg-dark-800 rounded-2xl border border-dashed border-gray-200 dark:border-dark-700",children:[e.jsx(ke,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§"})]});const m=t.reduce((g,l)=>g+l.cost,0);let y=0;const c=g=>{const l=Math.cos(2*Math.PI*g),n=Math.sin(2*Math.PI*g);return[l,n]},h=t.map(g=>{const l=g.cost/m,n=y;y+=l;const j=y,[x,v]=c(n),[S,p]=c(j),N=l>.5?1:0,b=["M 0 0",`L ${x} ${v}`,`A 1 1 0 ${N} 1 ${S} ${p}`,"L 0 0"].join(" "),f=g.customColor||U[g.category]||U.Etc,E=i===g.id;return e.jsx("path",{d:b,fill:f,className:"chart-segment cursor-pointer",style:{opacity:i&&!E?.4:1,transform:E?"scale(1.05)":"scale(1)",filter:E?`drop-shadow(0 0 6px ${f}80)`:"none",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:()=>r(g.id),onMouseLeave:()=>r(null),onClick:()=>s==null?void 0:s(g.category)},g.id)}),d=t.find(g=>g.id===i);return e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative w-36 h-36 flex-shrink-0",children:[e.jsx("svg",{viewBox:"-1.1 -1.1 2.2 2.2",className:"transform -rotate-90 w-full h-full drop-shadow-sm",children:h}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-20 h-20 bg-white dark:bg-dark-800 rounded-full flex flex-col items-center justify-center shadow-inner dark:shadow-dark-900/50",children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs font-bold text-gray-800 dark:text-white truncate max-w-[70px]",children:d.name}),e.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-dark-400",children:[Math.round(d.cost/m*100),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"Ïù¥Î≤àÎã¨"}),e.jsxs("span",{className:"text-sm font-bold text-gray-800 dark:text-white",children:[Math.round(m/1e4),"ÎßåÏõê"]})]})})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-1.5 text-xs max-h-36 overflow-y-auto scrollbar-hide",children:[t.slice(0,6).map(g=>{const l=g.customColor||U[g.category]||U.Etc,n=i===g.id;return e.jsxs("div",{className:`flex items-center justify-between p-1.5 rounded-lg transition-all duration-200 cursor-pointer ${n?"bg-gray-100 dark:bg-dark-700 scale-102":"hover:bg-gray-50 dark:hover:bg-dark-700/50"}`,onMouseEnter:()=>r(g.id),onMouseLeave:()=>r(null),onClick:()=>s==null?void 0:s(g.category),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:l}}),e.jsx("span",{className:"truncate max-w-[80px] text-gray-600 dark:text-dark-300",children:g.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400 dark:text-dark-500 text-[10px]",children:[g.cost.toLocaleString(),"Ïõê"]}),e.jsxs("span",{className:"font-semibold text-gray-800 dark:text-white w-8 text-right",children:[Math.round(g.cost/m*100),"%"]})]})]},g.id)}),t.length>6&&e.jsxs("button",{onClick:()=>o(!0),className:"text-gray-400 dark:text-dark-500 pl-4 text-[10px] hover:text-gray-600 dark:hover:text-dark-300 transition-colors text-left",children:["...Ïô∏ ",t.length-6,"Í∞ú"]})]}),e.jsx(wt,{isOpen:a,onClose:()=>o(!1),title:"ÏßÄÏ∂ú ÏÉÅÏÑ∏ Î∂ÑÏÑù",items:t,type:"chart",totalCost:m})]})}function Us({subscriptions:t}){const s=u.useMemo(()=>{const r=[],a=t.filter(h=>!h.isPaused),o={};a.forEach(h=>{o[h.category]=(o[h.category]||0)+1}),Object.entries(o).forEach(([h,d])=>{if(d>=2){const l=a.filter(n=>n.category===h).reduce((n,j)=>n+j.cost,0);r.push({type:"duplicate",icon:$e,title:`${G[h]||h} Ï§ëÎ≥µ Íµ¨ÎèÖ`,description:`${d}Í∞úÏùò Íµ¨ÎèÖÏù¥ ÏûàÏäµÎãàÎã§. ÌÜµÌï©ÏùÑ Í≥†Î†§Ìï¥Î≥¥ÏÑ∏Ïöî.`,savings:`Ïõî ${Math.round(l*.3).toLocaleString()}Ïõê Ï†àÏïΩ Í∞ÄÎä•`,priority:d>=3?"high":"medium"})}});const m=t.filter(h=>h.isPaused);m.length>0&&r.push({type:"paused",icon:ce,title:`${m.length}Í∞ú ÏùºÏãúÏ†ïÏßÄ Ï§ë`,description:"ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÎäî Íµ¨ÎèÖÏùÄ ÏôÑÏ†Ñ Ìï¥ÏßÄÎ•º Í≥†Î†§Ìï¥Î≥¥ÏÑ∏Ïöî.",savings:`Ïõî ${m.reduce((h,d)=>h+d.cost,0).toLocaleString()}Ïõê Ï†àÏïΩ Í∞ÄÎä•`,priority:"low"});const y=a.filter(h=>(!h.billingCycle||h.billingCycle==="monthly")&&h.cost>=1e4);if(y.length>0){const h=y.reduce((d,g)=>d+g.cost*12*.15,0);r.push({type:"yearly",icon:te,title:"Ïó∞Í∞Ñ Í≤∞Ï†ú Ï†ÑÌôò Ï∂îÏ≤ú",description:`${y.length}Í∞ú Íµ¨ÎèÖÏùÑ Ïó∞Í∞Ñ Í≤∞Ï†úÎ°ú Ï†ÑÌôòÌïòÎ©¥ ÏïΩ 15% Ï†àÏïΩ Í∞ÄÎä•`,savings:`Ïó∞ ${Math.round(h).toLocaleString()}Ïõê Ï†àÏïΩ ÏòàÏÉÅ`,priority:"medium"})}const c=a.filter(h=>h.cost>=2e4);if(c.length>=2){const h=c.reduce((d,g)=>d+g.cost,0);r.push({type:"high-cost",icon:ce,title:"Í≥†Í∞Ä Íµ¨ÎèÖ Ï£ºÏùò",description:`2ÎßåÏõê Ïù¥ÏÉÅ Íµ¨ÎèÖÏù¥ ${c.length}Í∞ú ÏûàÏäµÎãàÎã§.`,savings:`Ïõî ${h.toLocaleString()}Ïõê ÏßÄÏ∂ú Ï§ë`,priority:"high"})}return r.sort((h,d)=>{const g={high:0,medium:1,low:2};return g[h.priority]-g[d.priority]})},[t]);if(s.length===0)return null;const i=r=>{switch(r){case"high":return"text-red-500 bg-red-50 dark:bg-red-900/20";case"medium":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";default:return"text-blue-500 bg-blue-50 dark:bg-blue-900/20"}};return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(It,{className:"w-4 h-4 text-amber-500"}),"Ï†àÏïΩ ÌåÅ"]}),e.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-dark-500 bg-gray-100 dark:bg-dark-700 px-2 py-1 rounded-full",children:[s.length,"Í∞ú Ï†úÏïà"]})]}),e.jsx("div",{className:"space-y-3",children:s.slice(0,3).map((r,a)=>{const o=r.icon;return e.jsx("div",{className:`p-3 rounded-xl ${i(r.priority)} transition-all hover:scale-[1.02]`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(o,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-sm text-gray-800 dark:text-white",children:r.title}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-dark-300 mt-0.5",children:r.description}),e.jsxs("p",{className:"text-xs font-bold text-primary-600 dark:text-primary-400 mt-1",children:["üí∞ ",r.savings]})]})]})},a)})})]})}function Bs({subscriptions:t,totalMonthlyCost:s,totalYearlyCost:i,categoryBreakdown:r,onCategoryClick:a}){const o=u.useMemo(()=>{const d=["1Ïõî","2Ïõî","3Ïõî","4Ïõî","5Ïõî","6Ïõî","7Ïõî","8Ïõî","9Ïõî","10Ïõî","11Ïõî","12Ïõî"],g=new Date().getMonth();return Array.from({length:6},(l,n)=>{const j=(g-5+n+12)%12,x=Math.random()*.3-.15,v=Math.round(s*(1+x));return{month:d[j],cost:n===5?s:v,isCurrentMonth:n===5}})},[s]),m=Math.max(...o.map(d=>d.cost)),y=u.useMemo(()=>Object.entries(r).sort((d,g)=>g[1].total-d[1].total).slice(0,5),[r]),c=u.useMemo(()=>[...t].filter(d=>!d.isPaused).sort((d,g)=>g.cost-d.cost)[0],[t]),h=t.filter(d=>!d.isPaused);return t.length===0?null:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700 transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary-50 dark:bg-primary-900/20 text-primary-500",children:e.jsx(ke,{className:"w-5 h-5"})}),"ÏßÄÏ∂ú Î∂ÑÏÑù"]}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 bg-gray-100 dark:bg-dark-700 px-3 py-1.5 rounded-full",children:[h.length,"Í∞ú Íµ¨ÎèÖ Ï§ë"]})]}),e.jsx("div",{className:"flex justify-center py-2",children:e.jsx(zs,{data:h,onCategoryClick:a})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(Q,{size:48})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-dark-400 mb-2",children:[e.jsx(Q,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Ïõî ÌèâÍ∑† ÏßÄÏ∂ú"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight",children:[Math.round(s).toLocaleString(),e.jsx("span",{className:"text-sm font-medium text-gray-400 dark:text-dark-500 ml-1",children:"Ïõê"})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-400 dark:text-dark-500",children:["ÏßÄÎÇúÎã¨ ÎåÄÎπÑ ",e.jsx("span",{className:"text-green-500 font-medium",children:"+2.5%"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(se,{size:48})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-dark-400 mb-2",children:[e.jsx(se,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Ïó∞Í∞Ñ ÏòàÏÉÅ"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight",children:[Math.round(i/1e4).toLocaleString(),e.jsx("span",{className:"text-sm font-medium text-gray-400 dark:text-dark-500 ml-1",children:"ÎßåÏõê"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-400 dark:text-dark-500",children:"Í≥†Ï†ï ÏßÄÏ∂ú Ìè¨Ìï®"})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-500",children:e.jsx(fe,{className:"w-5 h-5"})}),"ÏõîÎ≥Ñ Ï∂îÏù¥"]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-dark-500 font-medium",children:"ÏµúÍ∑º 6Í∞úÏõî"})]}),e.jsx("div",{className:"flex items-end justify-between gap-3 h-40 pt-4 px-2",children:o.map((d,g)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group cursor-pointer",children:[e.jsxs("div",{className:"relative w-full flex justify-col items-end h-full",children:[e.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 pointer-events-none",children:[d.cost.toLocaleString(),"Ïõê"]}),e.jsx("div",{className:`w-full rounded-t-xl transition-all duration-500 ease-out group-hover:scale-y-105 origin-bottom ${d.isCurrentMonth?"bg-gradient-to-t from-primary-500 to-primary-400 shadow-lg shadow-primary-500/20":"bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600"}`,style:{height:`${d.cost/m*100}%`,minHeight:"12px"}})]}),e.jsx("span",{className:`text-[11px] font-medium ${d.isCurrentMonth?"text-primary-600 dark:text-primary-400":"text-gray-400 dark:text-dark-500"}`,children:d.month})]},g))})]}),y.length>0&&e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-5",children:e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500",children:e.jsx(K,{className:"w-5 h-5"})}),"Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ"]})}),e.jsx("div",{className:"space-y-4",children:y.map(([d,g])=>{const l=g.total/s*100,n=U[d]||U.Etc;return e.jsxs("button",{onClick:()=>a==null?void 0:a(d),className:"w-full text-left group hover:bg-gray-50 dark:hover:bg-dark-700/50 rounded-xl p-3 -mx-3 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:n}}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-dark-200",children:G[d]||d}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-dark-500 bg-gray-100 dark:bg-dark-700 px-1.5 py-0.5 rounded",children:g.count})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[g.total.toLocaleString(),"Ïõê"]}),e.jsxs("span",{className:"text-xs text-gray-400 w-8 text-right",children:[Math.round(l),"%"]})]})]}),e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out group-hover:brightness-110",style:{width:`${l}%`,backgroundColor:n}})})]},d)})})]}),c&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/10 dark:to-orange-900/10 p-5 rounded-2xl border border-amber-100 dark:border-amber-900/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-5",children:e.jsx(Q,{size:60})}),e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-500 font-bold uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"}),"Top Expense"]}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg block",children:c.name}),e.jsxs("span",{className:"text-xs text-amber-600/70 dark:text-amber-500/70",children:["Ï†ÑÏ≤¥ ÏßÄÏ∂úÏùò ",Math.round(c.cost/s*100),"% Ï∞®ÏßÄ"]})]}),e.jsxs("span",{className:"font-bold text-amber-600 dark:text-amber-400 text-lg bg-white dark:bg-dark-800 px-3 py-1.5 rounded-lg shadow-sm",children:[c.cost.toLocaleString(),"Ïõê"]})]})]}),e.jsx(Us,{subscriptions:t})]})}function Gs({searchQuery:t,onSearchChange:s,selectedCategory:i,onCategoryChange:r,sortBy:a,onSortChange:o,showPaused:m,onShowPausedChange:y}){const c=["All",...Object.keys(U)];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ze,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-dark-500"}),e.jsx("input",{type:"text",placeholder:"Íµ¨ÎèÖ ÏÑúÎπÑÏä§ Í≤ÄÏÉâ...",value:t,onChange:h=>s(h.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-dark-500 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all text-sm"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 pb-1",children:c.map(h=>e.jsxs("button",{onClick:()=>r(h==="All"?null:h),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all duration-200 transform active:scale-95 ${h==="All"&&!i||i===h?"bg-primary-500 text-white shadow-md shadow-primary-500/30 scale-105":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300 hover:bg-gray-200 dark:hover:bg-dark-600 hover:scale-102"}`,children:[h!=="All"&&e.jsx("span",{className:"w-2.5 h-2.5 rounded-full transition-transform group-hover:scale-110",style:{backgroundColor:U[h],boxShadow:h==="All"&&!i||i===h?`0 0 6px ${U[h]}`:"none"}}),h==="All"?"Ï†ÑÏ≤¥":G[h]||h]},h))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:a,onChange:h=>o(h.target.value),className:"appearance-none pl-3 pr-8 py-1.5 rounded-lg border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-gray-600 dark:text-dark-300 text-xs font-medium cursor-pointer focus:ring-2 focus:ring-primary-500 outline-none",children:Is.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}),e.jsx(ie,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-dark-400",children:"ÏùºÏãúÏ†ïÏßÄ Ìè¨Ìï®"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:h=>y(h.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 dark:bg-dark-700 rounded-full peer peer-checked:bg-primary-500 transition-colors"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform peer-checked:translate-x-4"})]})]})]})]})}function tt({subscription:t,onEdit:s,onDelete:i,onTogglePause:r}){const{id:a,name:o,cost:m,billingDay:y,billingCycle:c,category:h,url:d,customColor:g,isPaused:l,trialEndDate:n,daysLeft:j}=t,x=g||U[h]||U.Etc,v=kt(n),S=v>=0,p=new Date().getDate(),N=Math.min(100,Math.max(0,p/30*100));return e.jsxs("div",{className:`group bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border transition-all card-hover relative overflow-hidden ${l?"border-gray-200 dark:border-dark-700 opacity-60":j<=3?"border-red-200 dark:border-red-900/50 glow-urgent ring-1 ring-red-100 dark:ring-red-900/30":"border-gray-100 dark:border-dark-700 hover:border-primary-200 dark:hover:border-primary-800"}`,children:[!l&&e.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-primary-500/10 dark:bg-primary-400/10 transition-all duration-1000",style:{width:`${N}%`}}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`relative w-12 h-12 rounded-2xl flex items-center justify-center text-white font-bold text-lg shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:rotate-3 ${l?"grayscale":""}`,style:{background:l?x:`linear-gradient(135deg, ${x} 0%, ${x}CC 100%)`,boxShadow:l?"none":`0 8px 16px -4px ${x}60`},children:[o.slice(0,1).toUpperCase(),l&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-500 rounded-full flex items-center justify-center shadow-md border-2 border-white dark:border-dark-800",children:e.jsx(Ye,{size:10,className:"text-white"})}),d&&!l&&e.jsx("div",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-white/30 rounded-full m-1 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-base leading-tight mb-1",children:o}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-md font-medium",style:{backgroundColor:`${x}15`,color:x},children:G[h]||h}),S&&e.jsxs("span",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 font-medium",children:[e.jsx(J,{size:10}),"D-",v]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold text-lg tabular-nums tracking-tight ${l?"text-gray-400 line-through":"text-gray-900 dark:text-white"}`,children:[m.toLocaleString(),e.jsx("span",{className:"text-sm font-normal text-gray-400 dark:text-dark-400 ml-0.5",children:"Ïõê"})]}),c&&c!=="monthly"&&e.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-dark-500 uppercase font-medium tracking-wider",children:["/",c==="yearly"?"Year":"Week"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-50 dark:border-dark-700/50 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-dark-400",children:[e.jsx(V,{size:12,className:"text-gray-400"}),e.jsxs("span",{children:["Îß§Ïõî ",e.jsxs("span",{className:"font-medium text-gray-700 dark:text-dark-300",children:[y,"Ïùº"]})," Í≤∞Ï†ú"]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-bold px-2 py-1 rounded-lg ${l?"bg-gray-100 text-gray-400 dark:bg-dark-700 dark:text-dark-500":j===0?"bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 animate-pulse":j<=3?"bg-red-50 text-red-500 dark:bg-red-900/10 dark:text-red-400":"bg-primary-50 text-primary-600 dark:bg-primary-900/10 dark:text-primary-400"}`,children:[e.jsx(Ne,{size:12}),l?"Ï†ïÏßÄÎê®":j===0?"Ïò§Îäò Í≤∞Ï†ú":`${j}Ïùº ÎÇ®Ïùå`]})]}),e.jsxs("div",{className:"flex justify-end items-center gap-2",children:[d&&e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-xl text-gray-400 hover:text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-all",title:"ÏÑúÎπÑÏä§ Î∞©Î¨∏",children:e.jsx(Ue,{size:16})}),e.jsx("div",{className:"w-px h-4 bg-gray-100 dark:bg-dark-700 mx-1"}),e.jsx("button",{onClick:()=>s(t),className:"p-2 text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-dark-700 rounded-xl transition-all",title:"ÏàòÏ†ï",children:e.jsx(ve,{size:16})}),e.jsx("button",{onClick:()=>r(a),className:`p-2 rounded-xl transition-all ${l?"text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20":"text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20"}`,title:l?"Ïû¨Í∞ú":"ÏùºÏãúÏ†ïÏßÄ",children:l?e.jsx(At,{size:16}):e.jsx(Ye,{size:16})}),e.jsx("button",{onClick:()=>i(a),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all",title:"ÏÇ≠Ï†ú",children:e.jsx(Be,{size:16})})]})]})}function Ws({subscriptions:t,searchQuery:s,selectedCategory:i,sortBy:r,showPaused:a,onEdit:o,onDelete:m,onTogglePause:y,onAddNew:c}){const h=u.useMemo(()=>{let g=[...t];if(s){const l=s.toLowerCase();g=g.filter(n=>n.name.toLowerCase().includes(l)||n.category.toLowerCase().includes(l))}switch(i&&(g=g.filter(l=>l.category===i)),a||(g=g.filter(l=>!l.isPaused)),r){case"daysLeft":g.sort((l,n)=>(l.daysLeft||0)-(n.daysLeft||0));break;case"cost-desc":g.sort((l,n)=>n.cost-l.cost);break;case"cost-asc":g.sort((l,n)=>l.cost-n.cost);break;case"name":g.sort((l,n)=>l.name.localeCompare(n.name,"ko"));break;case"category":g.sort((l,n)=>l.category.localeCompare(n.category));break}return g},[t,s,i,r,a]),d=u.useMemo(()=>{if(r!=="category")return null;const g={};return h.forEach(l=>{g[l.category]||(g[l.category]=[]),g[l.category].push(l)}),g},[h,r]);return t.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-dark-800 rounded-2xl border border-dashed border-gray-200 dark:border-dark-700",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-dark-700 rounded-full flex items-center justify-center",children:e.jsx(le,{size:24,className:"text-gray-400 dark:text-dark-500"})}),e.jsx("p",{className:"text-gray-500 dark:text-dark-400 text-sm mb-4",children:"Îì±Î°ùÎêú Íµ¨ÎèÖ ÏÑúÎπÑÏä§Í∞Ä ÏóÜÏäµÎãàÎã§."}),e.jsx("button",{onClick:c,className:"text-primary-600 dark:text-primary-400 text-sm font-bold hover:underline",children:"+ Ï≤´ Íµ¨ÎèÖ Ï∂îÍ∞ÄÌïòÍ∏∞"})]}):h.length===0?e.jsx("div",{className:"text-center py-8 bg-white dark:bg-dark-800 rounded-2xl",children:e.jsx("p",{className:"text-gray-400 dark:text-dark-500 text-sm",children:"Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§."})}):e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(K,{className:"w-4 h-4 text-primary-500"}),"Íµ¨ÎèÖ Î¶¨Ïä§Ìä∏",e.jsxs("span",{className:"text-xs font-normal text-gray-400 dark:text-dark-500",children:["(",h.length,")"]})]}),r==="daysLeft"&&e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"Í≤∞Ï†úÏùº Ïàú"})]}),e.jsx("div",{className:"space-y-3",children:d?Object.entries(d).map(([g,l])=>e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 mb-2 pl-1",children:[g," (",l.length,")"]}),e.jsx("div",{className:"space-y-3",children:l.map((n,j)=>e.jsx("div",{className:"subscription-item",style:{animationDelay:`${j*50}ms`},children:e.jsx(tt,{subscription:n,onEdit:o,onDelete:m,onTogglePause:y})},n.id))})]},g)):h.map((g,l)=>e.jsx("div",{className:"subscription-item",style:{animationDelay:`${l*50}ms`},children:e.jsx(tt,{subscription:g,onEdit:o,onDelete:m,onTogglePause:y})},g.id))})]})}function Js({isOpen:t,onClose:s,onSave:i,editData:r=null}){const[a,o]=u.useState({name:"",cost:"",billingDay:1,billingCycle:"monthly",category:"OTT",url:"",customColor:"",notes:"",trialEndDate:"",sharedWith:1,currency:"KRW"}),[m,y]=u.useState({}),[c,h]=u.useState(!0);u.useEffect(()=>{r?(o({name:r.name||"",cost:r.cost||"",billingDay:r.billingDay||1,billingCycle:r.billingCycle||"monthly",category:r.category||"OTT",url:r.url||"",customColor:r.customColor||"",notes:r.notes||"",trialEndDate:r.trialEndDate?typeof r.trialEndDate=="object"&&r.trialEndDate.seconds?new Date(r.trialEndDate.seconds*1e3).toISOString().split("T")[0]:new Date(r.trialEndDate).toISOString().split("T")[0]:"",sharedWith:r.sharedWith||1,currency:r.currency||"KRW"}),h(!1)):(o({name:"",cost:"",billingDay:new Date().getDate(),billingCycle:"monthly",category:"OTT",url:"",customColor:"",notes:"",trialEndDate:"",sharedWith:1,currency:"KRW"}),h(!0)),y({})},[r,t]);const d=n=>{o({...a,name:n.name,category:n.category,url:n.url,customColor:n.color,cost:n.defaultCost||""}),h(!1)},g=()=>{const n={};return a.name.trim()||(n.name="ÏÑúÎπÑÏä§ Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"),(!a.cost||isNaN(a.cost)||Number(a.cost)<0)&&(n.cost="Ïò¨Î∞îÎ•∏ Í∏àÏï°ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"),(!a.billingDay||a.billingDay<1||a.billingDay>31)&&(n.billingDay="1~31 ÏÇ¨Ïù¥Ïùò ÎÇ†ÏßúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"),y(n),Object.keys(n).length===0},l=n=>{if(n.preventDefault(),!g())return;const j={...a,cost:Number(a.cost),billingDay:Number(a.billingDay),sharedWith:Number(a.sharedWith)||1,trialEndDate:a.trialEndDate?new Date(a.trialEndDate):null};i(j,r==null?void 0:r.id),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/80 z-50 flex items-end md:items-center justify-center backdrop-blur-sm modal-backdrop p-0 md:p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-lg rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden modal-content max-h-[95vh] h-[95vh] md:h-auto overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-white/80 dark:bg-dark-800/80 backdrop-blur-md sticky top-0 z-10 shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:r?"Íµ¨ÎèÖ ÏàòÏ†ï":"ÏÉà Íµ¨ÎèÖ Ï∂îÍ∞Ä"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-dark-400 mt-0.5",children:r?"Íµ¨ÎèÖ Ï†ïÎ≥¥Î•º ÏàòÏ†ïÌï©ÎãàÎã§.":"ÏÉàÎ°úÏö¥ Íµ¨ÎèÖ ÏÑúÎπÑÏä§Î•º Îì±Î°ùÌïòÏÑ∏Ïöî."})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-all active:scale-90",children:e.jsx(W,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[!r&&c&&e.jsxs("div",{className:"mb-8 animate-fade-in",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 dark:text-dark-400 uppercase tracking-wider mb-3 block px-1",children:"Ïù∏Í∏∞ ÏÑúÎπÑÏä§ ÏÑ†ÌÉù"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:ne.slice(0,12).map((n,j)=>e.jsxs("button",{type:"button",onClick:()=>d(n),className:"flex flex-col items-center justify-center gap-2 p-3 rounded-2xl border border-gray-100 dark:border-dark-700 hover:border-primary-200 dark:hover:border-primary-800 hover:bg-primary-50 dark:hover:bg-primary-900/10 transition-all duration-200 group active:scale-95",style:{animationDelay:`${j*50}ms`},children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md group-hover:scale-110 transition-transform",style:{background:`linear-gradient(135deg, ${n.color} 0%, ${n.color}dd 100%)`,boxShadow:`0 4px 12px -2px ${n.color}50`},children:n.name[0]}),e.jsx("span",{className:"text-[11px] font-medium text-gray-600 dark:text-dark-300 group-hover:text-primary-600 dark:group-hover:text-primary-400 truncate w-full text-center",children:n.name})]},n.name))}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-xs font-medium text-gray-400 dark:text-dark-400 hover:text-primary-500 flex items-center gap-1 py-1 px-3 hover:bg-gray-50 dark:hover:bg-dark-700 rounded-full transition-colors",children:["ÏßÅÏ†ë ÏûÖÎ†•ÌïòÍ∏∞",e.jsx(Ue,{size:10})]})})]}),e.jsxs("form",{onSubmit:l,className:`space-y-6 ${!r&&c?"opacity-30 pointer-events-none blur-sm":""} transition-all duration-500`,children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700/50 p-4 rounded-2xl",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-dark-400 uppercase tracking-wider mb-2",children:"Í∏∞Î≥∏ Ï†ïÎ≥¥"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-200 mb-1.5",children:["ÏÑúÎπÑÏä§ Ïù¥Î¶Ñ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Ïòà: ÎÑ∑ÌîåÎ¶≠Ïä§",className:`w-full px-4 py-3 rounded-xl border ${m.name?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-white dark:bg-dark-800 text-gray-800 dark:text-white placeholder-gray-400 focus:bg-white dark:focus:bg-dark-800 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all shadow-sm`,value:a.name,onChange:n=>o({...a,name:n.target.value}),disabled:!r&&c}),m.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1 font-medium",children:m.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-200 mb-1.5",children:["Í≤∞Ï†ú Í∏àÏï° ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"0",min:"0",className:`w-full pl-4 pr-10 py-3 rounded-xl border ${m.cost?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-white dark:bg-dark-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all shadow-sm font-medium`,value:a.cost,onChange:n=>o({...a,cost:n.target.value}),onFocus:n=>n.target.select(),disabled:!r&&c}),e.jsx("span",{className:"absolute right-3 top-3 text-gray-400 dark:text-dark-500 text-sm font-medium",children:"Ïõê"})]}),m.cost&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1 font-medium",children:m.cost})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-200 mb-1.5",children:["Í≤∞Ï†úÏùº ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"1",max:"31",placeholder:"1",className:`w-full pl-4 pr-10 py-3 rounded-xl border ${m.billingDay?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-white dark:bg-dark-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all shadow-sm font-medium`,value:a.billingDay,onChange:n=>o({...a,billingDay:n.target.value}),onFocus:n=>n.target.select(),disabled:!r&&c}),e.jsx("span",{className:"absolute right-3 top-3 text-gray-400 dark:text-dark-500 text-sm font-medium",children:"Ïùº"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-dark-400 uppercase tracking-wider mb-3 px-1",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(U).map(n=>e.jsxs("button",{type:"button",onClick:()=>o({...a,category:n}),disabled:!r&&c,className:`px-4 py-2.5 rounded-xl text-xs font-bold transition-all duration-200 flex items-center gap-2 ${a.category===n?"bg-gray-800 dark:bg-white text-white dark:text-gray-900 shadow-md transform scale-105 ring-2 ring-offset-2 ring-gray-800 dark:ring-white dark:ring-offset-dark-800":"bg-white dark:bg-dark-700 text-gray-500 dark:text-dark-400 border border-gray-100 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-600"}`,children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:U[n],boxShadow:a.category===n?`0 0 8px ${U[n]}`:"none"}}),G[n]||n]},n))})]}),e.jsxs("div",{className:"border-t border-gray-100 dark:border-dark-700 pt-6",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-dark-400 uppercase tracking-wider mb-4 px-1",children:"ÏÉÅÏÑ∏ ÏÑ§Ï†ï"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2",children:"Í≤∞Ï†ú Ï£ºÍ∏∞"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(Ts).map(([n,{label:j}])=>e.jsx("button",{type:"button",onClick:()=>o({...a,billingCycle:n}),disabled:!r&&c,className:`py-2.5 rounded-xl text-xs font-bold transition-all border ${a.billingCycle===n?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 border-primary-200 dark:border-primary-800":"bg-white dark:bg-dark-700 text-gray-500 dark:text-dark-400 border-gray-200 dark:border-dark-600 hover:bg-gray-50"}`,children:j},n))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2 flex items-center gap-1.5",children:[e.jsx(ye,{size:14,className:"text-gray-400"}),"Í≥µÏú† Ïù∏Ïõê"]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 dark:bg-dark-700/50 p-1 rounded-xl border border-gray-200 dark:border-dark-600",children:[e.jsx("button",{type:"button",onClick:()=>o({...a,sharedWith:Math.max(1,(a.sharedWith||1)-1)}),disabled:!r&&c,className:"w-9 h-9 rounded-lg bg-white dark:bg-dark-700 text-gray-500 dark:text-dark-400 hover:text-primary-600 hover:shadow-sm flex items-center justify-center transition-all disabled:opacity-50",children:e.jsx(ie,{size:18})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-sm",children:a.sharedWith||1}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-dark-400 ml-0.5",children:"Î™Ö"})]}),e.jsx("button",{type:"button",onClick:()=>o({...a,sharedWith:(a.sharedWith||1)+1}),disabled:!r&&c,className:"w-9 h-9 rounded-lg bg-white dark:bg-dark-700 text-gray-500 dark:text-dark-400 hover:text-primary-600 hover:shadow-sm flex items-center justify-center transition-all disabled:opacity-50",children:e.jsx(ge,{size:18})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2 flex items-center gap-1.5",children:[e.jsx(Q,{size:14,className:"text-gray-400"}),"ÌÜµÌôî"]}),e.jsx("select",{value:a.currency,onChange:n=>o({...a,currency:n.target.value}),disabled:!r&&c,className:"w-full h-[46px] px-3 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm appearance-none cursor-pointer",children:Object.entries(Oe).map(([n,{symbol:j,label:x}])=>e.jsxs("option",{value:n,children:[n," (",j,")"]},n))})]})]}),a.sharedWith>1&&e.jsxs("div",{className:"bg-primary-50 dark:bg-primary-900/10 p-3 rounded-xl flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-primary-700 dark:text-primary-300",children:"1Ïù∏Îãπ Î∂ÄÎã¥Í∏à"}),e.jsxs("span",{className:"text-sm font-bold text-primary-600 dark:text-primary-400",children:[Math.round(Number(a.cost||0)/a.sharedWith).toLocaleString(),"Ïõê"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2",children:"Î©îÎ™®"}),e.jsx("textarea",{placeholder:"Í≥ÑÏ†ï Ï†ïÎ≥¥ÎÇò ÌäπÏù¥ÏÇ¨Ìï≠ÏùÑ Í∏∞Î°ùÌïòÏÑ∏Ïöî",rows:2,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm resize-none",value:a.notes,onChange:n=>o({...a,notes:n.target.value}),disabled:!r&&c})]})]})]}),e.jsx("div",{className:"pt-2 sticky bottom-0 bg-white dark:bg-dark-800 pb-2",children:e.jsxs("button",{type:"submit",disabled:!r&&c,className:"w-full py-4 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-300 dark:disabled:bg-dark-600 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transform active:scale-[0.98] transition-all shadow-lg shadow-primary-500/30 flex items-center justify-center gap-2",children:[e.jsx(H,{size:20}),r?"ÏàòÏ†ï ÏôÑÎ£å":"Íµ¨ÎèÖ Ï∂îÍ∞ÄÌïòÍ∏∞"]})})]})]})]})}):null}const Hs=t=>{const s=["ÏÑúÎπÑÏä§Î™Ö","Ïõî Í≤∞Ï†úÍ∏àÏï°","Í≤∞Ï†úÏùº","Ïπ¥ÌÖåÍ≥†Î¶¨","Í≤∞Ï†úÏ£ºÍ∏∞","URL","ÏùºÏãúÏ†ïÏßÄ","Î©îÎ™®","ÏÉùÏÑ±Ïùº"],i=t.map(a=>[a.name,a.cost,a.billingDay,a.category,a.billingCycle||"monthly",a.url||"",a.isPaused?"Ïòà":"ÏïÑÎãàÏò§",a.notes||"",a.createdAt||""]);return[s.join(","),...i.map(a=>a.map(o=>typeof o=="string"&&o.includes(",")?`"${o}"`:o).join(","))].join(`
`)},Ys=t=>{const s={version:"1.0",exportedAt:new Date().toISOString(),subscriptions:t.map(i=>({name:i.name,cost:i.cost,billingDay:i.billingDay,category:i.category,billingCycle:i.billingCycle||"monthly",url:i.url||"",customColor:i.customColor||"",isPaused:i.isPaused||!1,notes:i.notes||""}))};return JSON.stringify(s,null,2)},Xs=t=>{var r,a,o,m,y,c;const s=t.trim().split(`
`);if(s.length<2)return[];const i=[];for(let h=1;h<s.length;h++){const d=Vs(s[h]);d.length>=4&&i.push({name:((r=d[0])==null?void 0:r.trim())||"",cost:parseInt(d[1])||0,billingDay:parseInt(d[2])||1,category:((a=d[3])==null?void 0:a.trim())||"Etc",billingCycle:((o=d[4])==null?void 0:o.trim())||"monthly",url:((m=d[5])==null?void 0:m.trim())||"",isPaused:((y=d[6])==null?void 0:y.trim())==="Ïòà",notes:((c=d[7])==null?void 0:c.trim())||""})}return i},Vs=t=>{const s=[];let i="",r=!1;for(let a=0;a<t.length;a++){const o=t[a];o==='"'?r=!r:o===","&&!r?(s.push(i),i=""):i+=o}return s.push(i),s},Ks=t=>{try{const s=JSON.parse(t);return s.subscriptions&&Array.isArray(s.subscriptions)?s.subscriptions.map(i=>({name:i.name||"",cost:parseInt(i.cost)||0,billingDay:parseInt(i.billingDay)||1,category:i.category||"Etc",billingCycle:i.billingCycle||"monthly",url:i.url||"",customColor:i.customColor||"",isPaused:i.isPaused||!1,notes:i.notes||""})):[]}catch(s){return console.error("JSON parsing error:",s),[]}},st=(t,s,i)=>{const r=new Blob([t],{type:i}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},qs=t=>new Promise((s,i)=>{const r=new FileReader;r.onload=a=>s(a.target.result),r.onerror=a=>i(a),r.readAsText(t)}),Qs=t=>{const s=new Date,i=s.getFullYear(),r=s.getMonth(),a=t.filter(c=>!c.isPaused).map(c=>{const h=[];for(let d=0;d<12;d++){const g=(r+d)%12,l=i+Math.floor((r+d)/12),n=Math.min(c.billingDay,new Date(l,g+1,0).getDate()),j=new Date(l,g,n),x=`${c.id}-${l}${String(g+1).padStart(2,"0")}@subscription-manager`;h.push({uid:x,summary:`üí≥ ${c.name} Í≤∞Ï†úÏùº`,description:`${c.name} Íµ¨ÎèÖÎ£å ${c.cost.toLocaleString()}Ïõê Í≤∞Ï†ú ÏòàÏ†ï`,start:j,cost:c.cost})}return h}).flat(),o=c=>c.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",m=c=>{const h=c.getFullYear(),d=String(c.getMonth()+1).padStart(2,"0"),g=String(c.getDate()).padStart(2,"0");return`${h}${d}${g}`};let y=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Subscription Manager Pro//KO","CALSCALE:GREGORIAN","METHOD:PUBLISH","X-WR-CALNAME:Íµ¨ÎèÖ Í≤∞Ï†úÏùº","X-WR-TIMEZONE:Asia/Seoul",""].join(`\r
`);return a.forEach(c=>{y+=["BEGIN:VEVENT",`UID:${c.uid}`,`DTSTAMP:${o(s)}`,`DTSTART;VALUE=DATE:${m(c.start)}`,`SUMMARY:${c.summary}`,`DESCRIPTION:${c.description}`,"END:VEVENT",""].join(`\r
`)}),y+="END:VCALENDAR",y},Zs=t=>{const s=Qs(t),i=new Blob([s],{type:"text/calendar;charset=utf-8"}),r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=`subscription_payments_${new Date().toISOString().split("T")[0]}.ics`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)};function er({isOpen:t,onClose:s,subscriptions:i,onImport:r,onClearAll:a,onSettingsChange:o}){const{isDark:m,toggleTheme:y,setAutoTheme:c,autoTheme:h}=jt(),{user:d,isDemo:g}=Z(),[l,n]=u.useState(!1),[j,x]=u.useState(null),[v,S]=u.useState(!1),[p,N]=u.useState("default"),[b,f]=u.useState(0),[E,D]=u.useState(0),[k,M]=u.useState(!0),I=u.useRef(null);u.useEffect(()=>{if(ae()){N(Se());const P=Je();S(P.enabled&&Se()==="granted")}if(d!=null&&d.uid&&!g){const P=w.getUserSettings(d.uid);f(P.budget||0),D(P.monthlyIncome||0),M(P.priceAlertEnabled!==!1)}},[t,d,g]);const A=P=>{if(d!=null&&d.uid&&!g){const _={...w.getUserSettings(d.uid),...P};w.saveUserSettings(d.uid,_),o&&o(_)}},O=()=>{const P=Hs(i),C=`subscriptions_${new Date().toISOString().split("T")[0]}.csv`;st(P,C,"text/csv;charset=utf-8")},T=()=>{const P=Ys(i),C=`subscriptions_${new Date().toISOString().split("T")[0]}.json`;st(P,C,"application/json")},L=async P=>{var _;const C=(_=P.target.files)==null?void 0:_[0];if(C){try{const B=await qs(C);let Y=[];if(C.name.endsWith(".json")?Y=Ks(B):C.name.endsWith(".csv")&&(Y=Xs(B)),Y.length>0){const de=await r(Y);x({success:!0,count:de}),setTimeout(()=>x(null),3e3)}else x({success:!1,message:"Ïú†Ìö®Ìïú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§"}),setTimeout(()=>x(null),3e3)}catch(B){console.error("Import error:",B),x({success:!1,message:"ÌååÏùºÏùÑ ÏùΩÎäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§"}),setTimeout(()=>x(null),3e3)}I.current&&(I.current.value="")}},$=async()=>{await a(),n(!1),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-end md:items-center justify-center backdrop-blur-sm modal-backdrop",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-md rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden modal-content max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-gray-50/50 dark:bg-dark-900/50 sticky top-0 z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"ÏÑ§Ï†ï"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx(W,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Îã§ÌÅ¨ Î™®Îìú"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mt-0.5",children:"Ïñ¥ÎëêÏö¥ ÌÖåÎßàÎ°ú Ï†ÑÌôòÌï©ÎãàÎã§"})]}),e.jsx("button",{onClick:y,className:`relative w-14 h-7 rounded-full transition-colors ${m?"bg-primary-500":"bg-gray-200 dark:bg-dark-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-6 h-6 rounded-full bg-white shadow-md transition-transform flex items-center justify-center ${m?"translate-x-7":"translate-x-0.5"}`,children:m?e.jsx(lt,{size:12,className:"text-primary-500"}):e.jsx(nt,{size:12,className:"text-amber-500"})})})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-800 dark:text-white text-sm flex items-center gap-2",children:[v?e.jsx(pe,{size:16,className:"text-primary-500"}):e.jsx(be,{size:16,className:"text-gray-400"}),"Í≤∞Ï†úÏùº ÏïåÎ¶º"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mt-0.5",children:ae()?p==="denied"?"ÏïåÎ¶º Í∂åÌïúÏù¥ Í±∞Î∂ÄÎêòÏóàÏäµÎãàÎã§. Î∏åÎùºÏö∞Ï†Ä ÏÑ§Ï†ïÏóêÏÑú ÌóàÏö©Ìï¥Ï£ºÏÑ∏Ïöî.":"Í≤∞Ï†ú ÏòàÏ†ïÏùº 3Ïùº, 1Ïùº Ï†ÑÏóê ÏïåÎ¶º":"Ïù¥ Î∏åÎùºÏö∞Ï†ÄÎäî ÏïåÎ¶ºÏùÑ ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§"})]}),e.jsx("button",{onClick:async()=>{if(v)Ms(),S(!1);else{const P=await $s();S(P),N(Se())}},disabled:!ae()||p==="denied",className:`relative w-14 h-7 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${v?"bg-primary-500":"bg-gray-200 dark:bg-dark-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-6 h-6 rounded-full bg-white shadow-md transition-transform flex items-center justify-center ${v?"translate-x-7":"translate-x-0.5"}`,children:v?e.jsx(pe,{size:12,className:"text-primary-500"}):e.jsx(be,{size:12,className:"text-gray-400"})})})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(xe,{size:16,className:"text-primary-500"}),e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Ïõî ÏòàÏÇ∞ ÏÑ§Ï†ï"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",placeholder:"0",min:"0",step:"10000",value:b||"",onChange:P=>{const C=Number(P.target.value)||0;f(C),A({budget:C})},className:"flex-1 px-3 py-2 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm"}),e.jsx("span",{className:"text-gray-400 dark:text-dark-500 text-sm",children:"Ïõê/Ïõî"})]}),b>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-500 dark:text-dark-400",children:"ÏÇ¨Ïö©Îüâ"}),e.jsxs("span",{className:`font-bold ${i.reduce((P,C)=>P+(C.isPaused?0:C.cost),0)>b?"text-red-500":"text-primary-500"}`,children:[Math.round(i.reduce((P,C)=>P+(C.isPaused?0:C.cost),0)/b*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${i.reduce((P,C)=>P+(C.isPaused?0:C.cost),0)>b?"bg-red-500":"bg-primary-500"}`,style:{width:`${Math.min(100,i.reduce((P,C)=>P+(C.isPaused?0:C.cost),0)/b*100)}%`}})}),e.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-1",children:[i.reduce((P,C)=>P+(C.isPaused?0:C.cost),0).toLocaleString(),"Ïõê / ",b.toLocaleString(),"Ïõê"]})]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(xe,{size:16,className:"text-indigo-500"}),e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Ïõî ÏàòÏûÖ ÏÑ§Ï†ï"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mb-2",children:"ÏàòÏûÖ ÎåÄÎπÑ Íµ¨ÎèÖ ÏßÄÏ∂ú ÎπÑÏú®ÏùÑ Î∂ÑÏÑùÌï©ÎãàÎã§ (Í∂åÏû• 10% Ïù¥Ìïò)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",placeholder:"3000000",min:"0",step:"100000",value:E||"",onChange:P=>{const C=Number(P.target.value)||0;D(C),A({monthlyIncome:C})},className:"flex-1 px-3 py-2 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all text-sm"}),e.jsx("span",{className:"text-gray-400 dark:text-dark-500 text-sm",children:"Ïõê/Ïõî"})]}),E>0&&e.jsx("div",{className:"mt-2 p-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/20",children:e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:"Íµ¨ÎèÖ ÏßÄÏ∂ú ÎπÑÏú®"}),e.jsxs("span",{className:`font-bold ${i.reduce((P,C)=>P+(C.isPaused?0:C.cost),0)/E>.1?"text-amber-500":"text-green-500"}`,children:[(i.reduce((P,C)=>P+(C.isPaused?0:C.cost),0)/E*100).toFixed(1),"%"]})]})})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-800 dark:text-white text-sm flex items-center gap-2",children:[e.jsx(J,{size:16,className:k?"text-amber-500":"text-gray-400"}),"Í∞ÄÍ≤© Ïù∏ÏÉÅ ÏïåÎ¶º"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mt-0.5",children:"Íµ¨ÎèÖ Í∞ÄÍ≤©Ïù¥ Î≥ÄÍ≤ΩÎêòÎ©¥ ÏïåÎ¶ºÏùÑ Î∞õÏäµÎãàÎã§"})]}),e.jsx("button",{onClick:()=>{const P=!k;M(P),A({priceAlertEnabled:P})},className:`relative w-14 h-7 rounded-full transition-colors ${k?"bg-amber-500":"bg-gray-200 dark:bg-dark-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-6 h-6 rounded-full bg-white shadow-md transition-transform flex items-center justify-center ${k?"translate-x-7":"translate-x-0.5"}`,children:k?e.jsx(pe,{size:12,className:"text-amber-500"}):e.jsx(be,{size:12,className:"text-gray-400"})})})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:O,disabled:i.length===0,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(me,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"CSV"})]}),e.jsxs("button",{onClick:T,disabled:i.length===0,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Lt,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"JSON"})]})]}),e.jsxs("button",{onClick:()=>Zs(i),disabled:i.length===0,className:"w-full mt-3 flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-primary-200 dark:border-primary-800 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-primary-900/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(se,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Ï∫®Î¶∞ÎçîÎ°ú ÎÇ¥Î≥¥ÎÇ¥Í∏∞ (.ics)"})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-2",children:[i.length,"Í∞úÏùò Íµ¨ÎèÖ Îç∞Ïù¥ÌÑ∞Î•º ÎÇ¥Î≥¥ÎÉÖÎãàÎã§"]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞"}),e.jsx("input",{ref:I,type:"file",accept:".csv,.json",onChange:L,className:"hidden",id:"import-file"}),e.jsxs("label",{htmlFor:"import-file",className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border-2 border-dashed border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700/50 text-gray-600 dark:text-dark-400 hover:border-primary-400 hover:text-primary-600 dark:hover:text-primary-400 cursor-pointer transition-colors",children:[e.jsx(Ge,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"CSV ÎòêÎäî JSON ÌååÏùº ÏÑ†ÌÉù"})]}),j&&e.jsxs("div",{className:`mt-2 p-2 rounded-lg text-xs flex items-center gap-2 ${j.success?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400"}`,children:[j.success?e.jsx(H,{size:14}):e.jsx(J,{size:14}),j.success?`${j.count}Í∞úÏùò Íµ¨ÎèÖÏùÑ Í∞ÄÏ†∏ÏôîÏäµÎãàÎã§`:j.message]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"ÏúÑÌóò Íµ¨Ïó≠"}),l?e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-3",children:[e.jsx(J,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:"Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?"})]}),e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400/80 mb-3",children:"Î™®Îì† Íµ¨ÎèÖ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏòÅÍµ¨Ï†ÅÏúºÎ°ú ÏÇ≠Ï†úÎê©ÎãàÎã§. Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>n(!1),className:"flex-1 py-2 px-4 rounded-lg bg-white dark:bg-dark-700 text-gray-600 dark:text-dark-300 text-sm font-medium hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:"Ï∑®ÏÜå"}),e.jsx("button",{onClick:$,className:"flex-1 py-2 px-4 rounded-lg bg-red-500 text-white text-sm font-medium hover:bg-red-600 transition-colors",children:"ÏÇ≠Ï†ú"})]})]}):e.jsxs("button",{onClick:()=>n(!0),disabled:i.length===0,className:"w-full flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Be,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú"})]})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"Íµ¨ÎèÖ Îß§ÎãàÏ†Ä Pro v2.0.0"})})]})]})}):null}function tr({onSignUp:t}){const s=ht(),[i,r]=u.useState(null),[a,o]=u.useState(!1);if(u.useEffect(()=>{const y=()=>{const h=pt();r(h)};y();const c=setInterval(y,6e4);return()=>clearInterval(c)},[]),!i||a)return null;const m=i.remainingMinutes<=5;return e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 ${m?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gradient-to-r from-amber-500 to-orange-500"} text-white py-2 px-4 shadow-lg`,children:e.jsxs("div",{className:"max-w-lg mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ne,{size:16,className:"animate-pulse"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Ï≤¥Ìóò Î™®Îìú"})," - ",i.remainingMinutes,"Î∂Ñ ÌõÑ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÇ¨ÎùºÏßëÎãàÎã§"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>s("/login"),className:"flex items-center gap-1 px-3 py-1 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-medium transition-colors",children:[e.jsx(dt,{size:14}),"Í∞ÄÏûÖÌïòÍ≥† Ï†ÄÏû•ÌïòÍ∏∞"]}),e.jsx("button",{onClick:()=>o(!0),className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx(W,{size:16})})]})]})})}function sr({subscriptions:t,budget:s=0,monthlyIncome:i=0}){const r=u.useMemo(()=>{const m=t.filter(b=>!b.isPaused),y=m.reduce((b,f)=>b+f.cost,0);let c=100;const h=[],d=[],g={};m.forEach(b=>{g[b.category]=(g[b.category]||0)+1});let l=0;if(Object.entries(g).forEach(([b,f])=>{f>=3?(l+=10,h.push({icon:$e,text:`${G[b]||b} Ïπ¥ÌÖåÍ≥†Î¶¨ ${f}Í∞ú Ï§ëÎ≥µ`,points:-10})):f>=2&&(l+=5,h.push({icon:$e,text:`${G[b]||b} Ïπ¥ÌÖåÍ≥†Î¶¨ ${f}Í∞ú`,points:-5}))}),c-=Math.min(l,30),(t.length>0?t.filter(b=>b.isPaused).length/t.length:0)>.3&&(d.push({icon:Me,text:"Ï†ÅÍ∑πÏ†ÅÏù∏ Íµ¨ÎèÖ Í¥ÄÎ¶¨ Ï§ë",points:5}),c+=5),s>0){const b=y/s;if(b>1.2){const f=Math.min(20,Math.floor((b-1)*20));c-=f,h.push({icon:J,text:`ÏòàÏÇ∞ ${Math.round(b*100)}% Ï¥àÍ≥º`,points:-f})}else b<=.8&&(d.push({icon:Q,text:"ÏòàÏÇ∞ ÎÇ¥ Ï†ÅÏ†ï ÏßÄÏ∂ú",points:5}),c+=5)}if(i>0){const b=y/i;if(b>.15){const f=Math.min(15,Math.floor((b-.1)*100));c-=f,h.push({icon:te,text:`ÏàòÏûÖÏùò ${Math.round(b*100)}% Íµ¨ÎèÖ ÏßÄÏ∂ú`,points:-f})}else b<=.1&&(d.push({icon:K,text:"ÏàòÏûÖ ÎåÄÎπÑ Ï†ÅÏ†ï Íµ¨ÎèÖ",points:5}),c+=5)}const j=m.filter(b=>b.cost>=2e4),x=m.length>0?j.length/m.length:0;x>.5&&(c-=10,h.push({icon:Q,text:`Í≥†Í∞Ä Íµ¨ÎèÖÏù¥ ${Math.round(x*100)}%`,points:-10})),Object.keys(g).length>=4&&(d.push({icon:ke,text:"Îã§ÏñëÌïú Ïπ¥ÌÖåÍ≥†Î¶¨ ÌôúÏö©",points:5}),c+=5),c=Math.max(0,Math.min(100,c));let S,p,N;return c>=90?(S="Excellent",p="text-emerald-500",N="üåü"):c>=75?(S="Good",p="text-green-500",N="üëç"):c>=60?(S="Fair",p="text-yellow-500",N="‚ö†Ô∏è"):c>=40?(S="Poor",p="text-orange-500",N="üòü"):(S="Critical",p="text-red-500",N="üö®"),{score:c,grade:S,gradeColor:p,gradeEmoji:N,deductions:h,bonuses:d,totalMonthly:y}},[t,s,i]);if(t.length===0)return null;const a=2*Math.PI*45,o=a-r.score/100*a;return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-rose-50 dark:bg-rose-900/20 text-rose-500",children:e.jsx(Ft,{className:"w-5 h-5"})}),"Íµ¨ÎèÖ Í±¥Í∞ï Ï†êÏàò"]}),e.jsxs("span",{className:`text-sm font-bold ${r.gradeColor}`,children:[r.gradeEmoji," ",r.grade]})]}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"45",stroke:"currentColor",strokeWidth:"10",fill:"none",className:"text-gray-100 dark:text-dark-700"}),e.jsx("circle",{cx:"64",cy:"64",r:"45",stroke:"url(#scoreGradient)",strokeWidth:"10",fill:"none",strokeLinecap:"round",strokeDasharray:a,strokeDashoffset:o,className:"transition-all duration-1000 ease-out"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"scoreGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:r.score>=60?"#10B981":"#EF4444"}),e.jsx("stop",{offset:"100%",stopColor:r.score>=60?"#34D399":"#F87171"})]})})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:r.score}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-dark-500",children:"/ 100"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[r.deductions.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-red-500 uppercase tracking-wider",children:"Í∞êÏ†ê ÏöîÏù∏"}),r.deductions.map((m,y)=>e.jsxs("div",{className:"flex items-center justify-between bg-red-50 dark:bg-red-900/10 p-2.5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m.icon,{size:14,className:"text-red-500"}),e.jsx("span",{className:"text-xs text-red-700 dark:text-red-400",children:m.text})]}),e.jsx("span",{className:"text-xs font-bold text-red-600",children:m.points})]},y))]}),r.bonuses.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-green-500 uppercase tracking-wider",children:"Í∞ÄÏÇ∞ ÏöîÏù∏"}),r.bonuses.map((m,y)=>e.jsxs("div",{className:"flex items-center justify-between bg-green-50 dark:bg-green-900/10 p-2.5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m.icon,{size:14,className:"text-green-500"}),e.jsx("span",{className:"text-xs text-green-700 dark:text-green-400",children:m.text})]}),e.jsxs("span",{className:"text-xs font-bold text-green-600",children:["+",m.points]})]},y))]}),r.deductions.length===0&&r.bonuses.length===0&&e.jsxs("div",{className:"text-center py-3",children:[e.jsx(Me,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-dark-300",children:"Íµ¨ÎèÖ Í¥ÄÎ¶¨Í∞Ä Ïûò ÎêòÍ≥† ÏûàÏñ¥Ïöî!"})]})]})]})}function rr({subscriptions:t,onAddSubscription:s}){const[i,r]=u.useState(12),[a,o]=u.useState(!1),[m,y]=u.useState(3),[c,h]=u.useState([]),[d,g]=u.useState(!1),l=[{months:3,label:"3Í∞úÏõî"},{months:6,label:"6Í∞úÏõî"},{months:12,label:"1ÎÖÑ"},{months:24,label:"2ÎÖÑ"}],n=u.useMemo(()=>{const b=t.filter(T=>!T.isPaused);let f=[...b];c.forEach(T=>{T.type==="remove"?f=f.filter(L=>L.id!==T.id):T.type==="add"&&f.push(T.subscription)});const E=b.reduce((T,L)=>T+L.cost,0),D=f.reduce((T,L)=>T+L.cost,0),k=D-E,M=(T,L,$)=>{if(!$)return T*L;const P=Math.pow(1+m/100,1/12)-1;let C=0,_=T;for(let B=0;B<L;B++)C+=_,_*=1+P;return C},I=M(E,i,a),A=M(D,i,a),O=A-I;return{currentMonthly:E,simulatedMonthly:D,monthlyDiff:k,currentTotal:I,simulatedTotal:A,totalDiff:O,simulatedSubs:f}},[t,c,i,a,m]),j=b=>{const f={id:`sim_${Date.now()}`,name:b.name,cost:b.defaultCost,category:b.category,isSimulated:!0};h([...c,{type:"add",subscription:f,id:f.id}]),g(!1)},x=b=>{const f=c.find(E=>E.type==="add"&&E.id===b);h(f?c.filter(E=>E.id!==b):[...c,{type:"remove",id:b}])},v=b=>{h(c.filter(f=>!(f.type==="remove"&&f.id===b)))},S=()=>{h([])},p=t.filter(b=>!b.isPaused),N=c.filter(b=>b.type==="remove").map(b=>b.id);return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-violet-50 dark:bg-violet-900/20 text-violet-500",children:e.jsx(ot,{className:"w-5 h-5"})}),"ÎπÑÏö© ÏãúÎÆ¨Î†àÏù¥ÌÑ∞"]}),c.length>0&&e.jsx("button",{onClick:S,className:"text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:"Ï¥àÍ∏∞Ìôî"})]}),e.jsx("div",{className:"flex gap-2 mb-4",children:l.map(b=>e.jsx("button",{onClick:()=>r(b.months),className:`flex-1 py-2 text-xs font-medium rounded-xl transition-all ${i===b.months?"bg-violet-500 text-white shadow-md":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300 hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:b.label},b.months))}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-dark-700/50 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_t,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-dark-300",children:"Ïù∏ÌîåÎ†àÏù¥ÏÖò Î∞òÏòÅ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx("input",{type:"number",value:m,onChange:b=>y(Number(b.target.value)),className:"w-12 px-2 py-1 text-xs rounded-lg border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-center",min:"0",max:"20"}),e.jsx("button",{onClick:()=>o(!a),className:`relative w-10 h-5 rounded-full transition-colors ${a?"bg-violet-500":"bg-gray-200 dark:bg-dark-600"}`,children:e.jsx("div",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform ${a?"translate-x-5":"translate-x-0.5"}`})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 dark:bg-dark-700/50",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-1",children:"ÌòÑÏû¨"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[Math.round(n.currentTotal/1e4).toLocaleString(),e.jsx("span",{className:"text-xs font-normal text-gray-400 ml-1",children:"ÎßåÏõê"})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-1",children:["Ïõî ",n.currentMonthly.toLocaleString(),"Ïõê"]})]}),e.jsxs("div",{className:`p-4 rounded-2xl ${n.totalDiff!==0?n.totalDiff>0?"bg-red-50 dark:bg-red-900/20":"bg-green-50 dark:bg-green-900/20":"bg-gray-50 dark:bg-dark-700/50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-1",children:"ÏãúÎÆ¨Î†àÏù¥ÏÖò"}),e.jsxs("p",{className:`text-lg font-bold ${n.totalDiff!==0?n.totalDiff>0?"text-red-600":"text-green-600":"text-gray-900 dark:text-white"}`,children:[Math.round(n.simulatedTotal/1e4).toLocaleString(),e.jsx("span",{className:"text-xs font-normal opacity-70 ml-1",children:"ÎßåÏõê"})]}),n.totalDiff!==0&&e.jsxs("p",{className:`text-[10px] mt-1 font-medium ${n.totalDiff>0?"text-red-500":"text-green-500"}`,children:[n.totalDiff>0?"+":"",Math.round(n.totalDiff/1e4).toLocaleString(),"ÎßåÏõê"]})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Íµ¨ÎèÖ Í¥ÄÎ¶¨"}),p.map(b=>{const f=N.includes(b.id);return e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-xl transition-all ${f?"bg-red-50 dark:bg-red-900/10 opacity-50":"bg-gray-50 dark:bg-dark-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-medium ${f?"line-through text-gray-400":"text-gray-700 dark:text-dark-200"}`,children:b.name}),e.jsxs("span",{className:"text-xs text-gray-400",children:[b.cost.toLocaleString(),"Ïõê"]})]}),e.jsx("button",{onClick:()=>f?v(b.id):x(b.id),className:`p-1.5 rounded-lg transition-colors ${f?"text-green-500 hover:bg-green-100 dark:hover:bg-green-900/20":"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:f?e.jsx(le,{size:14}):e.jsx(Re,{size:14})})]},b.id)}),c.filter(b=>b.type==="add").map(b=>e.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-xl bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"+NEW"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:b.subscription.name}),e.jsxs("span",{className:"text-xs text-green-500",children:[b.subscription.cost.toLocaleString(),"Ïõê"]})]}),e.jsx("button",{onClick:()=>x(b.id),className:"p-1.5 rounded-lg text-green-500 hover:bg-green-100 dark:hover:bg-green-900/20",children:e.jsx(Re,{size:14})})]},b.id))]}),d?e.jsxs("div",{className:"p-4 rounded-xl bg-violet-50 dark:bg-violet-900/20 border border-violet-200 dark:border-violet-800",children:[e.jsx("p",{className:"text-xs font-bold text-violet-600 dark:text-violet-400 mb-3",children:"Íµ¨ÎèÖ Ï∂îÍ∞Ä ÏãúÎÆ¨Î†àÏù¥ÏÖò"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto",children:ne.slice(0,12).map(b=>e.jsx("button",{onClick:()=>j(b),className:"p-2 rounded-lg bg-white dark:bg-dark-700 text-xs font-medium text-gray-700 dark:text-dark-200 hover:bg-violet-100 dark:hover:bg-violet-900/30 transition-colors",children:b.name},b.name))}),e.jsx("button",{onClick:()=>g(!1),className:"w-full mt-3 py-2 text-xs text-gray-500 hover:text-gray-700",children:"Ï∑®ÏÜå"})]}):e.jsxs("button",{onClick:()=>g(!0),className:"w-full py-3 rounded-xl border-2 border-dashed border-gray-200 dark:border-dark-600 text-gray-400 hover:border-violet-400 hover:text-violet-500 transition-colors flex items-center justify-center gap-2",children:[e.jsx(le,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Íµ¨ÎèÖ Ï∂îÍ∞Ä ÏãúÎÆ¨Î†àÏù¥ÏÖò"})]})]})}const ar=ne.reduce((t,s)=>(t[s.name.toLowerCase()]=s.defaultCost,t),{});function nr({subscriptions:t,onUpdatePriceHistory:s}){const i=u.useMemo(()=>t.filter(o=>!o.isPaused).map(o=>{const m=o.priceHistory||[],y=o.cost,c=ar[o.name.toLowerCase()];let h=0,d=0,g=null;if(m.length>0){const n=m[m.length-1].price;h=y-n,d=n>0?h/n*100:0,g=m[m.length-1].date}let l=null;if(c){const n=y-c;l={diff:n,percent:n/c*100,isHigher:n>0}}return{...o,priceChange:h,changePercent:d,lastChangeDate:g,history:m,avgPrice:c,comparedToAvg:l}}).sort((o,m)=>Math.abs(m.changePercent)-Math.abs(o.changePercent)),[t]),r=i.filter(o=>o.priceChange>0).length,a=i.filter(o=>o.priceChange<0).length;return t.length===0?null:e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-cyan-50 dark:bg-cyan-900/20 text-cyan-500",children:e.jsx(Ot,{className:"w-5 h-5"})}),"Í∞ÄÍ≤© Î≥ÄÎèô Ï∂îÏ†Å"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded-full",children:[e.jsx(zt,{size:12}),r]}),a>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium text-green-500 bg-green-50 dark:bg-green-900/20 px-2 py-1 rounded-full",children:[e.jsx(Ut,{size:12}),a]})]})]}),e.jsx("div",{className:"space-y-3",children:i.slice(0,5).map(o=>{var m;return e.jsxs("div",{className:"p-3 rounded-xl bg-gray-50 dark:bg-dark-700/50 transition-all hover:bg-gray-100 dark:hover:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-white",children:o.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-sm text-gray-900 dark:text-white",children:[o.cost.toLocaleString(),"Ïõê"]}),o.priceChange!==0&&e.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-medium ${o.priceChange>0?"text-red-500":"text-green-500"}`,children:[o.priceChange>0?e.jsx(K,{size:12}):e.jsx(te,{size:12}),o.priceChange>0?"+":"",Math.round(o.changePercent),"%"]})]})]}),o.comparedToAvg&&e.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[e.jsxs("span",{className:"text-gray-400",children:["ÌèâÍ∑† ",(m=o.avgPrice)==null?void 0:m.toLocaleString(),"Ïõê"]}),e.jsx("span",{className:`font-medium ${o.comparedToAvg.isHigher?"text-amber-500":"text-green-500"}`,children:o.comparedToAvg.isHigher?`ÌèâÍ∑†Î≥¥Îã§ ${Math.round(o.comparedToAvg.percent)}% ÎÜíÏùå`:`ÌèâÍ∑†Î≥¥Îã§ ${Math.abs(Math.round(o.comparedToAvg.percent))}% ÎÇÆÏùå`})]}),o.history.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-dark-600",children:[e.jsx("p",{className:"text-[10px] font-medium text-gray-400 mb-1",children:"Î≥ÄÎèô Í∏∞Î°ù"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:o.history.slice(-3).map((y,c)=>e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"text-gray-400",children:new Date(y.date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})}),e.jsxs("span",{className:"text-gray-600 dark:text-dark-300",children:[y.price.toLocaleString(),"Ïõê"]})]},c))})]})]},o.id)})}),r===0&&a===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"flex items-center justify-center gap-1 text-gray-400 mb-1",children:e.jsx(Re,{size:16})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400",children:"Í∞ÄÍ≤© Î≥ÄÎèô Í∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§"}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-1",children:"Íµ¨ÎèÖ Í∞ÄÍ≤©Ïù¥ Î≥ÄÍ≤ΩÎêòÎ©¥ ÏûêÎèôÏúºÎ°ú Í∏∞Î°ùÎê©ÎãàÎã§"})]}),i.some(o=>o.changePercent>10)&&e.jsx("div",{className:"mt-4 p-3 rounded-xl bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400",children:[e.jsx(ce,{size:14}),e.jsx("span",{className:"text-xs font-medium",children:"10% Ïù¥ÏÉÅ Í∞ÄÍ≤© Ïù∏ÏÉÅÎêú Íµ¨ÎèÖÏù¥ ÏûàÏäµÎãàÎã§"})]})})]})}function lr({subscriptions:t,monthlyIncome:s=0,onUpdateIncome:i,targetRatio:r=10}){const[a,o]=u.useState(!1),[m,y]=u.useState(s||""),[c,h]=u.useState(s);u.useEffect(()=>{h(s),y(s||"")},[s]);const d=t.filter(b=>!b.isPaused).reduce((b,f)=>b+f.cost,0),g=c>0?d/c*100:0,l=g>r,n=g>r*1.5,j=c*(r/100),x=Math.max(0,d-j),v=()=>{const b=Number(m)||0;h(b),i&&i(b),o(!1)},S=()=>{y(c||""),o(!1)},p=()=>g===0?"text-gray-400":g<=r?"text-green-500":g<=r*1.5?"text-amber-500":"text-red-500",N=()=>g===0?"bg-gray-200":g<=r?"bg-green-500":g<=r*1.5?"bg-amber-500":"bg-red-500";return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 text-indigo-500",children:e.jsx(xe,{className:"w-5 h-5"})}),"ÏàòÏûÖ ÎåÄÎπÑ Î∂ÑÏÑù"]}),e.jsx("span",{className:`text-sm font-bold ${p()}`,children:g>0?`${g.toFixed(1)}%`:"-"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Ïõî ÏàòÏûÖ"}),a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:m,onChange:b=>y(b.target.value),className:"flex-1 px-3 py-2.5 rounded-xl border border-indigo-200 dark:border-indigo-800 bg-indigo-50 dark:bg-indigo-900/20 text-gray-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none text-sm font-medium",placeholder:"Ïõî ÏàòÏûÖ ÏûÖÎ†•",min:"0",step:"100000",autoFocus:!0}),e.jsx("button",{onClick:v,className:"p-2.5 rounded-xl bg-indigo-500 text-white hover:bg-indigo-600 transition-colors",children:e.jsx(H,{size:16})}),e.jsx("button",{onClick:S,className:"p-2.5 rounded-xl bg-gray-100 dark:bg-dark-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors",children:e.jsx(W,{size:16})})]}):e.jsxs("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-dark-700/50 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors group",children:[e.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-white",children:c>0?`${(c/1e4).toLocaleString()}ÎßåÏõê`:"ÏàòÏûÖ ÏûÖÎ†•ÌïòÍ∏∞"}),e.jsx(ve,{size:14,className:"text-gray-400 group-hover:text-indigo-500 transition-colors"})]})]}),c>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-[10px] mb-1.5",children:[e.jsx("span",{className:"text-gray-500 dark:text-dark-400",children:"Íµ¨ÎèÖ ÏßÄÏ∂ú ÎπÑÏú®"}),e.jsxs("span",{className:"font-bold text-gray-700 dark:text-dark-200",children:[d.toLocaleString(),"Ïõê / ",c.toLocaleString(),"Ïõê"]})]}),e.jsxs("div",{className:"h-3 bg-gray-100 dark:bg-dark-700 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-gray-400 dark:bg-dark-500 z-10",style:{left:`${Math.min(r,100)}%`}}),e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${N()}`,style:{width:`${Math.min(g,100)}%`}})]}),e.jsxs("div",{className:"flex justify-between text-[10px] mt-1",children:[e.jsx("span",{className:"text-gray-400",children:"0%"}),e.jsxs("span",{className:"text-gray-400 font-medium",children:["Î™©Ìëú ",r,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-gray-50 dark:bg-dark-700/50",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-gray-500 mb-1",children:[e.jsx(Te,{size:12}),e.jsx("span",{className:"text-[10px] font-medium",children:"Í∂åÏû• ÏßÄÏ∂ú"})]}),e.jsxs("p",{className:"text-sm font-bold text-gray-800 dark:text-white",children:[Math.round(j).toLocaleString(),"Ïõê"]})]}),e.jsxs("div",{className:`p-3 rounded-xl ${x>0?"bg-red-50 dark:bg-red-900/20":"bg-green-50 dark:bg-green-900/20"}`,children:[e.jsxs("div",{className:`flex items-center gap-1.5 mb-1 ${x>0?"text-red-500":"text-green-500"}`,children:[x>0?e.jsx(K,{size:12}):e.jsx(te,{size:12}),e.jsx("span",{className:"text-[10px] font-medium",children:x>0?"Ï¥àÍ≥º ÏßÄÏ∂ú":"Ï†àÏïΩ Í∞ÄÎä•"})]}),e.jsx("p",{className:`text-sm font-bold ${x>0?"text-red-600":"text-green-600"}`,children:x>0?`+${Math.round(x).toLocaleString()}Ïõê`:`${Math.round(j-d).toLocaleString()}Ïõê`})]})]}),n&&e.jsx("div",{className:"p-3 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{size:14,className:"text-red-500 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-red-700 dark:text-red-400",children:["Íµ¨ÎèÖ ÏßÄÏ∂úÏù¥ ÏàòÏûÖÏùò ",g.toFixed(1),"%ÏûÖÎãàÎã§"]}),e.jsxs("p",{className:"text-[10px] text-red-600/70 dark:text-red-400/70 mt-0.5",children:["Í∂åÏû• ÎπÑÏú®(",r,"%)ÏùÑ ÌÅ¨Í≤å Ï¥àÍ≥ºÌïòÍ≥† ÏûàÏñ¥Ïöî. Íµ¨ÎèÖ Ï†ïÎ¶¨Î•º Í≥†Î†§Ìï¥Î≥¥ÏÑ∏Ïöî."]})]})]})}),!l&&e.jsx("div",{className:"p-3 rounded-xl bg-green-50 dark:bg-green-900/20",children:e.jsx("p",{className:"text-xs text-green-700 dark:text-green-400 text-center",children:"‚ú® Íµ¨ÎèÖ ÏßÄÏ∂úÏù¥ Ï†ÅÏ†ï ÏàòÏ§ÄÏûÖÎãàÎã§!"})})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(xe,{size:32,className:"mx-auto text-gray-300 dark:text-dark-600 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400",children:"Ïõî ÏàòÏûÖÏùÑ ÏûÖÎ†•ÌïòÎ©¥ ÏßÄÏ∂ú ÎπÑÏú®ÏùÑ Î∂ÑÏÑùÌï¥ÎìúÎ†§Ïöî"})]})]})}const ir=[{name:"Apple One Í∞úÏù∏",price:10900,includes:["Apple Music","Apple TV+","iCloud+ 50GB","Apple Arcade"],savings:"Í∞úÎ≥Ñ Í∞ÄÏûÖ ÎåÄÎπÑ ÏïΩ 30% Ï†àÏïΩ"},{name:"Apple One Í∞ÄÏ°±",price:16900,includes:["Apple Music Í∞ÄÏ°±","Apple TV+","iCloud+ 200GB","Apple Arcade"],savings:"ÏµúÎåÄ 6Î™Ö Í≥µÏú† Í∞ÄÎä•"},{name:"Naver ÌîåÎü¨Ïä§ Î©§Î≤ÑÏã≠",price:4900,includes:["ÎÑ§Ïù¥Î≤ÑÌéòÏù¥ Ìè¨Ïù∏Ìä∏ Ï†ÅÎ¶Ω","ÎÑ§Ïù¥Î≤Ñ ÏõπÌà∞","ÎÑ§Ïù¥Î≤ÑÏãúÎ¶¨Ï¶à","VIBE"],savings:"ÏáºÌïë+ÏΩòÌÖêÏ∏† ÌÜµÌï© ÌòúÌÉù"},{name:"Coupang Î°úÏºìÏôÄÏö∞+Ïø†Ìå°ÌîåÎ†àÏù¥",price:7890,includes:["Î°úÏºìÎ∞∞ÏÜ° Î¨¥Î£å","Ïø†Ìå°ÌîåÎ†àÏù¥ Î¨¥Î£å","Î°úÏºìÌîÑÎ†àÏãú Î¨¥Î£åÎ∞∞ÏÜ°"],savings:"Î∞∞ÏÜ°+OTT ÌÜµÌï© ÌòúÌÉù"}],dr={Netflix:[{name:"Wavve",price:7900,note:"Íµ≠ÎÇ¥ ÏΩòÌÖêÏ∏† Í∞ïÏ†ê"},{name:"Tving",price:7900,note:"tvN, OCN ÎèÖÏ†ê"},{name:"Disney+",price:9900,note:"ÎîîÏ¶àÎãà/ÎßàÎ∏î/Ïä§ÌÉÄÏõåÏ¶à"}],"YouTube Premium":[{name:"Wavve",price:7900,note:"Í¥ëÍ≥† ÏóÜÎäî Íµ≠ÎÇ¥ ÏΩòÌÖêÏ∏†"}],Spotify:[{name:"Melon",price:10900,note:"Íµ≠ÎÇ¥ Ï∞®Ìä∏ Í∞ïÏ†ê"},{name:"Apple Music",price:10900,note:"Í≥†ÏùåÏßà, Í∞ÄÏÇ¨ ÏßÄÏõê"},{name:"VIBE",price:7900,note:"ÎÑ§Ïù¥Î≤Ñ Î©§Î≤ÑÏã≠ Ìè¨Ìï® Í∞ÄÎä•"}],"ChatGPT Plus":[{name:"Claude Pro",price:2e4,note:"Í∏¥ Î¨∏Îß•, ÏΩîÎî© Í∞ïÏ†ê"},{name:"Gemini Advanced",price:19e3,note:"Google Ïó∞Îèô"}],Notion:[{name:"Obsidian",price:0,note:"Î¨¥Î£å Î°úÏª¨ Ï†ÄÏû•"},{name:"Craft",price:5e3,note:"Apple ÏÉùÌÉúÍ≥Ñ ÏµúÏ†ÅÌôî"}]};function or({subscriptions:t}){const[s,i]=u.useState("alternatives"),[r,a]=u.useState([]),o=u.useMemo(()=>{const d=t.filter(n=>!n.isPaused),g={alternatives:[],bundles:[],familyPlans:[],duplicates:[]};d.forEach(n=>{const j=dr[n.name];if(j){const x=j.filter(v=>v.price<n.cost);x.length>0&&g.alternatives.push({current:n,alternatives:x,maxSavings:n.cost-Math.min(...x.map(v=>v.price))})}}),ir.forEach(n=>{const j=d.filter(x=>n.includes.some(v=>x.name.toLowerCase().includes(v.toLowerCase().split(" ")[0])));if(j.length>=2){const x=j.reduce((v,S)=>v+S.cost,0);x>n.price&&g.bundles.push({bundle:n,matchedServices:j,currentTotal:x,savings:x-n.price})}}),d.forEach(n=>{if(n.sharedWith===1&&n.cost>=1e4){const j=n.cost*1.5,x=j/6;x<n.cost*.5&&g.familyPlans.push({subscription:n,familyPrice:j,perPersonSavings:n.cost-x,note:"Í∞ÄÏ°±/ÏπúÍµ¨ÏôÄ Í≥µÏú†Ïãú ÏµúÎåÄ 80% Ï†àÏïΩ"})}});const l={};return d.forEach(n=>{l[n.category]||(l[n.category]=[]),l[n.category].push(n)}),Object.entries(l).forEach(([n,j])=>{j.length>=2&&g.duplicates.push({category:n,subscriptions:j,totalCost:j.reduce((x,v)=>x+v.cost,0),potentialSavings:Math.min(...j.map(x=>x.cost))})}),g},[t]),m=d=>{a([...r,d])},y=o.alternatives.reduce((d,g)=>d+g.maxSavings,0)+o.bundles.reduce((d,g)=>d+g.savings,0)+o.familyPlans.reduce((d,g)=>d+g.perPersonSavings,0);if(!(o.alternatives.length>0||o.bundles.length>0||o.familyPlans.length>0||o.duplicates.length>0))return null;const h=[{key:"alternatives",title:"ÎåÄÏïà ÏÑúÎπÑÏä§",icon:Xe,count:o.alternatives.length},{key:"bundles",title:"Î≤àÎì§ Ï∂îÏ≤ú",icon:Bt,count:o.bundles.length},{key:"familyPlans",title:"Í∞ÄÏ°± ÌîåÎûú",icon:ye,count:o.familyPlans.length},{key:"duplicates",title:"Ï§ëÎ≥µ Íµ¨ÎèÖ",icon:Q,count:o.duplicates.length}].filter(d=>d.count>0);return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-50 dark:bg-amber-900/20 text-amber-500",children:e.jsx(Gt,{className:"w-5 h-5"})}),"Ïä§ÎßàÌä∏ Ï∂îÏ≤ú"]}),y>0&&e.jsxs("span",{className:"text-xs font-bold text-green-500 bg-green-50 dark:bg-green-900/20 px-2.5 py-1 rounded-full",children:["ÏµúÎåÄ ",Math.round(y).toLocaleString(),"Ïõê Ï†àÏïΩ"]})]}),e.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-1",children:h.map(d=>e.jsxs("button",{onClick:()=>i(s===d.key?null:d.key),className:`flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-medium whitespace-nowrap transition-all ${s===d.key?"bg-amber-500 text-white shadow-md":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300 hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:[e.jsx(d.icon,{size:14}),d.title,e.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded-full text-[10px] ${s===d.key?"bg-white/20 text-white":"bg-gray-200 dark:bg-dark-600 text-gray-500 dark:text-dark-400"}`,children:d.count})]},d.key))}),s==="alternatives"&&e.jsx("div",{className:"space-y-3",children:o.alternatives.filter(d=>!r.includes(`alt-${d.current.id}`)).map(d=>e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 dark:bg-dark-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-white",children:d.current.name}),e.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:[d.current.cost.toLocaleString(),"Ïõê/Ïõî"]})]}),e.jsx("button",{onClick:()=>m(`alt-${d.current.id}`),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(W,{size:14})})]}),e.jsx("div",{className:"space-y-2",children:d.alternatives.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white dark:bg-dark-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{size:12,className:"text-green-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-dark-200",children:g.name}),e.jsx("span",{className:"text-[10px] text-gray-400",children:g.note})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-xs font-bold text-green-600",children:[g.price.toLocaleString(),"Ïõê"]}),e.jsxs("span",{className:"text-[10px] text-green-500 ml-1",children:["-",Math.round((d.current.cost-g.price)/d.current.cost*100),"%"]})]})]},g.name))})]},d.current.id))}),s==="bundles"&&e.jsx("div",{className:"space-y-3",children:o.bundles.map((d,g)=>e.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-sm text-amber-700 dark:text-amber-400",children:d.bundle.name}),e.jsxs("span",{className:"text-xs font-bold text-green-600 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded-full",children:["Ïõî ",d.savings.toLocaleString(),"Ïõê Ï†àÏïΩ"]})]}),e.jsx("p",{className:"text-xs text-amber-600/70 dark:text-amber-400/70 mb-3",children:d.bundle.savings}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.bundle.includes.map((l,n)=>e.jsx("span",{className:"text-[10px] px-2 py-1 bg-white/50 dark:bg-dark-800/50 rounded-full text-amber-700 dark:text-amber-300",children:l},n))}),e.jsx("div",{className:"mt-3 pt-3 border-t border-amber-200/50 dark:border-amber-800/30",children:e.jsxs("p",{className:"text-[10px] text-gray-500",children:["ÌòÑÏû¨ ",d.matchedServices.map(l=>l.name).join(", ")," ÏÇ¨Ïö© Ï§ë"]})})]},g))}),s==="familyPlans"&&e.jsx("div",{className:"space-y-3",children:o.familyPlans.map((d,g)=>e.jsxs("div",{className:"p-4 rounded-xl bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ye,{size:14,className:"text-blue-500"}),e.jsxs("span",{className:"font-medium text-sm text-blue-700 dark:text-blue-400",children:[d.subscription.name," Í∞ÄÏ°± ÌîåÎûú"]})]}),e.jsx("p",{className:"text-xs text-blue-600/70 dark:text-blue-400/70 mb-2",children:d.note}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-500",children:["ÌòÑÏû¨: ",d.subscription.cost.toLocaleString(),"Ïõê"]}),e.jsxs("span",{className:"font-bold text-green-600",children:["1Ïù∏Îãπ ÏïΩ ",Math.round(d.familyPrice/6).toLocaleString(),"Ïõê"]})]})]},g))}),s==="duplicates"&&e.jsx("div",{className:"space-y-3",children:o.duplicates.map((d,g)=>e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium text-sm text-red-700 dark:text-red-400",children:[G[d.category]||d.category," Ï§ëÎ≥µ"]}),e.jsxs("span",{className:"text-xs text-red-600",children:["Ïõî ",d.totalCost.toLocaleString(),"Ïõê ÏßÄÏ∂ú"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.subscriptions.map(l=>e.jsxs("span",{className:"text-xs px-2 py-1 bg-white/50 dark:bg-dark-800/50 rounded-lg text-gray-700 dark:text-gray-300",children:[l.name," (",l.cost.toLocaleString(),"Ïõê)"]},l.id))}),e.jsxs("p",{className:"text-[10px] text-red-500/70 mt-2",children:["ÌïòÎÇòÎ°ú ÌÜµÌï©ÌïòÎ©¥ Ïõî ",d.potentialSavings.toLocaleString(),"Ïõê Ï†àÏïΩ Í∞ÄÎä•"]})]},g))})]})}const rt={Netflix:{features:["4K UHD","ÎèôÏãú ÏãúÏ≤≠ 4Î™Ö","Îã§Ïö¥Î°úÎìú","AI Ï∂îÏ≤ú"],pros:["Ïò§Î¶¨ÏßÄÎÑê ÏΩòÌÖêÏ∏†","Í∏ÄÎ°úÎ≤å ÎèôÏãú Í≥µÍ∞ú"],cons:["Í∞ÄÍ≤© Ïù∏ÏÉÅ","Íµ≠ÎÇ¥ ÏΩòÌÖêÏ∏† Î∂ÄÏ°±"],rating:4.5},"Disney+":{features:["4K UHD","ÎèôÏãú ÏãúÏ≤≠ 4Î™Ö","Îã§Ïö¥Î°úÎìú","ÎîîÏ¶àÎãà ÏΩòÌÖêÏ∏†"],pros:["ÎßàÎ∏î/Ïä§ÌÉÄÏõåÏ¶à","Í∞ÄÏ°± ÏΩòÌÖêÏ∏†"],cons:["ÏΩòÌÖêÏ∏† Ïñë Ï†ÅÏùå"],rating:4.2},Wavve:{features:["HD/FHD","ÎèôÏãú ÏãúÏ≤≠ 4Î™Ö","Îã§Ïö¥Î°úÎìú","Ïã§ÏãúÍ∞Ñ TV"],pros:["Íµ≠ÎÇ¥ ÎìúÎùºÎßà/ÏòàÎä•","KBS/MBC/SBS"],cons:["4K ÎØ∏ÏßÄÏõê"],rating:4},Tving:{features:["4K UHD","ÎèôÏãú ÏãúÏ≤≠ 4Î™Ö","Îã§Ïö¥Î°úÎìú","tvN/OCN"],pros:["tvN ÎèÖÏ†ê","Ïä§Ìè¨Ï∏† Ï§ëÍ≥Ñ"],cons:["Í∞ÄÍ≤© ÎÜíÏùå"],rating:4.1},Spotify:{features:["Ïò§ÌîÑÎùºÏù∏ Ïû¨ÏÉù","Í≥†ÏùåÏßà","Î¨¥Ï†úÌïú Ïä§ÌÇµ","AI Ï∂îÏ≤ú"],pros:["Ìï¥Ïô∏ ÏùåÏïÖ Í∞ïÏ†ê","ÌåüÏ∫êÏä§Ìä∏"],cons:["Íµ≠ÎÇ¥ Ï∞®Ìä∏ ÏïΩÌï®"],rating:4.4},Melon:{features:["Ïò§ÌîÑÎùºÏù∏ Ïû¨ÏÉù","Í∞ÄÏÇ¨","Î¨¥Ï†úÌïú","Ïã§ÏãúÍ∞Ñ Ï∞®Ìä∏"],pros:["Íµ≠ÎÇ¥ Ï∞®Ìä∏ 1ÏúÑ","K-POP"],cons:["Ìï¥Ïô∏ ÏùåÏïÖ Î∂ÄÏ°±"],rating:4.2},"Apple Music":{features:["Î¨¥ÏÜêÏã§ Ïò§ÎîîÏò§","Í≥µÍ∞Ñ ÏùåÌñ•","Í∞ÄÏÇ¨","ÎùºÎîîÏò§"],pros:["ÏùåÏßà ÏµúÍ≥†","Apple Ïó∞Îèô"],cons:["Android ÏµúÏ†ÅÌôî Î∂ÄÏ°±"],rating:4.3},"ChatGPT Plus":{features:["GPT-4","Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±","ÌîåÎü¨Í∑∏Ïù∏","Îπ†Î•∏ ÏùëÎãµ"],pros:["Î≤îÏö©ÏÑ±","ÌîåÎü¨Í∑∏Ïù∏ ÏÉùÌÉúÍ≥Ñ"],cons:["Í∞ÄÍ≤© ÎÜíÏùå","Ï†úÌïú ÏûàÏùå"],rating:4.5},Notion:{features:["Î¨¥Ï†úÌïú ÌéòÏù¥ÏßÄ","AI Í∏∞Îä•","ÌòëÏóÖ","ÌÖúÌîåÎ¶ø"],pros:["Ïú†Ïó∞ÏÑ±","ÌÜµÌï© ÏõåÌÅ¨Ïä§ÌéòÏù¥Ïä§"],cons:["Ïò§ÌîÑÎùºÏù∏ ÎØ∏ÏßÄÏõê"],rating:4.6}},cr={OTT:ct,Music:Xt,Work:Yt,Education:Ht,Shopping:Jt};function xr({subscriptions:t}){const[s,i]=u.useState("OTT"),[r,a]=u.useState([]),[o,m]=u.useState(!1),y=u.useMemo(()=>ne.filter(l=>l.category===s),[s]),c=u.useMemo(()=>t.filter(l=>l.category===s&&!l.isPaused).map(l=>l.name),[t,s]),h=l=>{r.includes(l)?a(r.filter(n=>n!==l)):r.length<3&&a([...r,l])},d=[...new Set(ne.map(l=>l.category))],g=u.useMemo(()=>r.length<2?null:r.map(l=>{const n=ne.find(x=>x.name===l),j=rt[l]||{features:["Í∏∞Î≥∏ Í∏∞Îä•"],pros:["-"],cons:["-"],rating:3.5};return{...n,...j,isUserSubscription:c.includes(l)}}),[r,c]);return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-50 dark:bg-purple-900/20 text-purple-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),"Íµ¨ÎèÖ ÎπÑÍµê"]}),r.length>=2&&e.jsxs("button",{onClick:()=>m(!o),className:`text-xs font-medium px-3 py-1.5 rounded-lg transition-colors ${o?"bg-purple-500 text-white":"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400"}`,children:[o?"ÏÑ†ÌÉù Î™®Îìú":"ÎπÑÍµêÌïòÍ∏∞"," (",r.length,"/3)"]})]}),e.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-1",children:d.map(l=>{const n=cr[l]||ct;return e.jsxs("button",{onClick:()=>{i(l),a([]),m(!1)},className:`flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-medium whitespace-nowrap transition-all ${s===l?"text-white shadow-md":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300 hover:bg-gray-200 dark:hover:bg-dark-600"}`,style:s===l?{backgroundColor:U[l]}:{},children:[e.jsx(n,{size:14}),G[l]||l]},l)})}),o?g&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 dark:border-dark-700",children:[e.jsx("th",{className:"text-left py-2 px-1 text-gray-400 font-medium",children:"Ìï≠Î™©"}),g.map(l=>e.jsx("th",{className:"text-center py-2 px-2",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:l.color},children:l.name[0]}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white text-[10px]",children:l.name}),l.isUserSubscription&&e.jsx("span",{className:"text-[8px] text-green-500 font-medium bg-green-50 dark:bg-green-900/20 px-1.5 py-0.5 rounded-full",children:"Íµ¨ÎèÖÏ§ë"})]})},l.name))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-50 dark:border-dark-700",children:[e.jsx("td",{className:"py-2 px-1 text-gray-500",children:"Í∞ÄÍ≤©"}),g.map(l=>e.jsxs("td",{className:"text-center py-2 px-2 font-bold text-gray-900 dark:text-white",children:[l.defaultCost.toLocaleString(),"Ïõê"]},l.name))]}),e.jsxs("tr",{className:"border-b border-gray-50 dark:border-dark-700",children:[e.jsx("td",{className:"py-2 px-1 text-gray-500",children:"ÌèâÏ†ê"}),g.map(l=>e.jsx("td",{className:"text-center py-2 px-2",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 text-amber-500",children:[e.jsx(Ie,{size:10,fill:"currentColor"}),e.jsx("span",{className:"font-medium",children:l.rating})]})},l.name))]}),e.jsxs("tr",{className:"border-b border-gray-50 dark:border-dark-700",children:[e.jsx("td",{className:"py-2 px-1 text-gray-500 align-top",children:"Ïû•Ï†ê"}),g.map(l=>e.jsx("td",{className:"text-center py-2 px-2 align-top",children:e.jsx("div",{className:"space-y-1",children:l.pros.map((n,j)=>e.jsxs("span",{className:"block text-green-600 dark:text-green-400 text-[10px]",children:["‚úì ",n]},j))})},l.name))]}),e.jsxs("tr",{className:"border-b border-gray-50 dark:border-dark-700",children:[e.jsx("td",{className:"py-2 px-1 text-gray-500 align-top",children:"Îã®Ï†ê"}),g.map(l=>e.jsx("td",{className:"text-center py-2 px-2 align-top",children:e.jsx("div",{className:"space-y-1",children:l.cons.map((n,j)=>e.jsxs("span",{className:"block text-red-500 dark:text-red-400 text-[10px]",children:["‚úó ",n]},j))})},l.name))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-1 text-gray-500 align-top",children:"Í∏∞Îä•"}),g.map(l=>e.jsx("td",{className:"text-center py-2 px-2 align-top",children:e.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:l.features.slice(0,3).map((n,j)=>e.jsx("span",{className:"text-[9px] px-1.5 py-0.5 bg-gray-100 dark:bg-dark-700 rounded text-gray-600 dark:text-dark-300",children:n},j))})},l.name))]})]})]})}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(l=>{const n=r.includes(l.name),j=c.includes(l.name),x=rt[l.name];return e.jsxs("button",{onClick:()=>h(l.name),className:`p-3 rounded-xl text-left transition-all ${n?"ring-2 ring-purple-500 bg-purple-50 dark:bg-purple-900/20":"bg-gray-50 dark:bg-dark-700/50 hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:l.color},children:l.name[0]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-white block",children:l.name}),j&&e.jsx("span",{className:"text-[10px] text-green-500 font-medium",children:"Íµ¨ÎèÖ Ï§ë"})]})]}),n&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-purple-500 flex items-center justify-center",children:e.jsx(H,{size:12,className:"text-white"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[l.defaultCost.toLocaleString(),"Ïõê"]}),(x==null?void 0:x.rating)&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-500",children:[e.jsx(Ie,{size:12,fill:"currentColor"}),e.jsx("span",{className:"text-[10px] font-medium",children:x.rating})]})]})]},l.name)})}),!o&&r.length<2&&e.jsx("p",{className:"text-center text-[10px] text-gray-400 mt-4",children:"ÎπÑÍµêÌïòÎ†§Î©¥ 2~3Í∞úÏùò ÏÑúÎπÑÏä§Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"})]})}function mr({subscriptions:t}){const s=u.useMemo(()=>t.filter(m=>m.trialEndDate).map(m=>{const y=m.trialEndDate instanceof Date?m.trialEndDate:new Date(m.trialEndDate),c=kt(y);let h="normal";return c<=0?h="expired":c<=1?h="critical":c<=3&&(h="warning"),{...m,daysLeft:c,endDate:y,urgency:h}}).sort((m,y)=>m.daysLeft-y.daysLeft),[t]),i=s.filter(m=>m.daysLeft>0),r=s.filter(m=>m.daysLeft<=0),a=s.filter(m=>m.urgency==="critical"||m.urgency==="warning");if(s.length===0)return null;const o=m=>{switch(m){case"critical":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-600 dark:text-red-400",badge:"bg-red-500 text-white"};case"warning":return{bg:"bg-amber-50 dark:bg-amber-900/20",border:"border-amber-200 dark:border-amber-800",text:"text-amber-600 dark:text-amber-400",badge:"bg-amber-500 text-white"};case"expired":return{bg:"bg-gray-50 dark:bg-dark-700/50",border:"border-gray-200 dark:border-dark-600",text:"text-gray-500 dark:text-dark-400",badge:"bg-gray-400 text-white"};default:return{bg:"bg-emerald-50 dark:bg-emerald-900/20",border:"border-emerald-200 dark:border-emerald-800",text:"text-emerald-600 dark:text-emerald-400",badge:"bg-emerald-500 text-white"}}};return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(Vt,{size:16,className:"text-purple-500"}),"Î¨¥Î£å Ï≤¥Ìóò"]}),e.jsxs("span",{className:"text-[10px] font-medium text-gray-500 dark:text-dark-400 bg-gray-100 dark:bg-dark-700 px-2 py-1 rounded-full",children:[i.length,"Í∞ú ÏßÑÌñâ Ï§ë"]})]}),a.length>0&&e.jsxs("div",{className:"mb-4 p-3 rounded-xl bg-gradient-to-r from-red-50 to-amber-50 dark:from-red-900/20 dark:to-amber-900/20 border border-red-200 dark:border-red-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-red-500 animate-pulse",children:e.jsx(Kt,{size:12,className:"text-white"})}),e.jsx("span",{className:"text-xs font-bold text-red-700 dark:text-red-400",children:"Ï≤¥Ìóò Ï¢ÖÎ£å ÏûÑÎ∞ï!"})]}),e.jsxs("p",{className:"text-[10px] text-red-600/80 dark:text-red-400/80",children:[a.map(m=>m.name).join(", "),"Ïùò Î¨¥Î£å Ï≤¥ÌóòÏù¥ Í≥ß Ï¢ÖÎ£åÎê©ÎãàÎã§. ÏûêÎèô Í≤∞Ï†úÎ•º ÏõêÏπò ÏïäÏúºÏãúÎ©¥ ÎØ∏Î¶¨ Ìï¥ÏßÄÌïòÏÑ∏Ïöî."]})]}),e.jsxs("div",{className:"space-y-2",children:[i.map(m=>{const y=o(m.urgency);return e.jsxs("div",{className:`p-3 rounded-xl ${y.bg} border ${y.border} transition-all hover:shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:m.customColor||"#6366F1",boxShadow:`0 4px 12px -2px ${m.customColor||"#6366F1"}40`},children:m.name[0]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-white block",children:m.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx(se,{size:10,className:y.text}),e.jsxs("span",{className:`text-[10px] ${y.text}`,children:[m.endDate.toLocaleDateString("ko-KR",{month:"short",day:"numeric"}),"ÍπåÏßÄ"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${y.badge}`,children:m.daysLeft===1?"D-1":`D-${m.daysLeft}`}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx(V,{size:10,className:"text-gray-400"}),e.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-dark-400",children:["Ïù¥ÌõÑ ",m.cost.toLocaleString(),"Ïõê/Ïõî"]})]})]})]}),m.urgency==="critical"&&e.jsx("div",{className:"mt-2 pt-2 border-t border-red-200/50 dark:border-red-800/30",children:e.jsxs("p",{className:"text-[10px] text-red-500 flex items-center gap-1",children:[e.jsx(J,{size:10}),"ÏûêÎèô Í≤∞Ï†ú ÏòàÏ†ï - Ìï¥ÏßÄÌïòÎ†§Î©¥ Ïò§Îäò Ï°∞ÏπòÌïòÏÑ∏Ïöî!"]})})]},m.id)}),r.length>0&&e.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-dark-700",children:[e.jsx("p",{className:"text-[10px] font-medium text-gray-400 mb-2",children:"Ï¢ÖÎ£åÎêú Ï≤¥Ìóò"}),r.map(m=>e.jsx("div",{className:"p-2 rounded-lg bg-gray-50 dark:bg-dark-700/50 opacity-60",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-dark-400",children:m.name}),e.jsxs("span",{className:"text-[10px] text-gray-400",children:[Math.abs(m.daysLeft),"Ïùº Ï†Ñ Ï¢ÖÎ£å"]})]})},m.id))]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100 dark:border-dark-700",children:e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"üí° Ï≤¥Ìóò Ï¢ÖÎ£å 3Ïùº, 1Ïùº Ï†ÑÏóê ÏïåÎ¶ºÏùÑ Î≥¥ÎÇ¥ÎìúÎ†§Ïöî"})})]})}function gr({subscriptions:t}){const[s,i]=u.useState(""),[r,a]=u.useState(!1),[o,m]=u.useState(!1),[y,c]=u.useState([{id:1,name:"ÎÇò",share:100,isMe:!0}]),h=t.filter(p=>p.sharedWith>1&&!p.isPaused),d=h.reduce((p,N)=>p+N.cost,0),g=()=>{const N=`https://subscription-manager.app/share/${Math.random().toString(36).substring(2,10)}`;i(N)},l=async()=>{try{await navigator.clipboard.writeText(s),a(!0),setTimeout(()=>a(!1),2e3)}catch(p){console.error("Failed to copy:",p)}},n=()=>{const p={id:Date.now(),name:`Î©§Î≤Ñ ${y.length}`,share:0,isMe:!1},N=[...y,p];x(N)},j=p=>{if(y.length<=1)return;const N=y.filter(b=>b.id!==p);x(N)},x=p=>{const N=Math.floor(100/p.length),b=100-N*p.length,f=p.map((E,D)=>({...E,share:N+(D===0?b:0)}));c(f)},v=(p,N)=>{const b=y.map(f=>f.id===p?{...f,share:Math.max(0,Math.min(100,N))}:f);c(b)},S=p=>Math.round(d*(p/100));return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-pink-50 dark:bg-pink-900/20 text-pink-500",children:e.jsx(ye,{className:"w-5 h-5"})}),"Í≥µÏú† Í¥ÄÎ¶¨"]}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 bg-gray-100 dark:bg-dark-700 px-2.5 py-1 rounded-full",children:[h.length,"Í∞ú Í≥µÏú† Ï§ë"]})]}),h.length>0&&e.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-gradient-to-br from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-dark-200",children:"Í≥µÏú† Íµ¨ÎèÖ Ï¥ùÏï°"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[d.toLocaleString(),"Ïõê/Ïõî"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(p=>e.jsxs("span",{className:"text-xs px-2 py-1 bg-white/50 dark:bg-dark-800/50 rounded-full text-gray-600 dark:text-dark-300",children:[p.name," (",p.sharedWith,"Î™Ö)"]},p.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:()=>m(!o),className:"w-full flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-dark-700/50 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ot,{size:16,className:"text-pink-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-dark-200",children:"ÎπÑÏö© Î∂ÑÎã¥ Í≥ÑÏÇ∞Í∏∞"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:o?"Ï†ëÍ∏∞":"ÌéºÏπòÍ∏∞"})]}),o&&e.jsxs("div",{className:"mt-3 p-4 rounded-xl border border-gray-200 dark:border-dark-600",children:[e.jsx("div",{className:"space-y-3 mb-4",children:y.map(p=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white ${p.isMe?"bg-pink-500":"bg-gray-400"}`,children:p.name[0]}),e.jsx("input",{type:"text",value:p.name,onChange:N=>{const b=y.map(f=>f.id===p.id?{...f,name:N.target.value}:f);c(b)},className:"flex-1 px-2 py-1.5 rounded-lg border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-800 text-sm"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",value:p.share,onChange:N=>v(p.id,Number(N.target.value)),className:"w-14 px-2 py-1.5 rounded-lg border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-800 text-sm text-center",min:"0",max:"100"}),e.jsx("span",{className:"text-xs text-gray-400",children:"%"})]}),e.jsx("div",{className:"w-20 text-right",children:e.jsxs("span",{className:"text-sm font-bold text-gray-800 dark:text-white",children:[S(p.share).toLocaleString(),"Ïõê"]})}),!p.isMe&&e.jsx("button",{onClick:()=>j(p.id),className:"text-gray-400 hover:text-red-500",children:"‚úï"})]},p.id))}),e.jsxs("button",{onClick:n,className:"w-full py-2 rounded-lg border-2 border-dashed border-gray-200 dark:border-dark-600 text-gray-400 hover:border-pink-400 hover:text-pink-500 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(dt,{size:14}),"Î©§Î≤Ñ Ï∂îÍ∞Ä"]}),y.reduce((p,N)=>p+N.share,0)!==100&&e.jsxs("p",{className:"text-[10px] text-amber-500 text-center mt-2",children:["‚ö†Ô∏è ÎπÑÏú® Ìï©Í≥ÑÍ∞Ä ",y.reduce((p,N)=>p+N.share,0),"%ÏûÖÎãàÎã§ (100%Ïó¨Ïïº Ìï®)"]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-50 dark:bg-dark-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(qt,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-dark-300",children:"Íµ¨ÎèÖ Î™©Î°ù Í≥µÏú†"})]}),s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-800 text-xs text-gray-600 dark:text-dark-300"}),e.jsx("button",{onClick:l,className:`p-2 rounded-lg transition-colors ${r?"bg-green-500 text-white":"bg-gray-200 dark:bg-dark-600 text-gray-600 dark:text-dark-300 hover:bg-gray-300 dark:hover:bg-dark-500"}`,children:r?e.jsx(H,{size:14}):e.jsx(Qt,{size:14})})]}):e.jsxs("button",{onClick:g,className:"w-full py-2.5 bg-pink-500 hover:bg-pink-600 text-white text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(Zt,{size:14}),"Í≥µÏú† ÎßÅÌÅ¨ ÏÉùÏÑ±"]}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-2 text-center",children:"ÎßÅÌÅ¨Î•º ÌÜµÌï¥ Íµ¨ÎèÖ Î™©Î°ùÏùÑ Í≥µÏú†Ìï† Ïàò ÏûàÏäµÎãàÎã§ (ÏùΩÍ∏∞ Ï†ÑÏö©)"})]})]})}function hr({subscriptions:t,onUpdateReceipt:s}){const[i,r]=u.useState(null),[a,o]=u.useState(null),m=u.useRef(null),y=t.filter(l=>l.receipts&&l.receipts.length>0);t.filter(l=>!l.receipts||l.receipts.length===0);const c=async(l,n)=>{var S;const j=(S=l.target.files)==null?void 0:S[0];if(!j)return;if(!["image/jpeg","image/png","image/gif","application/pdf"].includes(j.type)){alert("JPG, PNG, GIF ÎòêÎäî PDF ÌååÏùºÎßå ÏóÖÎ°úÎìú Í∞ÄÎä•Ìï©ÎãàÎã§.");return}if(j.size>5*1024*1024){alert("ÌååÏùº ÌÅ¨Í∏∞Îäî 5MB Ïù¥ÌïòÏó¨Ïïº Ìï©ÎãàÎã§.");return}const v=new FileReader;v.onloadend=()=>{const p={id:`receipt_${Date.now()}`,name:j.name,type:j.type,data:v.result,uploadedAt:new Date().toISOString()};s&&s(n,p)},v.readAsDataURL(j),m.current&&(m.current.value="")},h=l=>{o(l.data)},d=()=>{o(null)},g=l=>l.startsWith("image/")?ts:me;return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-teal-50 dark:bg-teal-900/20 text-teal-500",children:e.jsx(es,{className:"w-5 h-5"})}),"ÏòÅÏàòÏ¶ù Í¥ÄÎ¶¨"]}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 bg-gray-100 dark:bg-dark-700 px-2.5 py-1 rounded-full",children:[y.length,"Í∞ú Ï≤®Î∂ÄÎê®"]})]}),y.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Ï≤®Î∂ÄÎêú ÏòÅÏàòÏ¶ù"}),e.jsx("div",{className:"space-y-2",children:y.map(l=>e.jsxs("div",{className:"p-3 rounded-xl bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-white",children:l.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[l.receipts.length,"Í∞ú ÌååÏùº"]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:l.receipts.map(n=>{const j=g(n.type);return e.jsxs("button",{onClick:()=>h(n),className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-dark-800 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:[e.jsx(j,{size:14,className:"text-teal-500"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-dark-300 max-w-[100px] truncate",children:n.name}),e.jsx(xt,{size:12,className:"text-gray-400"})]},n.id)})})]},l.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2",children:"ÏòÅÏàòÏ¶ù Ï∂îÍ∞Ä"}),e.jsx("div",{className:"space-y-2",children:t.slice(0,5).map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-dark-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:l.customColor||"#6366F1"},children:l.name[0]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-white block",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400",children:[e.jsx(Q,{size:10}),l.cost.toLocaleString(),"Ïõê",l.receipts&&l.receipts.length>0&&e.jsxs("span",{className:"text-teal-500 ml-1",children:["‚Ä¢ ",l.receipts.length,"Í∞ú Ï≤®Î∂Ä"]})]})]})]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{ref:m,type:"file",accept:"image/*,.pdf",onChange:n=>c(n,l.id),className:"hidden"}),e.jsx("div",{className:"p-2 rounded-lg bg-gray-200 dark:bg-dark-600 text-gray-500 dark:text-dark-300 hover:bg-teal-100 dark:hover:bg-teal-900/30 hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:e.jsx(Ge,{size:14})})]})]},l.id))}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-3 text-center",children:"JPG, PNG, GIF, PDF ÏßÄÏõê ‚Ä¢ ÏµúÎåÄ 5MB"})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:d,children:e.jsxs("div",{className:"relative max-w-3xl max-h-[90vh] overflow-auto",children:[e.jsx("button",{onClick:d,className:"absolute top-2 right-2 p-2 bg-white/10 rounded-full text-white hover:bg-white/20 transition-colors",children:e.jsx(W,{size:20})}),a.startsWith("data:image")?e.jsx("img",{src:a,alt:"Receipt preview",className:"max-w-full rounded-lg"}):e.jsxs("div",{className:"bg-white p-8 rounded-lg text-center",children:[e.jsx(me,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"PDF ÎØ∏Î¶¨Î≥¥Í∏∞Îäî ÏßÄÏõêÎêòÏßÄ ÏïäÏäµÎãàÎã§"}),e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"mt-4 inline-block px-4 py-2 bg-teal-500 text-white rounded-lg",children:"Îã§Ïö¥Î°úÎìú"})]})]})})]})}const De={Netflix:{steps:["Netflix Ïï± ÎòêÎäî ÏõπÏÇ¨Ïù¥Ìä∏ Ï†ëÏÜç","ÌîÑÎ°úÌïÑ ÏïÑÏù¥ÏΩò ‚Üí Í≥ÑÏ†ï ÏÑ†ÌÉù","Î©§Î≤ÑÏã≠ Î∞è Í≤∞Ï†ú ‚Üí Î©§Î≤ÑÏã≠ Ìï¥ÏßÄ ÌÅ¥Î¶≠","Ìï¥ÏßÄ ÌôïÏù∏ (Í≤∞Ï†ú Ï£ºÍ∏∞ ÎÅùÍπåÏßÄ Ïù¥Ïö© Í∞ÄÎä•)"],url:"https://www.netflix.com/cancelplan",difficulty:"easy",time:"2Î∂Ñ",notes:"Ìï¥ÏßÄ ÌõÑ 10Í∞úÏõî ÎÇ¥ Ïû¨Í∞ÄÏûÖ Ïãú ÏãúÏ≤≠ Í∏∞Î°ù Ïú†ÏßÄ"},"YouTube Premium":{steps:["YouTube Ïï±/Ïõπ ‚Üí ÌîÑÎ°úÌïÑ ÏïÑÏù¥ÏΩò","Ïú†Î£å Î©§Î≤ÑÏã≠ ÌÅ¥Î¶≠","Î©§Î≤ÑÏã≠ Í¥ÄÎ¶¨ ‚Üí ÎπÑÌôúÏÑ±Ìôî ÌÅ¥Î¶≠","Ìï¥ÏßÄ Ïù¥Ïú† ÏÑ†ÌÉù ÌõÑ ÌôïÏù∏"],url:"https://www.youtube.com/paid_memberships",difficulty:"easy",time:"2Î∂Ñ",notes:"Google Play Íµ¨ÎèÖÏù∏ Í≤ΩÏö∞ Play StoreÏóêÏÑú Ìï¥ÏßÄ"},"Disney+":{steps:["Disney+ Ïï±/Ïõπ ‚Üí ÌîÑÎ°úÌïÑ ÏïÑÏù¥ÏΩò","Í≥ÑÏ†ï ‚Üí Íµ¨ÎèÖ ÏÑ†ÌÉù","Disney+ Íµ¨ÎèÖ Ìï¥ÏßÄ ÌÅ¥Î¶≠","Ìï¥ÏßÄ ÌôïÏù∏"],url:"https://www.disneyplus.com/account/subscription",difficulty:"easy",time:"2Î∂Ñ",notes:""},Spotify:{steps:["Spotify ÏõπÏÇ¨Ïù¥Ìä∏ Ï†ëÏÜç (Ïï± Î∂àÍ∞Ä)","ÌîÑÎ°úÌïÑ ‚Üí Í≥ÑÏ†ï ‚Üí Íµ¨ÎèÖ Í¥ÄÎ¶¨","ÌîåÎûú Î≥ÄÍ≤Ω ‚Üí Spotify FreeÎ°ú Îã§Ïö¥Í∑∏Î†àÏù¥Îìú","Ìï¥ÏßÄ ÌôïÏù∏"],url:"https://www.spotify.com/account/subscription/",difficulty:"medium",time:"3Î∂Ñ",notes:"Ïï±ÏóêÏÑúÎäî Ìï¥ÏßÄ Î∂àÍ∞Ä, Î∞òÎìúÏãú ÏõπÏóêÏÑú ÏßÑÌñâ"},"ChatGPT Plus":{steps:["chat.openai.com Ï†ëÏÜç","Ï¢åÏ∏° ÌïòÎã® ÌîÑÎ°úÌïÑ ‚Üí Settings","Subscription ‚Üí Manage my subscription","Cancel plan ÌÅ¥Î¶≠"],url:"https://chat.openai.com/",difficulty:"easy",time:"2Î∂Ñ",notes:"API ÌÅ¨Î†àÎîßÏùÄ Î≥ÑÎèÑ Í¥ÄÎ¶¨"},"Coupang Wow":{steps:["Ïø†Ìå° Ïï± ‚Üí ÎßàÏù¥Ïø†Ìå°","Î°úÏºìÏôÄÏö∞ ÌöåÏõê ÌÅ¥Î¶≠","ÏôÄÏö∞ Î©§Î≤ÑÏã≠ Ìï¥ÏßÄÌïòÍ∏∞","Ìï¥ÏßÄ ÏÇ¨Ïú† ÏÑ†ÌÉù ÌõÑ ÌôïÏù∏"],url:"https://www.coupang.com/np/coupangWow",difficulty:"medium",time:"3Î∂Ñ",notes:"Ìï¥ÏßÄ Ïãú Ï¶âÏãú ÌòúÌÉù Ï¢ÖÎ£å, Ïû¨Í∞ÄÏûÖ Î∂àÏù¥Ïùµ ÏóÜÏùå"},Melon:{steps:["Î©úÎ°† Ïï±/Ïõπ ‚Üí ÎßàÏù¥Î©úÎ°†","Ïù¥Ïö©Í∂å ‚Üí Ïù¥Ïö©Í∂å Í¥ÄÎ¶¨","ÏûêÎèôÍ≤∞Ï†ú Ìï¥ÏßÄ ÎòêÎäî Ïù¥Ïö©Í∂å Ìï¥ÏßÄ","Ìï¥ÏßÄ ÌôïÏù∏"],url:"https://www.melon.com/mymusic/ticket/web/mymusicticket_list.htm",difficulty:"easy",time:"2Î∂Ñ",notes:"ÏûêÎèôÍ≤∞Ï†ú Ìï¥ÏßÄÏôÄ Ïù¥Ïö©Í∂å Ìï¥ÏßÄÎäî Î≥ÑÍ∞ú"},Wavve:{steps:["Wavve Ïï±/Ïõπ ‚Üí ÎßàÏù¥ÌéòÏù¥ÏßÄ","Íµ¨ÎèÖ Í¥ÄÎ¶¨ ÏÑ†ÌÉù","Ïù¥Ïö©Í∂å Ìï¥ÏßÄÌïòÍ∏∞ ÌÅ¥Î¶≠","Ìï¥ÏßÄ ÌôïÏù∏"],url:"https://www.wavve.com/my/subscription",difficulty:"easy",time:"2Î∂Ñ",notes:""},Tving:{steps:["Tving Ïï±/Ïõπ ‚Üí ÏÑ§Ï†ï","Íµ¨ÎèÖ Í¥ÄÎ¶¨ ÏÑ†ÌÉù","Íµ¨ÎèÖ Ìï¥ÏßÄÌïòÍ∏∞ ÌÅ¥Î¶≠","Ìï¥ÏßÄ ÏÇ¨Ïú† ÏÑ†ÌÉù ÌõÑ ÌôïÏù∏"],url:"https://www.tving.com/account/subscription",difficulty:"easy",time:"2Î∂Ñ",notes:""},Notion:{steps:["Notion Ïõπ ‚Üí Settings & Members","Plans ‚Üí Downgrade","Free ÌîåÎûú ÏÑ†ÌÉù","ÌôïÏù∏"],url:"https://www.notion.so/settings",difficulty:"easy",time:"2Î∂Ñ",notes:"Îã§Ïö¥Í∑∏Î†àÏù¥Îìú Ïãú Î∏îÎ°ù Ï†úÌïú Ï†ÅÏö©"}};function ur({subscriptions:t}){const[s,i]=u.useState(""),[r,a]=u.useState(null),o=u.useMemo(()=>t.filter(c=>De[c.name]).map(c=>({subscription:c,guide:De[c.name]})),[t]),m=u.useMemo(()=>{if(!s)return o;const c=s.toLowerCase();return o.filter(h=>h.subscription.name.toLowerCase().includes(c))},[o,s]);Object.entries(De).map(([c,h])=>({name:c,guide:h}));const y=c=>{switch(c){case"easy":return{text:"Ïâ¨ÏõÄ",color:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400"};case"medium":return{text:"Î≥¥ÌÜµ",color:"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400"};case"hard":return{text:"Î≥µÏû°",color:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"};default:return{text:"Ïâ¨ÏõÄ",color:"bg-gray-100 text-gray-600"}}};return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-50 dark:bg-orange-900/20 text-orange-500",children:e.jsx(Ve,{className:"w-5 h-5"})}),"Ìï¥ÏßÄ Í∞ÄÏù¥Îìú"]}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 bg-gray-100 dark:bg-dark-700 px-2.5 py-1 rounded-full",children:[o.length,"Í∞ú Í∞ÄÏù¥Îìú"]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ze,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:s,onChange:c=>i(c.target.value),placeholder:"ÏÑúÎπÑÏä§ Í≤ÄÏÉâ...",className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700/50 text-sm text-gray-800 dark:text-white focus:ring-2 focus:ring-orange-500 outline-none"})]}),e.jsx("div",{className:"space-y-2",children:m.length>0?m.map(({subscription:c,guide:h})=>{const d=y(h.difficulty),g=r===c.id;return e.jsxs("div",{className:"rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>a(g?null:c.id),className:`w-full flex items-center justify-between p-4 transition-colors ${g?"bg-orange-50 dark:bg-orange-900/20":"bg-gray-50 dark:bg-dark-700/50 hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:c.customColor||U[c.category]||"#6366F1"},children:c.name[0]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-white block",children:c.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:`text-[10px] font-medium px-2 py-0.5 rounded-full ${d.color}`,children:d.text}),e.jsxs("span",{className:"text-[10px] text-gray-400",children:["ÏïΩ ",h.time]})]})]})]}),e.jsx(mt,{size:16,className:`text-gray-400 transition-transform ${g?"rotate-90":""}`})]}),g&&e.jsxs("div",{className:"p-4 bg-orange-50/50 dark:bg-orange-900/10 border-t border-orange-100 dark:border-orange-800/30",children:[e.jsx("div",{className:"space-y-3 mb-4",children:h.steps.map((l,n)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-orange-500 text-white text-xs font-bold flex items-center justify-center flex-shrink-0",children:n+1}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-dark-200 pt-0.5",children:l})]},n))}),h.notes&&e.jsx("div",{className:"p-3 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800/50 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{size:14,className:"text-amber-500 mt-0.5"}),e.jsx("span",{className:"text-xs text-amber-700 dark:text-amber-400",children:h.notes})]})}),e.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 py-2.5 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg transition-colors",children:[e.jsx(Ue,{size:14}),"Ìï¥ÏßÄ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô"]})]})]},c.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ve,{size:32,className:"mx-auto text-gray-300 dark:text-dark-600 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:s?"Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§":"Ìï¥ÏßÄ Í∞ÄÏù¥ÎìúÍ∞Ä ÌïÑÏöîÌïú Íµ¨ÎèÖÏù¥ ÏóÜÏäµÎãàÎã§"})]})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-dark-700",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Ìï¥ÏßÄ Ï†Ñ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏"}),e.jsx("div",{className:"space-y-2",children:["Í≤∞Ï†ú Ï£ºÍ∏∞ ÌôïÏù∏ (Ìï¥ÏßÄ ÌõÑÏóêÎèÑ Ï£ºÍ∏∞ ÎÅùÍπåÏßÄ Ïù¥Ïö© Í∞ÄÎä•)","Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞ Î∞±ÏóÖ ÌïÑÏöî Ïó¨Î∂Ä ÌôïÏù∏","Ïó∞Í≤∞Îêú Îã§Î•∏ ÏÑúÎπÑÏä§ ÏòÅÌñ• ÌôïÏù∏","Ïû¨Í∞ÄÏûÖ Ïãú Î∂àÏù¥Ïùµ Ïó¨Î∂Ä ÌôïÏù∏"].map((c,h)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-dark-300",children:[e.jsx(Me,{size:12,className:"text-green-500 flex-shrink-0"}),c]},h))})]})]})}function pr({subscriptions:t,onEdit:s}){var l;const[i,r]=u.useState(null),[a,o]=u.useState(!1),m=u.useMemo(()=>t.filter(n=>!n.isPaused&&n.daysLeft<=7&&n.daysLeft>=0).sort((n,j)=>n.daysLeft-j.daysLeft).slice(0,5),[t]),y=m.slice(0,3),c=u.useMemo(()=>m.reduce((n,j)=>n+(j.cost||0),0),[m]),h=m.filter(n=>n.daysLeft===0);if(t.length===0)return null;const d=n=>n===0?"Ïò§Îäò":n===1?"ÎÇ¥Ïùº":`${n}Ïùº ÌõÑ`,g=n=>n===0?"bg-red-500 text-white":n<=1?"bg-orange-500 text-white":n<=3?"bg-yellow-500 text-white":"bg-blue-500 text-white";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`fixed bottom-24 right-6 z-30 transition-all duration-300 ${a?"w-80":"w-auto"}`,children:[!a&&e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white px-4 py-3 rounded-2xl shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[e.jsx(gt,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:h.length>0?`Ïò§Îäò Í≤∞Ï†ú ${h.length}Í±¥`:m.length>0?`Ïù¥Î≤à Ï£º ${m.length}Í±¥`:"ÏòàÏ†ï ÏóÜÏùå"}),c>0&&e.jsxs("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:["‚Ç©",c.toLocaleString()]})]}),a&&e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-dark-700 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary-500 to-primary-600 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{size:18}),e.jsx("span",{className:"font-bold text-sm",children:"Îã§Í∞ÄÏò§Îäî Í≤∞Ï†ú"})]}),e.jsx("button",{onClick:()=>o(!1),className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(W,{size:16})})]}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-dark-700/50 border-b border-gray-100 dark:border-dark-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-dark-400",children:"Ïù¥Î≤à Ï£º ÏòàÏ†ï"}),e.jsxs("span",{className:"font-bold text-primary-600 dark:text-primary-400",children:["‚Ç©",c.toLocaleString()]})]})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:y.length===0?e.jsx("div",{className:"p-6 text-center text-gray-400 dark:text-dark-500 text-sm",children:"Ïù¥Î≤à Ï£º ÏòàÏ†ïÎêú Í≤∞Ï†úÍ∞Ä ÏóÜÏäµÎãàÎã§"}):y.map(n=>{var j;return e.jsxs("button",{onClick:()=>r(n),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors border-b border-gray-50 dark:border-dark-700 last:border-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:n.color||"#6366F1"},children:((j=n.name)==null?void 0:j.charAt(0))||"?"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-white",children:n.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["‚Ç©",(n.cost||0).toLocaleString(),"/Ïõî"]})]}),e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full ${g(n.daysLeft)}`,children:d(n.daysLeft)}),e.jsx(mt,{size:14,className:"text-gray-300"})]},n.id)})}),m.length>3&&e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 text-center",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["+",m.length-3,"Í∞ú Îçî ÏûàÏùå"]})})]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl max-w-sm w-full shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 text-white",style:{backgroundColor:i.color||"#6366F1"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold",children:((l=i.name)==null?void 0:l.charAt(0))||"?"})}),e.jsx("button",{onClick:()=>r(null),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:e.jsx(W,{size:20})})]}),e.jsx("h3",{className:"text-xl font-bold",children:i.name}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:i.category})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-dark-700 rounded-2xl",children:[e.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/30 rounded-xl",children:e.jsx(V,{className:"text-primary-600 dark:text-primary-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:"Ïõî Í≤∞Ï†úÏï°"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["‚Ç©",(i.cost||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-dark-700 rounded-2xl",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-xl",children:e.jsx(se,{className:"text-orange-600 dark:text-orange-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:"Îã§Ïùå Í≤∞Ï†úÏùº"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:i.daysLeft===0?"Ïò§Îäò!":`${i.daysLeft}Ïùº ÌõÑ (${i.billingDay}Ïùº)`})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-dark-700 rounded-2xl",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:e.jsx(pe,{className:"text-green-600 dark:text-green-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400",children:"Ïó∞Í∞Ñ ÎπÑÏö©"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:["‚Ç©",((i.cost||0)*12).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{r(null),s==null||s(i)},className:"flex-1 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-xl transition-colors",children:"ÏàòÏ†ïÌïòÍ∏∞"}),e.jsx("button",{onClick:()=>r(null),className:"flex-1 py-3 bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 text-gray-700 dark:text-dark-200 font-medium rounded-xl transition-colors",children:"Îã´Í∏∞"})]})]})]})})]})}const br="https://api.exchangerate-api.com/v4/latest/KRW";function fr({subscriptions:t}){const[s,i]=u.useState(ee),[r,a]=u.useState(null),[o,m]=u.useState(!1),[y,c]=u.useState(null),[h,d]=u.useState(!1),g=async()=>{var x,v,S;m(!0),c(null);try{const p=w.getCurrencyRates();if(p){i(p.rates),a(new Date(p.updatedAt)),m(!1);return}const N=await fetch(br);if(!N.ok)throw new Error("Failed to fetch rates");const b=await N.json(),f={KRW:1,USD:(x=b.rates)!=null&&x.USD?Math.round(1/b.rates.USD):ee.USD,EUR:(v=b.rates)!=null&&v.EUR?Math.round(1/b.rates.EUR):ee.EUR,JPY:(S=b.rates)!=null&&S.JPY?Math.round(1/b.rates.JPY*100)/100:ee.JPY};i(f),a(new Date),w.saveCurrencyRates(f)}catch(p){console.error("Failed to fetch exchange rates:",p),c("ÌôòÏú® Ï†ïÎ≥¥Î•º Í∞ÄÏ†∏Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§"),i(ee)}finally{m(!1)}};u.useEffect(()=>{g()},[]);const l=u.useMemo(()=>t.filter(x=>x.currency&&x.currency!=="KRW"&&!x.isPaused),[t]),n=u.useMemo(()=>{const x={};let v=0,S={USD:0,EUR:0,JPY:0};return l.forEach(p=>{const N=p.currency||"USD",b=s[N]||ee[N],f=(p.cost||0)*b;v+=f,S[N]=(S[N]||0)+(p.cost||0),x[N]||(x[N]={count:0,total:0,krwTotal:0}),x[N].count++,x[N].total+=p.cost||0,x[N].krwTotal+=f}),{byCategory:x,totalKRW:v,totalOriginal:S}},[l,s]),j=x=>{const v=ee[x],S=s[x];return!v||!S?0:((S-v)/v*100).toFixed(1)};return l.length===0?null:e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-50 dark:bg-green-900/20 text-green-500",children:e.jsx(ss,{className:"w-5 h-5"})}),"ÌôòÏú® Î≥ÄÌôò"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:g,disabled:o,className:`p-2 rounded-lg transition-all ${o?"bg-gray-100 dark:bg-dark-700 text-gray-400":"bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 text-gray-600 dark:text-dark-300"}`,children:e.jsx(Ae,{size:16,className:o?"animate-spin":""})})})]}),y&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-xl flex items-center gap-2 text-red-600 dark:text-red-400 text-xs",children:[e.jsx(ce,{size:14}),y]}),r&&e.jsxs("p",{className:"text-[10px] text-gray-400 mb-4",children:["ÎßàÏßÄÎßâ ÏóÖÎç∞Ïù¥Ìä∏: ",r.toLocaleString("ko-KR")]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:["USD","EUR","JPY"].map(x=>{var S,p;const v=parseFloat(j(x));return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl text-center",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-dark-400 mb-1",children:[(S=Oe[x])==null?void 0:S.symbol," 1 ",x]}),e.jsxs("p",{className:"font-bold text-gray-800 dark:text-white",children:["‚Ç©",(p=s[x])==null?void 0:p.toLocaleString()]}),v!==0&&e.jsxs("p",{className:`text-[10px] flex items-center justify-center gap-0.5 mt-1 ${v>0?"text-red-500":"text-green-500"}`,children:[v>0?e.jsx(K,{size:10}):e.jsx(te,{size:10}),Math.abs(v),"%"]})]},x)})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600/70 dark:text-green-400/70",children:"Ìï¥Ïô∏ Íµ¨ÎèÖ Ï¥ùÏï° (ÏõêÌôî ÌôòÏÇ∞)"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:["‚Ç©",Math.round(n.totalKRW).toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-white/50 dark:bg-dark-800/50 rounded-xl",children:e.jsx(Q,{className:"text-green-500",size:24})})]})}),e.jsx("button",{onClick:()=>d(!h),className:"w-full text-left",children:e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-dark-300",children:["Ìï¥Ïô∏ Í≤∞Ï†ú Íµ¨ÎèÖ ",l.length,"Í∞ú"]}),e.jsx("span",{className:"text-xs text-primary-500",children:h?"Ï†ëÍ∏∞":"ÌéºÏπòÍ∏∞"})]})}),h&&e.jsx("div",{className:"space-y-2 mt-2",children:l.map(x=>{var N,b;const v=x.currency||"USD",S=s[v]||ee[v],p=Math.round((x.cost||0)*S);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:x.color||"#6366F1"},children:(N=x.name)==null?void 0:N.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:x.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[(b=Oe[v])==null?void 0:b.symbol,x.cost," ",v]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-800 dark:text-white",children:["‚Ç©",p.toLocaleString()]}),e.jsxs("p",{className:"text-[10px] text-gray-400",children:["@",S.toLocaleString()]})]})]},x.id)})})]})}function yr({subscriptions:t}){const{user:s,isDemo:i}=Z(),r=i?"demo_user":s==null?void 0:s.uid,[a,o]=u.useState(null),[m,y]=u.useState(()=>w.getUsageRecords(r)),[c,h]=u.useState([]),d=new Date().toISOString().split("T")[0],g=u.useMemo(()=>t.filter(p=>!p.isPaused).map(p=>{var A;const N=m[p.id]||[],b=N.filter(O=>{const T=new Date(O),L=new Date;return L.setDate(L.getDate()-30),T>=L}),f=((A=vt[p.usageFrequency||"weekly"])==null?void 0:A.value)||8,E=b.length,D=Math.min(100,Math.round(E/f*100));let k="normal";D<30?k="low":D<60?k="medium":D>=80&&(k="high");const M=N.length>0?new Date(N[N.length-1]):null,I=M?Math.floor((new Date-M)/(1e3*60*60*24)):null;return{...p,usageScore:D,status:k,last30DaysCount:b.length,lastUsed:M,daysSinceLastUse:I,records:b,checkedToday:N.includes(d)||c.includes(p.id)}}).sort((p,N)=>p.usageScore-N.usageScore),[t,m,c,d]),l=g.filter(p=>p.status==="low"||p.daysSinceLastUse!==null&&p.daysSinceLastUse>30),n=u.useMemo(()=>l.reduce((p,N)=>p+(N.cost||0),0),[l]),j=u.useCallback(p=>{w.recordUsage(r,p,d),y(w.getUsageRecords(r)),h(N=>[...N,p])},[r,d]),x=p=>{const N=[],b=new Date;for(let f=11;f>=0;f--){const E=[];for(let D=6;D>=0;D--){const k=new Date(b);k.setDate(k.getDate()-(f*7+D));const M=k.toISOString().split("T")[0];E.push({date:M,active:p.includes(M)})}N.push(E)}return N},v=p=>p>=80?"text-green-500 bg-green-50 dark:bg-green-900/20":p>=60?"text-blue-500 bg-blue-50 dark:bg-blue-900/20":p>=30?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"text-red-500 bg-red-50 dark:bg-red-900/20",S=p=>{switch(p){case"high":return"ÌôúÎ∞ú";case"medium":return"Î≥¥ÌÜµ";case"low":return"Ï†ÄÏ°∞";default:return"Î≥¥ÌÜµ"}};return t.filter(p=>!p.isPaused).length===0?null:e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-50 dark:bg-purple-900/20 text-purple-500",children:e.jsx(rs,{className:"w-5 h-5"})}),"ÏÇ¨Ïö© ÎπàÎèÑ Ï∂îÏ†Å"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["Ïò§Îäò ",d]})]}),l.length>0&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(J,{size:16,className:"text-red-500"}),e.jsx("span",{className:"font-bold text-sm text-red-700 dark:text-red-400",children:"Ï†ÄÏÇ¨Ïö© Íµ¨ÎèÖ Í∞êÏßÄ"})]}),e.jsxs("p",{className:"text-xs text-red-600/70 dark:text-red-400/70 mb-2",children:[l.length,"Í∞ú Íµ¨ÎèÖÏù¥ Í±∞Ïùò ÏÇ¨Ïö©ÎêòÏßÄ ÏïäÍ≥† ÏûàÏäµÎãàÎã§"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.slice(0,3).map(p=>e.jsx("span",{className:"text-[10px] px-2 py-1 bg-white/50 dark:bg-dark-800/50 rounded-full text-red-600 dark:text-red-400",children:p.name},p.id)),l.length>3&&e.jsxs("span",{className:"text-[10px] text-red-500",children:["+",l.length-3,"Í∞ú"]})]}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:["Ïõî ‚Ç©",n.toLocaleString()," ÎÇ≠ÎπÑ?"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-dark-300 mb-3",children:"Ïò§Îäò ÏÇ¨Ïö©Ìïú ÏÑúÎπÑÏä§ Ï≤¥ÌÅ¨ÌïòÍ∏∞"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.slice(0,6).map(p=>e.jsxs("button",{onClick:()=>!p.checkedToday&&j(p.id),disabled:p.checkedToday,className:`flex items-center gap-2 px-3 py-2 rounded-xl transition-all ${p.checkedToday?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300 hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:[p.checkedToday?e.jsx(H,{size:14}):e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p.color||"#6366F1"}}),e.jsx("span",{className:"text-xs font-medium",children:p.name})]},p.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-dark-300 mb-2",children:"Íµ¨ÎèÖÎ≥Ñ ÏÇ¨Ïö© ÌòÑÌô©"}),g.map(p=>{var N;return e.jsxs("div",{className:"rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>o(a===p.id?null:p.id),className:"w-full flex items-center gap-3 p-3 bg-gray-50 dark:bg-dark-700/50 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:p.color||"#6366F1"},children:(N=p.name)==null?void 0:N.charAt(0)}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:p.name}),e.jsx("p",{className:"text-xs text-gray-400",children:p.lastUsed?p.daysSinceLastUse===0?"Ïò§Îäò ÏÇ¨Ïö©Ìï®":`${p.daysSinceLastUse}Ïùº Ï†Ñ ÏÇ¨Ïö©`:"ÏÇ¨Ïö© Í∏∞Î°ù ÏóÜÏùå"})]}),e.jsxs("div",{className:`px-2 py-1 rounded-lg text-xs font-bold ${v(p.usageScore)}`,children:[p.usageScore,"Ï†ê"]}),e.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full ${p.status==="high"?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":p.status==="medium"?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":p.status==="low"?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-600 dark:bg-dark-600 dark:text-dark-300"}`,children:S(p.status)}),a===p.id?e.jsx(ge,{size:14,className:"text-gray-400"}):e.jsx(ie,{size:14,className:"text-gray-400"})]}),a===p.id&&e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-dark-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mb-3",children:"ÏµúÍ∑º 12Ï£º ÏÇ¨Ïö© Í∏∞Î°ù"}),e.jsx("div",{className:"flex gap-1",children:x(m[p.id]||[]).map((b,f)=>e.jsx("div",{className:"flex flex-col gap-1",children:b.map((E,D)=>e.jsx("div",{className:`w-3 h-3 rounded-sm ${E.active?"bg-green-500":"bg-gray-200 dark:bg-dark-600"}`,title:E.date},D))},f))}),e.jsxs("div",{className:"flex items-center justify-between mt-3 text-[10px] text-gray-400",children:[e.jsx("span",{children:"12Ï£º Ï†Ñ"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Ï†ÅÏùå"}),e.jsxs("div",{className:"flex gap-0.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-sm bg-gray-200 dark:bg-dark-600"}),e.jsx("div",{className:"w-2 h-2 rounded-sm bg-green-300"}),e.jsx("div",{className:"w-2 h-2 rounded-sm bg-green-500"})]}),e.jsx("span",{children:"ÎßéÏùå"})]}),e.jsx("span",{children:"Ïù¥Î≤à Ï£º"})]})]})]},p.id)})]})]})}function jr({subscriptions:t,totalMonthlyCost:s}){const{user:i,isDemo:r}=Z(),a=r?"demo_user":i==null?void 0:i.uid,[o,m]=u.useState(()=>w.getGoals(a)),[y,c]=u.useState(()=>w.getBadges(a)),[h,d]=u.useState(()=>w.getChallenges(a)),[g,l]=u.useState(()=>w.getUserStats(a)),[n,j]=u.useState(!1),[x,v]=u.useState({name:"",targetAmount:"",description:""}),[S,p]=u.useState("goals"),[N,b]=u.useState(null),f=u.useRef(!0),E=u.useMemo(()=>t.filter(P=>P.isPaused).reduce((P,C)=>P+(C.cost||0),0),[t]);u.useEffect(()=>{if(f.current){f.current=!1;return}const $=t.filter(_=>!_.isPaused).length,P=t.filter(_=>_.paymentMethodId).length,C={totalSubscriptions:t.length,activeSubscriptions:$,totalSaved:E,linkedPaymentMethods:P};l(_=>({..._,...C})),w.saveUserStats(a,C)},[t.length,E,a]),u.useEffect(()=>{if(!g||!g.totalSubscriptions)return;let $=!1;Object.values(Ze).forEach(P=>{y.find(C=>C.id===P.id)||P.condition(g)&&(w.addBadge(a,P.id),$||(b(P),setTimeout(()=>b(null),3e3),$=!0))}),$&&c(w.getBadges(a))},[g.totalSubscriptions,g.activeSubscriptions,a]);const{xp:D,level:k,progress:M}=u.useMemo(()=>{const $=y.length*100,P=h.filter(Y=>Y.completed).reduce((Y,de)=>{var X;return Y+(((X=et[de.challengeId])==null?void 0:X.xp)||0)},0),C=$+P,_=Math.floor(C/500)+1,B=C%500/500*100;return{xp:C,level:_,progress:B}},[y,h]),I=u.useCallback(()=>{if(!x.name||!x.targetAmount)return;const $=w.addGoal(a,{name:x.name,targetAmount:parseInt(x.targetAmount),description:x.description,type:"savings"});m([...o,$]),v({name:"",targetAmount:"",description:""}),j(!1)},[x,o,a]),A=u.useCallback($=>{w.deleteGoal(a,$),m(o.filter(P=>P.id!==$))},[o,a]),O=u.useCallback($=>{w.startChallenge(a,$),d(w.getChallenges(a))},[a]),T=$=>{const P=Math.min(100,E/$.targetAmount*100);return Math.round(P)},L=[{key:"goals",label:"Î™©Ìëú",icon:Te},{key:"badges",label:"Î∞∞ÏßÄ",icon:as},{key:"challenges",label:"Ï±åÎ¶∞ÏßÄ",icon:Ke}];return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 text-yellow-500",children:e.jsx(Te,{className:"w-5 h-5"})}),"Î™©Ìëú & ÏÑ±Ïû•"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full text-white",children:[e.jsx(Ie,{size:12,fill:"white"}),e.jsxs("span",{className:"text-xs font-bold",children:["Lv.",k]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-[10px] text-gray-400",children:[D," XP"]})})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500",style:{width:`${M}%`}})}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:["Îã§Ïùå Î†àÎ≤®ÍπåÏßÄ ",500-D%500," XP"]})]}),e.jsx("div",{className:"flex gap-2 mb-4",children:L.map($=>e.jsxs("button",{onClick:()=>p($.key),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-xs font-medium transition-all ${S===$.key?"bg-primary-500 text-white shadow-md":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300"}`,children:[e.jsx($.icon,{size:14}),$.label]},$.key))}),S==="goals"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600/70",children:"Ï¥ù Ï†àÏïΩ Í∏àÏï°"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:["‚Ç©",E.toLocaleString()]})]}),e.jsx(K,{className:"text-green-500",size:32})]})}),o.map($=>{const P=T($);return e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-dark-700/50 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-white",children:$.name}),e.jsx("p",{className:"text-xs text-gray-400",children:$.description})]}),e.jsx("button",{onClick:()=>A($.id),className:"p-1 text-gray-400 hover:text-red-500",children:e.jsx(W,{size:14})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-dark-600 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${P>=100?"bg-gradient-to-r from-green-400 to-emerald-500":"bg-gradient-to-r from-primary-400 to-primary-600"}`,style:{width:`${P}%`}})}),e.jsxs("span",{className:"text-xs font-bold text-gray-600 dark:text-dark-300 min-w-[40px] text-right",children:[P,"%"]})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-2",children:["Î™©Ìëú: ‚Ç©",$.targetAmount.toLocaleString()," / ÌòÑÏû¨: ‚Ç©",E.toLocaleString()]})]},$.id)}),e.jsxs("button",{onClick:()=>j(!0),className:"w-full p-4 border-2 border-dashed border-gray-200 dark:border-dark-600 rounded-2xl text-gray-400 hover:text-primary-500 hover:border-primary-300 transition-all flex items-center justify-center gap-2",children:[e.jsx(le,{size:16}),e.jsx("span",{className:"text-sm",children:"ÏÉà Î™©Ìëú Ï∂îÍ∞Ä"})]})]}),S==="badges"&&e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.values(Ze).map($=>{const P=y.find(C=>C.id===$.id);return e.jsxs("div",{className:`p-4 rounded-2xl text-center transition-all ${P?"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-2 border-yellow-200 dark:border-yellow-800":"bg-gray-100 dark:bg-dark-700 opacity-50"}`,children:[e.jsx("span",{className:"text-3xl",children:$.icon}),e.jsx("p",{className:`text-[10px] font-bold mt-2 ${P?"text-gray-800 dark:text-white":"text-gray-400"}`,children:$.name}),e.jsx("p",{className:"text-[8px] text-gray-400 mt-1",children:$.description}),P&&e.jsx("p",{className:"text-[8px] text-green-500 mt-1",children:"‚úì ÌöçÎìùÌï®"})]},$.id)})}),S==="challenges"&&e.jsx("div",{className:"space-y-3",children:Object.values(et).map($=>{const P=h.find(_=>_.challengeId===$.id&&!_.completed),C=h.find(_=>_.challengeId===$.id&&_.completed);return e.jsxs("div",{className:`p-4 rounded-2xl ${C?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":P?"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800":"bg-gray-50 dark:bg-dark-700/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${C?"bg-green-100 dark:bg-green-800/30 text-green-600":P?"bg-yellow-100 dark:bg-yellow-800/30 text-yellow-600":"bg-gray-200 dark:bg-dark-600 text-gray-500"}`,children:C?e.jsx(H,{size:16}):e.jsx(Ke,{size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-white",children:$.name}),e.jsx("p",{className:"text-xs text-gray-400",children:$.description})]})]}),!P&&!C&&e.jsx("button",{onClick:()=>O($.id),className:"px-3 py-1.5 bg-primary-500 text-white text-xs font-medium rounded-lg hover:bg-primary-600 transition-colors",children:"ÏãúÏûë"}),P&&e.jsx("span",{className:"text-xs text-yellow-600 font-medium",children:"ÏßÑÌñâÏ§ë"}),C&&e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"ÏôÑÎ£å!"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 text-[10px] text-gray-400",children:[e.jsxs("span",{children:[$.duration,"Ïùº Ï±åÎ¶∞ÏßÄ"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gt,{size:10,className:"text-purple-500"}),"+",$.xp," XP"]})]})]},$.id)})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl max-w-sm w-full p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"ÏÉà Ï†ÄÏ∂ï Î™©Ìëú"}),e.jsx("button",{onClick:()=>j(!1),className:"p-2",children:e.jsx(W,{size:20,className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Î™©Ìëú Ïù¥Î¶Ñ"}),e.jsx("input",{type:"text",value:x.name,onChange:$=>v({...x,name:$.target.value}),placeholder:"Ïòà: Ï†úÏ£ºÎèÑ Ïó¨Ìñâ",className:"w-full px-4 py-3 bg-gray-100 dark:bg-dark-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Î™©Ìëú Í∏àÏï° (Ïõê)"}),e.jsx("input",{type:"number",value:x.targetAmount,onChange:$=>v({...x,targetAmount:$.target.value}),placeholder:"Ïòà: 500000",className:"w-full px-4 py-3 bg-gray-100 dark:bg-dark-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),e.jsx("input",{type:"text",value:x.description,onChange:$=>v({...x,description:$.target.value}),placeholder:"Ïòà: Netflix Ìï¥ÏßÄÌïòÎ©¥ 6Í∞úÏõî ÌõÑ Îã¨ÏÑ±!",className:"w-full px-4 py-3 bg-gray-100 dark:bg-dark-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsx("button",{onClick:I,disabled:!x.name||!x.targetAmount,className:"w-full py-3 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium rounded-xl transition-colors",children:"Î™©Ìëú Ï∂îÍ∞Ä"})]})]})}),N&&e.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 animate-bounce",children:[e.jsx("span",{className:"text-3xl",children:N.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"ÏÉà Î∞∞ÏßÄ ÌöçÎìù!"}),e.jsx("p",{className:"text-sm opacity-90",children:N.name})]})]})]})}const kr={CreditCard:V,Wallet:xe,Smartphone:ls,Building:ns};function Nr({subscriptions:t,onUpdateSubscription:s}){const{user:i,isDemo:r}=Z(),a=r?"demo_user":i==null?void 0:i.uid,[o,m]=u.useState(()=>w.getPaymentMethods(a)),[y,c]=u.useState(!1),[h,d]=u.useState(null),[g,l]=u.useState(null),[n,j]=u.useState({name:"",type:"credit",billingDay:15,color:"#3B82F6",lastFourDigits:""}),x=u.useMemo(()=>{const f={};o.forEach(D=>{const k=t.filter(I=>I.paymentMethodId===D.id&&!I.isPaused),M=k.reduce((I,A)=>I+(A.cost||0),0);f[D.id]={subscriptions:k,count:k.length,totalCost:M}});const E=t.filter(D=>!D.paymentMethodId&&!D.isPaused);return f.unassigned={subscriptions:E,count:E.length,totalCost:E.reduce((D,k)=>D+(k.cost||0),0)},f},[t,o]),v=u.useCallback(()=>{if(n.name){if(h){const f=w.updatePaymentMethod(a,h.id,n);m(o.map(E=>E.id===h.id?f:E))}else{const f=w.addPaymentMethod(a,n);m([...o,f])}j({name:"",type:"credit",billingDay:15,color:"#3B82F6",lastFourDigits:""}),c(!1),d(null)}},[n,h,o,a]),S=u.useCallback(f=>{confirm("Ïù¥ Í≤∞Ï†úÏàòÎã®ÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå? Ïó∞Í≤∞Îêú Íµ¨ÎèÖÏùò Í≤∞Ï†úÏàòÎã®ÏùÄ Ìï¥Ï†úÎê©ÎãàÎã§.")&&(w.deletePaymentMethod(a,f),m(o.filter(E=>E.id!==f)),t.forEach(E=>{E.paymentMethodId===f&&(s==null||s(E.id,{paymentMethodId:null}))}))},[o,t,a,s]),p=f=>{j({name:f.name,type:f.type,billingDay:f.billingDay||15,color:f.color||"#3B82F6",lastFourDigits:f.lastFourDigits||""}),d(f),c(!0)},N=f=>{j({...n,name:f.name,type:f.type,color:f.color})},b=f=>{var k;const E=((k=Ce[f])==null?void 0:k.icon)||"CreditCard";return kr[E]||V};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-500",children:e.jsx(V,{className:"w-5 h-5"})}),"Í≤∞Ï†ú ÏàòÎã® Í¥ÄÎ¶¨"]}),e.jsxs("button",{onClick:()=>{d(null),j({name:"",type:"credit",billingDay:15,color:"#3B82F6",lastFourDigits:""}),c(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-blue-500 text-white text-xs font-medium rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(le,{size:14}),"Ï∂îÍ∞Ä"]})]}),o.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(V,{className:"mx-auto text-gray-300 dark:text-dark-600 mb-3",size:48}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-dark-500",children:"Îì±Î°ùÎêú Í≤∞Ï†úÏàòÎã®Ïù¥ ÏóÜÏäµÎãàÎã§"}),e.jsx("button",{onClick:()=>c(!0),className:"mt-3 text-sm text-primary-500 hover:text-primary-600",children:"Í≤∞Ï†úÏàòÎã® Ï∂îÍ∞ÄÌïòÍ∏∞"})]}):e.jsxs("div",{className:"space-y-2",children:[o.map(f=>{var M;const E=b(f.type),D=x[f.id]||{count:0,totalCost:0,subscriptions:[]},k=g===f.id;return e.jsxs("div",{className:"rounded-2xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>l(k?null:f.id),className:"w-full flex items-center gap-4 p-4 bg-gray-50 dark:bg-dark-700/50 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white",style:{backgroundColor:f.color||"#3B82F6"},children:e.jsx(E,{size:24})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-white",children:f.name}),f.lastFourDigits&&e.jsxs("span",{className:"text-xs text-gray-400",children:["¬∑¬∑¬∑¬∑",f.lastFourDigits]})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[(M=Ce[f.type])==null?void 0:M.label," ¬∑ Í≤∞Ï†úÏùº ",f.billingDay,"Ïùº"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-sm text-gray-800 dark:text-white",children:["‚Ç©",D.totalCost.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[D.count,"Í∞ú Íµ¨ÎèÖ"]})]}),k?e.jsx(ge,{size:16,className:"text-gray-400"}):e.jsx(ie,{size:16,className:"text-gray-400"})]}),k&&e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-dark-700 border-t border-gray-200 dark:border-dark-600",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>p(f),className:"flex items-center gap-1 px-3 py-1.5 bg-white dark:bg-dark-600 text-gray-600 dark:text-dark-200 text-xs rounded-lg hover:bg-gray-50 dark:hover:bg-dark-500 transition-colors",children:[e.jsx(ve,{size:12}),"ÏàòÏ†ï"]}),e.jsxs("button",{onClick:()=>S(f.id),className:"flex items-center gap-1 px-3 py-1.5 bg-red-50 dark:bg-red-900/20 text-red-600 text-xs rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:[e.jsx(W,{size:12}),"ÏÇ≠Ï†ú"]})]}),D.subscriptions.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mb-2",children:"Ïó∞Í≤∞Îêú Íµ¨ÎèÖ"}),D.subscriptions.map(I=>{var A;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-dark-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md flex items-center justify-center text-white text-[10px] font-bold",style:{backgroundColor:I.color||"#6366F1"},children:(A=I.name)==null?void 0:A.charAt(0)}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-dark-200",children:I.name})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["‚Ç©",(I.cost||0).toLocaleString()]})]},I.id)})]}):e.jsx("p",{className:"text-xs text-gray-400 text-center py-4",children:"Ïó∞Í≤∞Îêú Íµ¨ÎèÖÏù¥ ÏóÜÏäµÎãàÎã§"})]})]},f.id)}),x.unassigned.count>0&&e.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-800/30 rounded-lg flex items-center justify-center",children:e.jsx(V,{size:16,className:"text-orange-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-400",children:"Í≤∞Ï†úÏàòÎã® ÎØ∏ÏßÄÏ†ï"}),e.jsxs("p",{className:"text-xs text-orange-500/70",children:[x.unassigned.count,"Í∞ú Íµ¨ÎèÖ"]})]})]}),e.jsxs("span",{className:"text-sm font-bold text-orange-600",children:["‚Ç©",x.unassigned.totalCost.toLocaleString()]})]})})]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl max-w-sm w-full shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-dark-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:h?"Í≤∞Ï†úÏàòÎã® ÏàòÏ†ï":"Í≤∞Ï†úÏàòÎã® Ï∂îÍ∞Ä"}),e.jsx("button",{onClick:()=>{c(!1),d(null)},className:"p-2",children:e.jsx(W,{size:20,className:"text-gray-400"})})]})}),e.jsxs("div",{className:"p-6 space-y-4 max-h-[60vh] overflow-y-auto",children:[!h&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Îπ†Î•∏ ÏÑ†ÌÉù"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:As.slice(0,6).map(f=>e.jsx("button",{onClick:()=>N(f),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${n.name===f.name?"bg-primary-500 text-white":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300"}`,children:f.name},f.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Í≤∞Ï†úÏàòÎã® Ïù¥Î¶Ñ"}),e.jsx("input",{type:"text",value:n.name,onChange:f=>j({...n,name:f.target.value}),placeholder:"Ïòà: ÏÇºÏÑ±Ïπ¥Îìú",className:"w-full px-4 py-3 bg-gray-100 dark:bg-dark-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Ïú†Ìòï"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Ce).map(([f,E])=>e.jsxs("button",{onClick:()=>j({...n,type:f}),className:`p-3 rounded-xl text-xs font-medium transition-all flex items-center gap-2 ${n.type===f?"bg-primary-500 text-white":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300"}`,children:[n.type===f&&e.jsx(H,{size:14}),E.label]},f))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Í≤∞Ï†úÏùº"}),e.jsx("input",{type:"number",min:"1",max:"31",value:n.billingDay,onChange:f=>j({...n,billingDay:parseInt(f.target.value)||1}),className:"w-full px-4 py-3 bg-gray-100 dark:bg-dark-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Ïπ¥Îìú ÎÅù 4ÏûêÎ¶¨ (ÏÑ†ÌÉù)"}),e.jsx("input",{type:"text",maxLength:"4",value:n.lastFourDigits,onChange:f=>j({...n,lastFourDigits:f.target.value.replace(/\D/g,"")}),placeholder:"1234",className:"w-full px-4 py-3 bg-gray-100 dark:bg-dark-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"ÏÉâÏÉÅ"}),e.jsx("div",{className:"flex gap-2",children:["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#000000"].map(f=>e.jsx("button",{onClick:()=>j({...n,color:f}),className:`w-8 h-8 rounded-full transition-transform ${n.color===f?"ring-2 ring-offset-2 ring-primary-500 scale-110":""}`,style:{backgroundColor:f}},f))})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-100 dark:border-dark-700",children:e.jsx("button",{onClick:v,disabled:!n.name,className:"w-full py-3 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium rounded-xl transition-colors",children:h?"ÏàòÏ†ïÌïòÍ∏∞":"Ï∂îÍ∞ÄÌïòÍ∏∞"})})]})})]})}function vr({subscriptions:t}){const[s,i]=u.useState(null),[r,a]=u.useState(!1),o=u.useMemo(()=>t.filter(l=>!l.isPaused&&(l.isYearly||l.billingCycle==="yearly")).map(l=>{let n=l.renewalDate?new Date(l.renewalDate):null;!n&&l.billingDay&&(n=new Date,n.setMonth(n.getMonth()+12),n.setDate(l.billingDay));const x=n?Math.ceil((n-new Date)/(1e3*60*60*24)):null;let v="normal";return x!==null&&(x<=1?v="critical":x<=7?v="warning":x<=30&&(v="notice")),{...l,renewalDate:n,daysUntilRenewal:x,alertLevel:v,yearlyCost:(l.cost||0)*12,autoRenewal:l.autoRenewal!==!1}}).sort((l,n)=>(l.daysUntilRenewal||999)-(n.daysUntilRenewal||999)),[t]),m=o.filter(l=>l.daysUntilRenewal!==null&&l.daysUntilRenewal<=30),y=u.useMemo(()=>m.reduce((l,n)=>l+n.yearlyCost,0),[m]),c=l=>{switch(l){case"critical":return"bg-red-500 text-white";case"warning":return"bg-orange-500 text-white";case"notice":return"bg-yellow-500 text-white";default:return"bg-gray-200 dark:bg-dark-600 text-gray-600 dark:text-dark-300"}},h=l=>{switch(l){case"critical":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"warning":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";case"notice":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";default:return"bg-gray-50 dark:bg-dark-700/50 border-gray-200 dark:border-dark-600"}},d=l=>l?l.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"-";if(o.length===0)return null;const g=r?o:o.slice(0,5);return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-50 dark:bg-orange-900/20 text-orange-500",children:e.jsx(is,{className:"w-5 h-5"})}),"Í∞±Ïã† ÏïåÎ¶º"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["Ïó∞Í∞Ñ Íµ¨ÎèÖ ",o.length,"Í∞ú"]})]}),m.length>0&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(J,{size:16,className:"text-orange-500"}),e.jsx("span",{className:"font-bold text-sm text-orange-700 dark:text-orange-400",children:"30Ïùº ÎÇ¥ Í∞±Ïã† ÏòàÏ†ï"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-orange-600/70",children:[m.length,"Í∞ú Íµ¨ÎèÖ Í∞±Ïã† ÏòàÏ†ï"]}),e.jsxs("span",{className:"text-sm font-bold text-orange-600",children:["‚Ç©",y.toLocaleString()]})]})]}),e.jsx("div",{className:"space-y-2",children:g.map(l=>{var n;return e.jsxs("div",{className:`rounded-2xl border overflow-hidden ${h(l.alertLevel)}`,children:[e.jsxs("button",{onClick:()=>i(s===l.id?null:l.id),className:"w-full flex items-center gap-3 p-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:l.color||"#6366F1"},children:((n=l.name)==null?void 0:n.charAt(0))||"?"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-white",children:l.name}),l.autoRenewal?e.jsx(Ae,{size:12,className:"text-blue-500"}):e.jsx(be,{size:12,className:"text-gray-400"})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Ïó∞Í∞Ñ ‚Ç©",l.yearlyCost.toLocaleString()]})]}),e.jsx("div",{className:"text-right",children:l.daysUntilRenewal!==null?e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${c(l.alertLevel)}`,children:l.daysUntilRenewal===0?"Ïò§Îäò!":l.daysUntilRenewal<0?"ÎßåÎ£åÎê®":`${l.daysUntilRenewal}Ïùº ÌõÑ`}):e.jsx("span",{className:"text-xs text-gray-400",children:"ÎÇ†Ïßú ÎØ∏ÏÑ§Ï†ï"})}),s===l.id?e.jsx(ge,{size:16,className:"text-gray-400"}):e.jsx(ie,{size:16,className:"text-gray-400"})]}),s===l.id&&e.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/50 dark:bg-dark-800/50 rounded-xl",children:[e.jsx(se,{size:16,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Í∞±Ïã†Ïùº"}),e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:d(l.renewalDate)})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/50 dark:bg-dark-800/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-dark-200",children:"ÏûêÎèô Í∞±Ïã†"})]}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${l.autoRenewal?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-500 dark:bg-dark-600 dark:text-dark-400"}`,children:l.autoRenewal?"ON":"OFF"})]}),e.jsxs("div",{className:"p-3 bg-white/50 dark:bg-dark-800/50 rounded-xl",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"ÏïåÎ¶º ÏòàÏ†ï"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Ls.map(j=>{const x=l.daysUntilRenewal!==null&&l.daysUntilRenewal<j;return e.jsxs("span",{className:`text-[10px] px-2 py-1 rounded-full ${x?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-gray-200 text-gray-500 dark:bg-dark-600 dark:text-dark-400"}`,children:[x&&e.jsx(H,{size:10,className:"inline mr-1"}),j,"Ïùº Ï†Ñ"]},j)})})]}),l.autoRenewal&&l.daysUntilRenewal!==null&&l.daysUntilRenewal<=7&&e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl",children:e.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 flex items-center gap-2",children:[e.jsx(J,{size:14}),"ÏûêÎèô Í∞±Ïã†Ïù¥ ÏºúÏ†∏ ÏûàÏäµÎãàÎã§. Ìï¥ÏßÄÌïòÎ†§Î©¥ Í∞±Ïã†Ïùº Ï†ÑÏóê Ï∑®ÏÜåÌïòÏÑ∏Ïöî."]})})]})]},l.id)})}),o.length>5&&e.jsx("button",{onClick:()=>a(!r),className:"w-full mt-4 py-3 text-center text-sm text-primary-500 hover:text-primary-600",children:r?"Ï†ëÍ∏∞":`${o.length-5}Í∞ú Îçî Î≥¥Í∏∞`})]})}function wr({subscriptions:t}){var S,p;const[s,i]=u.useState("toss"),[r,a]=u.useState(!1),[o,m]=u.useState(!1),[y,c]=u.useState("month"),h=u.useCallback(N=>{const b=t.filter(E=>!E.isPaused),f=new Date;switch(N){case"toss":return d(b,f);case"banksalad":return g(b,f);case"excel":return l(b,f);case"qif":return n(b,f);default:return d(b,f)}},[t]),d=(N,b)=>{const f=["Í±∞ÎûòÏùºÏûê","Ï†ÅÏöî","Ï∂úÍ∏à","ÏûÖÍ∏à","ÏûîÏï°","Î©îÎ™®"],E=N.map(D=>{const k=new Date(b);return k.setDate(D.billingDay||1),[k.toISOString().split("T")[0],`[Íµ¨ÎèÖ] ${D.name}`,D.cost||0,0,"",G[D.category]||D.category]});return{content:[f,...E].map(D=>D.join(",")).join(`
`),filename:`toss_Íµ¨ÎèÖÎÇ¥Ïó≠_${b.toISOString().split("T")[0]}.csv`,mimeType:"text/csv;charset=utf-8"}},g=(N,b)=>{const f=["ÎÇ†Ïßú","ÏãúÍ∞Ñ","ÎÇ¥Ïö©","Ïπ¥ÌÖåÍ≥†Î¶¨","Í∏àÏï°","Î©îÎ™®","Í≤∞Ï†úÏàòÎã®"],E=N.map(D=>{const k=new Date(b);return k.setDate(D.billingDay||1),[k.toISOString().split("T")[0],"00:00:00",D.name,"Í≥†Ï†ïÏßÄÏ∂ú",`-${D.cost||0}`,G[D.category]||"",D.paymentMethodName||"ÎØ∏ÏßÄÏ†ï"]});return{content:[f,...E].map(D=>D.join(",")).join(`
`),filename:`banksalad_Íµ¨ÎèÖÎÇ¥Ïó≠_${b.toISOString().split("T")[0]}.csv`,mimeType:"text/csv;charset=utf-8"}},l=(N,b)=>{const f=["ÏÑúÎπÑÏä§Î™Ö","Ïπ¥ÌÖåÍ≥†Î¶¨","Ïõî Í≤∞Ï†úÏï°","Ïó∞Í∞Ñ ÎπÑÏö©","Í≤∞Ï†úÏùº","Í≤∞Ï†úÏ£ºÍ∏∞","ÏÉÅÌÉú","Î©îÎ™®","Îì±Î°ùÏùº"],E=N.map(k=>[k.name,G[k.category]||k.category,k.cost||0,(k.cost||0)*12,k.billingDay||"-",k.billingCycle==="yearly"?"Ïó∞Í∞Ñ":"ÏõîÍ∞Ñ",k.isPaused?"ÏùºÏãúÏ†ïÏßÄ":"ÌôúÏÑ±",k.memo||"",k.createdAt?new Date(k.createdAt).toISOString().split("T")[0]:"-"]),D=N.reduce((k,M)=>k+(M.cost||0),0);return E.push(["","","","","","","","",""]),E.push(["Ìï©Í≥Ñ","",D,D*12,"","","","",""]),{content:[f,...E].map(k=>k.join(",")).join(`
`),filename:`Íµ¨ÎèÖÍ¥ÄÎ¶¨_ÏÉÅÏÑ∏ÎÇ¥Ïó≠_${b.toISOString().split("T")[0]}.csv`,mimeType:"text/csv;charset=utf-8"}},n=(N,b)=>{let f=`!Type:Bank
`;return N.forEach(E=>{const D=new Date(b);D.setDate(E.billingDay||1);const k=`${D.getMonth()+1}/${D.getDate()}'${D.getFullYear().toString().slice(-2)}`;f+=`D${k}
`,f+=`T-${E.cost||0}
`,f+=`P${E.name}
`,f+=`LÍ≥†Ï†ïÏßÄÏ∂ú:Íµ¨ÎèÖ
`,f+=`M${G[E.category]||E.category}
`,f+=`^
`}),{content:f,filename:`Íµ¨ÎèÖÎÇ¥Ïó≠_${b.toISOString().split("T")[0]}.qif`,mimeType:"application/qif"}},j=u.useCallback(()=>{a(!0);try{const N=h(s),b=s!=="qif"?"\uFEFF":"",f=new Blob([b+N.content],{type:N.mimeType}),E=URL.createObjectURL(f),D=document.createElement("a");D.href=E,D.download=N.filename,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(E),m(!0),setTimeout(()=>m(!1),3e3)}catch(N){console.error("Export failed:",N),alert("ÎÇ¥Î≥¥ÎÇ¥Í∏∞Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.")}finally{a(!1)}},[s,h]),x=t.filter(N=>!N.isPaused).length,v=t.filter(N=>!N.isPaused).reduce((N,b)=>N+(b.cost||0),0);return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-5",children:e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-teal-50 dark:bg-teal-900/20 text-teal-500",children:e.jsx(ds,{className:"w-5 h-5"})}),"Í∞ÄÍ≥ÑÎ∂Ä Ïó∞Îèô"]})}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-dark-700/50 rounded-2xl mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400",children:"ÎÇ¥Î≥¥ÎÇº Íµ¨ÎèÖ"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[x,"Í∞ú"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400",children:"Ïõî Ìï©Í≥Ñ"}),e.jsxs("p",{className:"text-lg font-bold text-primary-600 dark:text-primary-400",children:["‚Ç©",v.toLocaleString()]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-dark-300 mb-3",children:"ÎÇ¥Î≥¥ÎÇ¥Í∏∞ ÌòïÏãù ÏÑ†ÌÉù"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Ee).map(([N,b])=>e.jsxs("button",{onClick:()=>i(N),className:`p-4 rounded-2xl text-left transition-all ${s===N?"bg-primary-50 dark:bg-primary-900/20 border-2 border-primary-500":"bg-gray-50 dark:bg-dark-700/50 border-2 border-transparent hover:border-gray-200 dark:hover:border-dark-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:b.icon}),e.jsx("span",{className:`text-sm font-medium ${s===N?"text-primary-600 dark:text-primary-400":"text-gray-800 dark:text-white"}`,children:b.name})]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:b.description}),e.jsxs("p",{className:"text-[10px] text-gray-300 mt-1",children:[".",b.extension]})]},N))})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-2xl mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(me,{size:16,className:"text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-400 mb-1",children:[(S=Ee[s])==null?void 0:S.name," ÌòïÏãù"]}),e.jsxs("p",{className:"text-[10px] text-blue-600/70 dark:text-blue-400/70",children:[s==="toss"&&'ÌÜ†Ïä§ Ïï±Ïùò "Í∞ÄÍ≥ÑÎ∂Ä > ÏÑ§Ï†ï > Í∞ÄÏ†∏Ïò§Í∏∞"ÏóêÏÑú ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏäµÎãàÎã§.',s==="banksalad"&&"Î±ÖÌÅ¨ÏÉêÎü¨Îìú Ïï±Ïùò Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ Í∏∞Îä•Í≥º Ìò∏ÌôòÎê©ÎãàÎã§.",s==="excel"&&"ÏóëÏÖÄ ÎòêÎäî Íµ¨Í∏Ä Ïä§ÌîÑÎ†àÎìúÏãúÌä∏ÏóêÏÑú Ïó¥ Ïàò ÏûàÎäî ÏÉÅÏÑ∏ ÌòïÏãùÏûÖÎãàÎã§.",s==="qif"&&"Quicken, Money Îì± Í∏àÏúµ ÏÜåÌîÑÌä∏Ïõ®Ïñ¥ÏóêÏÑú Í∞ÄÏ†∏Ïò¨ Ïàò ÏûàÏäµÎãàÎã§."]})]})]})}),e.jsx("button",{onClick:j,disabled:r||x===0,className:`w-full py-4 rounded-2xl font-medium transition-all flex items-center justify-center gap-2 ${o?"bg-green-500 text-white":r?"bg-gray-200 dark:bg-dark-600 text-gray-400":x===0?"bg-gray-200 dark:bg-dark-600 text-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:o?e.jsxs(e.Fragment,{children:[e.jsx(H,{size:18}),"Îã§Ïö¥Î°úÎìú ÏôÑÎ£å!"]}):r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"ÎÇ¥Î≥¥ÎÇ¥Îäî Ï§ë..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{size:18}),(p=Ee[s])==null?void 0:p.name," ÌòïÏãùÏúºÎ°ú ÎÇ¥Î≥¥ÎÇ¥Í∏∞"]})}),x===0&&e.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",children:"ÎÇ¥Î≥¥ÎÇº ÌôúÏÑ± Íµ¨ÎèÖÏù¥ ÏóÜÏäµÎãàÎã§"})]})}function Sr({subscriptions:t,onEdit:s}){const[i,r]=u.useState("name"),[a,o]=u.useState("asc"),[m,y]=u.useState(""),[c,h]=u.useState(null),[d,g]=u.useState(!1),[l,n]=u.useState([]),[j,x]=u.useState(!1),v=u.useMemo(()=>t.map(k=>{var $;const M=(($=vt[k.usageFrequency||"weekly"])==null?void 0:$.value)||8,I=Math.min(100,M*3.33),A=k.satisfaction||70,O=15e3,T=Math.max(0,Math.min(100,((O-(k.cost||0))/O+1)*50)),L=Math.round(I*Pe.usageFrequency+A*Pe.satisfaction+T*Pe.priceValue);return{...k,usageScore:I,satisfactionScore:A,priceScore:T,valueScore:L}}),[t]),S=u.useMemo(()=>{let k=[...v];if(m){const M=m.toLowerCase();k=k.filter(I=>{var A,O;return((A=I.name)==null?void 0:A.toLowerCase().includes(M))||((O=I.category)==null?void 0:O.toLowerCase().includes(M))})}return c&&(k=k.filter(M=>M.category===c)),k.sort((M,I)=>{let A,O;switch(i){case"name":A=M.name||"",O=I.name||"";break;case"cost":A=M.cost||0,O=I.cost||0;break;case"valueScore":A=M.valueScore||0,O=I.valueScore||0;break;case"category":A=M.category||"",O=I.category||"";break;case"daysLeft":A=M.daysLeft??999,O=I.daysLeft??999;break;default:A=M.name||"",O=I.name||""}return typeof A=="string"?a==="asc"?A.localeCompare(O):O.localeCompare(A):a==="asc"?A-O:O-A}),k},[v,m,c,i,a]),p=k=>{i===k?o(a==="asc"?"desc":"asc"):(r(k),o("asc"))},N=k=>{l.includes(k)?n(l.filter(M=>M!==k)):l.length<3&&n([...l,k])},b=u.useMemo(()=>[...new Set(t.map(k=>k.category).filter(Boolean))],[t]),f=v.filter(k=>l.includes(k.id)),E=k=>k>=80?"text-green-500 bg-green-50 dark:bg-green-900/20":k>=60?"text-blue-500 bg-blue-50 dark:bg-blue-900/20":k>=40?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"text-red-500 bg-red-50 dark:bg-red-900/20",D=({column:k})=>i!==k?e.jsx(cs,{size:12,className:"text-gray-300"}):a==="asc"?e.jsx(ge,{size:12,className:"text-primary-500"}):e.jsx(ie,{size:12,className:"text-primary-500"});return t.length===0?null:e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 text-indigo-500",children:e.jsx(os,{className:"w-5 h-5"})}),"Íµ¨ÎèÖ ÎπÑÍµê ÌÖåÏù¥Î∏î"]}),e.jsx("button",{onClick:()=>x(!j),className:"text-xs text-primary-500 hover:text-primary-600",children:j?"Ï†ëÍ∏∞":"ÌéºÏπòÍ∏∞"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400",children:"Ï¥ù Íµ¨ÎèÖ"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[t.length,"Í∞ú"]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400",children:"Ïõî Ï¥ùÏï°"}),e.jsxs("p",{className:"text-lg font-bold text-primary-600 dark:text-primary-400",children:["‚Ç©",t.filter(k=>!k.isPaused).reduce((k,M)=>k+(M.cost||0),0).toLocaleString()]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400",children:"ÌèâÍ∑† Í∞ÄÏπò"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:[Math.round(v.reduce((k,M)=>k+M.valueScore,0)/v.length||0),"Ï†ê"]})]})]}),j&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ze,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:m,onChange:k=>y(k.target.value),placeholder:"Í≤ÄÏÉâ...",className:"w-full pl-9 pr-3 py-2 bg-gray-100 dark:bg-dark-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:c||"",onChange:k=>h(k.target.value||null),className:"px-3 py-2 bg-gray-100 dark:bg-dark-700 rounded-xl text-sm outline-none",children:[e.jsx("option",{value:"",children:"Ï†ÑÏ≤¥"}),b.map(k=>e.jsx("option",{value:k,children:G[k]||k},k))]}),e.jsx("button",{onClick:()=>g(!d),className:`px-3 py-2 rounded-xl text-xs font-medium transition-all ${d?"bg-primary-500 text-white":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300"}`,children:"ÎπÑÍµê"})]}),d&&l.length>0&&e.jsxs("div",{className:"mb-4 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl",children:[e.jsxs("p",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-400 mb-3",children:["ÏÑ†ÌÉùÎêú Íµ¨ÎèÖ ÎπÑÍµê (",l.length,"/3)"]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:f.map(k=>{var M;return e.jsxs("div",{className:"p-3 bg-white dark:bg-dark-800 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md flex items-center justify-center text-white text-[10px] font-bold",style:{backgroundColor:k.color||"#6366F1"},children:(M=k.name)==null?void 0:M.charAt(0)}),e.jsx("span",{className:"text-xs font-medium text-gray-800 dark:text-white truncate",children:k.name})]}),e.jsxs("div",{className:"space-y-1 text-[10px]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Í∞ÄÍ≤©"}),e.jsxs("span",{className:"font-medium",children:["‚Ç©",(k.cost||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Í∞ÄÏπòÏ†êÏàò"}),e.jsx("span",{className:`font-bold ${k.valueScore>=60?"text-green-500":"text-red-500"}`,children:k.valueScore})]})]})]},k.id)})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 dark:border-dark-700",children:[d&&e.jsx("th",{className:"p-2 w-8"}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-gray-50 dark:hover:bg-dark-700",onClick:()=>p("name"),children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:["ÏÑúÎπÑÏä§ ",e.jsx(D,{column:"name"})]})}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-gray-50 dark:hover:bg-dark-700",onClick:()=>p("category"),children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:["Ïπ¥ÌÖåÍ≥†Î¶¨ ",e.jsx(D,{column:"category"})]})}),e.jsx("th",{className:"p-2 text-right cursor-pointer hover:bg-gray-50 dark:hover:bg-dark-700",onClick:()=>p("cost"),children:e.jsxs("div",{className:"flex items-center justify-end gap-1 text-xs text-gray-500",children:["Ïõî ÎπÑÏö© ",e.jsx(D,{column:"cost"})]})}),e.jsx("th",{className:"p-2 text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-dark-700",onClick:()=>p("valueScore"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-500",children:["Í∞ÄÏπò ",e.jsx(D,{column:"valueScore"})]})}),e.jsx("th",{className:"p-2 w-10"})]})}),e.jsx("tbody",{children:S.slice(0,10).map(k=>{var M;return e.jsxs("tr",{className:`border-b border-gray-50 dark:border-dark-700 hover:bg-gray-50 dark:hover:bg-dark-700/50 ${k.isPaused?"opacity-50":""}`,children:[d&&e.jsx("td",{className:"p-2",children:e.jsx("input",{type:"checkbox",checked:l.includes(k.id),onChange:()=>N(k.id),disabled:!l.includes(k.id)&&l.length>=3,className:"w-4 h-4 rounded border-gray-300"})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center text-white text-[10px] font-bold",style:{backgroundColor:k.color||"#6366F1"},children:(M=k.name)==null?void 0:M.charAt(0)}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:k.name})]})}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${U[k.category]}20`,color:U[k.category]},children:G[k.category]||k.category})}),e.jsxs("td",{className:"p-2 text-right font-medium text-gray-800 dark:text-white",children:["‚Ç©",(k.cost||0).toLocaleString()]}),e.jsx("td",{className:"p-2 text-center",children:e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${E(k.valueScore)}`,children:k.valueScore})}),e.jsx("td",{className:"p-2",children:e.jsx("button",{onClick:()=>s==null?void 0:s(k),className:"p-1.5 text-gray-400 hover:text-primary-500 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(ve,{size:14})})})]},k.id)})})]})}),S.length>10&&e.jsxs("p",{className:"text-xs text-gray-400 text-center mt-3",children:["+",S.length-10,"Í∞ú Îçî ÏûàÏùå"]})]})]})}function Cr({onLockApp:t}){const{user:s,isDemo:i,logout:r}=Z(),a=i?"demo_user":s==null?void 0:s.uid,[o,m]=u.useState(()=>w.getSecuritySettings(a)),[y,c]=u.useState(!1),[h,d]=u.useState(["","","",""]),[g,l]=u.useState(["","","",""]),[n,j]=u.useState("enter"),[x,v]=u.useState(!1),[S,p]=u.useState(""),[N,b]=u.useState(""),f=u.useCallback(T=>{const L={...o,...T};m(L),w.saveSecuritySettings(a,L)},[o,a]),E=(T,L,$=!1)=>{var _;if(!/^\d*$/.test(L))return;const P=$?l:d,C=$?[...g]:[...h];C[T]=L.slice(-1),P(C),L&&T<3&&((_=document.getElementById(`pin-${$?"confirm-":""}${T+1}`))==null||_.focus())},D=()=>{const T=h.join("");if(n==="enter"){if(T.length!==4){p("4ÏûêÎ¶¨ PINÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî");return}j("confirm"),p("")}else{if(T!==g.join("")){p("PINÏù¥ ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§"),l(["","","",""]);return}f({pinEnabled:!0,pin:T}),c(!1),d(["","","",""]),l(["","","",""]),j("enter"),b("PINÏù¥ ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§"),setTimeout(()=>b(""),3e3)}},k=()=>{confirm("PIN Ïû†Í∏àÏùÑ Ìï¥Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&(f({pinEnabled:!1,pin:null}),b("PIN Ïû†Í∏àÏù¥ Ìï¥Ï†úÎêòÏóàÏäµÎãàÎã§"),setTimeout(()=>b(""),3e3))},M=()=>{const T={subscriptions:w.getSubscriptions(a),settings:w.getUserSettings(a),tags:w.getTags(a),paymentMethods:w.getPaymentMethods(a),goals:w.getGoals(a),badges:w.getBadges(a),exportedAt:new Date().toISOString(),version:"3.0"},L=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),$=URL.createObjectURL(L),P=document.createElement("a");P.href=$,P.download=`subscription_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL($),b("Î∞±ÏóÖ ÌååÏùºÏù¥ Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§"),setTimeout(()=>b(""),3e3)},I=T=>{var P;const L=(P=T.target.files)==null?void 0:P[0];if(!L)return;const $=new FileReader;$.onload=C=>{var _;try{const B=JSON.parse((_=C.target)==null?void 0:_.result);if(!B.version||!B.subscriptions)throw new Error("Invalid");if(!confirm("ÌòÑÏû¨ Îç∞Ïù¥ÌÑ∞Î•º Î∞±ÏóÖ Îç∞Ïù¥ÌÑ∞Î°ú ÍµêÏ≤¥ÌïòÏãúÍ≤†ÏäµÎãàÍπå?"))return;B.subscriptions&&w.saveSubscriptions(a,B.subscriptions),B.settings&&w.saveUserSettings(a,B.settings),B.paymentMethods&&w.savePaymentMethods(a,B.paymentMethods),b("Îç∞Ïù¥ÌÑ∞Í∞Ä Î≥µÏõêÎêòÏóàÏäµÎãàÎã§"),setTimeout(()=>window.location.reload(),2e3)}catch{p("Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Î∞±ÏóÖ ÌååÏùºÏûÖÎãàÎã§")}},$.readAsText(L),T.target.value=""},A=()=>{confirm("Ï†ïÎßêÎ°ú Î™®Îì† Îç∞Ïù¥ÌÑ∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&confirm("ÎßàÏßÄÎßâ ÌôïÏù∏ÏûÖÎãàÎã§. Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÇ≠Ï†úÎê©ÎãàÎã§.")&&(w.saveSubscriptions(a,[]),w.saveUserSettings(a,{}),w.saveSecuritySettings(a,{pinEnabled:!1,pin:null}),b("Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§"),setTimeout(()=>{r==null||r(),window.location.reload()},2e3))},O=[{value:1,label:"1Î∂Ñ"},{value:5,label:"5Î∂Ñ"},{value:10,label:"10Î∂Ñ"},{value:30,label:"30Î∂Ñ"},{value:0,label:"ÏÇ¨Ïö© Ïïà Ìï®"}];return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-5",children:e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-500",children:e.jsx(it,{className:"w-5 h-5"})}),"Î≥¥Ïïà & Í∞úÏù∏Ï†ïÎ≥¥"]})}),N&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-xl flex items-center gap-2 text-green-600 text-sm",children:[e.jsx(H,{size:16}),N]}),S&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(J,{size:16}),S]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-dark-700/50 rounded-2xl",children:e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${o.pinEnabled?"bg-green-100":"bg-gray-200"}`,children:o.pinEnabled?e.jsx(xs,{size:18,className:"text-green-600"}):e.jsx(ms,{size:18,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-white",children:"PIN Ïû†Í∏à"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Ïï± Ïã§Ìñâ Ïãú 4ÏûêÎ¶¨ PIN ÏûÖÎ†•"})]})]}),o.pinEnabled?e.jsx("button",{onClick:k,className:"px-3 py-1.5 bg-red-100 text-red-600 text-xs font-medium rounded-lg",children:"Ìï¥Ï†ú"}):e.jsx("button",{onClick:()=>c(!0),className:"px-3 py-1.5 bg-primary-500 text-white text-xs font-medium rounded-lg",children:"ÏÑ§Ï†ï"})]})}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-dark-700/50 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-blue-100",children:e.jsx(Ne,{size:18,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-white",children:"ÏûêÎèô Ïû†Í∏à"}),e.jsx("p",{className:"text-xs text-gray-400",children:"ÏùºÏ†ï ÏãúÍ∞Ñ ÌõÑ ÏûêÎèô Ïû†Í∏à"})]})]}),e.jsx("div",{className:"flex gap-2",children:O.map(T=>e.jsx("button",{onClick:()=>f({autoLockMinutes:T.value}),className:`flex-1 py-2 rounded-xl text-xs font-medium ${o.autoLockMinutes===T.value?"bg-primary-500 text-white":"bg-white dark:bg-dark-600 text-gray-600"}`,children:T.label},T.value))})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-dark-700/50 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-purple-100",children:e.jsx(je,{size:18,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-white",children:"Î∞±ÏóÖ & Î≥µÏõê"}),e.jsx("p",{className:"text-xs text-gray-400",children:"JSON ÌååÏùºÎ°ú Î∞±ÏóÖ"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:M,className:"flex-1 py-2.5 bg-purple-500 text-white rounded-xl text-xs font-medium flex items-center justify-center gap-1",children:[e.jsx(je,{size:14}),"Î∞±ÏóÖ"]}),e.jsxs("label",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:".json",onChange:I,className:"hidden"}),e.jsxs("div",{className:"py-2.5 bg-white dark:bg-dark-600 text-gray-700 rounded-xl text-xs font-medium flex items-center justify-center gap-1 cursor-pointer",children:[e.jsx(Ge,{size:14}),"Î≥µÏõê"]})]})]})]}),e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-red-100",children:e.jsx(Be,{size:18,className:"text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-red-700",children:"Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú"}),e.jsx("p",{className:"text-xs text-red-500/70",children:"Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏòÅÍµ¨ ÏÇ≠Ï†úÎê©ÎãàÎã§"})]})]}),e.jsx("button",{onClick:A,className:"w-full py-2.5 bg-red-600 text-white rounded-xl text-xs font-medium",children:"Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú"})]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-3xl max-w-sm w-full p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-bold text-lg",children:n==="enter"?"PIN ÏÑ§Ï†ï":"PIN ÌôïÏù∏"}),e.jsx("button",{onClick:()=>{c(!1),d(["","","",""]),l(["","","",""]),j("enter"),p("")},children:e.jsx(W,{size:20,className:"text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-6",children:n==="enter"?"4ÏûêÎ¶¨ PINÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî":"PINÏùÑ Îã§Ïãú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"}),e.jsx("div",{className:"flex justify-center gap-3 mb-6",children:(n==="enter"?h:g).map((T,L)=>e.jsx("input",{id:`pin-${n==="confirm"?"confirm-":""}${L}`,type:x?"text":"password",value:T,onChange:$=>E(L,$.target.value,n==="confirm"),maxLength:1,className:"w-14 h-14 text-center text-2xl font-bold bg-gray-100 rounded-xl outline-none focus:ring-2 focus:ring-primary-500"},L))}),e.jsxs("button",{onClick:()=>v(!x),className:"flex items-center justify-center gap-2 text-sm text-gray-500 mb-6 mx-auto",children:[x?e.jsx(gs,{size:16}):e.jsx(xt,{size:16}),x?"PIN Ïà®Í∏∞Í∏∞":"PIN Î≥¥Í∏∞"]}),S&&e.jsx("p",{className:"text-sm text-red-500 text-center mb-4",children:S}),e.jsx("button",{onClick:D,className:"w-full py-3 bg-primary-600 text-white font-medium rounded-xl",children:n==="enter"?"Îã§Ïùå":"PIN ÏÑ§Ï†ï ÏôÑÎ£å"})]})})]})}function Er({subscriptions:t,totalMonthlyCost:s}){var j;const{user:i,isDemo:r}=Z(),a=r?"demo_user":i==null?void 0:i.uid,[o,m]=u.useState("month"),[y,c]=u.useState("overview"),h=u.useMemo(()=>w.getReportHistory(a),[a]),d=u.useMemo(()=>{const x=t.filter(k=>!k.isPaused),v=t.filter(k=>k.isPaused),S=s*12,p={};x.forEach(k=>{const M=k.category||"Etc";p[M]||(p[M]={count:0,cost:0}),p[M].count++,p[M].cost+=k.cost||0});const N=Object.entries(p).sort((k,M)=>M[1].cost-k[1].cost)[0],b=[...x].sort((k,M)=>(M.cost||0)-(k.cost||0))[0],f=x.length>0?Math.round(x.reduce((k,M)=>k+(M.cost||0),0)/x.length):0,E=s*.95,D=((s-E)/E*100).toFixed(1);return{totalActive:x.length,totalPaused:v.length,totalMonthly:s,totalYearly:S,categoryData:p,topCategory:N,mostExpensive:b,avgCost:f,monthChange:parseFloat(D),lastMonthCost:E}},[t,s]),g=u.useMemo(()=>{const x=[];return d.monthChange!==0&&x.push({type:d.monthChange>0?"warning":"success",icon:d.monthChange>0?K:te,title:d.monthChange>0?"ÏßÄÏ∂ú Ï¶ùÍ∞Ä":"ÏßÄÏ∂ú Í∞êÏÜå",message:`ÏßÄÎÇú Îã¨ ÎåÄÎπÑ ${Math.abs(d.monthChange)}% ${d.monthChange>0?"Ï¶ùÍ∞Ä":"Í∞êÏÜå"}ÌñàÏäµÎãàÎã§`}),d.topCategory&&d.topCategory[1].cost>s*.5&&x.push({type:"warning",icon:ke,title:"Ïπ¥ÌÖåÍ≥†Î¶¨ ÏßëÏ§ë",message:`${G[d.topCategory[0]]||d.topCategory[0]}Ïóê ÏßÄÏ∂úÏùò ${Math.round(d.topCategory[1].cost/s*100)}%Í∞Ä ÏßëÏ§ëÎêòÏñ¥ ÏûàÏäµÎãàÎã§`}),d.totalActive>10&&x.push({type:"info",icon:fe,title:"Íµ¨ÎèÖ Ïàò ÎßéÏùå",message:`${d.totalActive}Í∞úÏùò ÌôúÏÑ± Íµ¨ÎèÖÏù¥ ÏûàÏäµÎãàÎã§. Ï†ïÎ¶¨Í∞Ä ÌïÑÏöîÌï† Ïàò ÏûàÏäµÎãàÎã§`}),x},[d,s]),l=()=>{const x=window.open("","_blank");if(!x)return;const v=`
            <!DOCTYPE html>
            <html><head><title>Íµ¨ÎèÖ Î¶¨Ìè¨Ìä∏</title>
            <style>
                body { font-family: -apple-system, sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
                h1 { color: #6366F1; } h2 { color: #374151; margin-top: 30px; }
                .stat { display: inline-block; padding: 20px; background: #F3F4F6; border-radius: 12px; margin: 10px; min-width: 150px; }
                .stat-value { font-size: 24px; font-weight: bold; color: #111827; }
                .stat-label { font-size: 12px; color: #6B7280; }
                table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                th, td { padding: 12px; text-align: left; border-bottom: 1px solid #E5E7EB; }
                th { background: #F9FAFB; font-weight: 600; }
            </style></head><body>
            <h1>üìä Íµ¨ÎèÖ Í¥ÄÎ¶¨ Î¶¨Ìè¨Ìä∏</h1>
            <p style="color:#6B7280">${new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}</p>
            
            <div class="stat"><div class="stat-value">${d.totalActive}Í∞ú</div><div class="stat-label">ÌôúÏÑ± Íµ¨ÎèÖ</div></div>
            <div class="stat"><div class="stat-value">‚Ç©${d.totalMonthly.toLocaleString()}</div><div class="stat-label">Ïõî ÏßÄÏ∂ú</div></div>
            <div class="stat"><div class="stat-value">‚Ç©${d.totalYearly.toLocaleString()}</div><div class="stat-label">Ïó∞Í∞Ñ ÏßÄÏ∂ú</div></div>
            
            <h2>Íµ¨ÎèÖ Î™©Î°ù</h2>
            <table>
                <tr><th>ÏÑúÎπÑÏä§</th><th>Ïπ¥ÌÖåÍ≥†Î¶¨</th><th>Ïõî ÎπÑÏö©</th><th>ÏÉÅÌÉú</th></tr>
                ${t.map(S=>`
                    <tr>
                        <td>${S.name}</td>
                        <td>${G[S.category]||S.category}</td>
                        <td>‚Ç©${(S.cost||0).toLocaleString()}</td>
                        <td>${S.isPaused?"ÏùºÏãúÏ†ïÏßÄ":"ÌôúÏÑ±"}</td>
                    </tr>
                `).join("")}
            </table>
            
            <h2>Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ ÏßÄÏ∂ú</h2>
            <table>
                <tr><th>Ïπ¥ÌÖåÍ≥†Î¶¨</th><th>Íµ¨ÎèÖ Ïàò</th><th>Ïõî ÎπÑÏö©</th><th>ÎπÑÏú®</th></tr>
                ${Object.entries(d.categoryData).map(([S,p])=>`
                    <tr>
                        <td>${G[S]||S}</td>
                        <td>${p.count}Í∞ú</td>
                        <td>‚Ç©${p.cost.toLocaleString()}</td>
                        <td>${Math.round(p.cost/d.totalMonthly*100)}%</td>
                    </tr>
                `).join("")}
            </table>
            
            <script>window.print();<\/script>
            </body></html>
        `;x.document.write(v),x.document.close()},n=[{key:"overview",label:"Í∞úÏöî"},{key:"category",label:"Ïπ¥ÌÖåÍ≥†Î¶¨"},{key:"trends",label:"Ìä∏Î†åÎìú"}];return e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2.5 text-base",children:[e.jsx("div",{className:"p-2 rounded-lg bg-violet-50 dark:bg-violet-900/20 text-violet-500",children:e.jsx(fe,{className:"w-5 h-5"})}),"Î¶¨Ìè¨Ìä∏ & Ïù∏ÏÇ¨Ïù¥Ìä∏"]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-1 px-3 py-1.5 bg-violet-500 text-white text-xs font-medium rounded-lg hover:bg-violet-600",children:[e.jsx(je,{size:14}),"PDF"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl text-center",children:[e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:d.totalActive}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"ÌôúÏÑ±"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl text-center",children:[e.jsxs("p",{className:"text-lg font-bold text-primary-600",children:["‚Ç©",(d.totalMonthly/1e3).toFixed(0),"k"]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Ïõî"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl text-center",children:[e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["‚Ç©",Math.round(d.totalYearly/1e4),"Îßå"]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Ïó∞"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl text-center",children:[e.jsxs("p",{className:"text-lg font-bold text-orange-600",children:["‚Ç©",(d.avgCost/1e3).toFixed(1),"k"]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"ÌèâÍ∑†"})]})]}),e.jsx("div",{className:"flex gap-2 mb-4",children:n.map(x=>e.jsx("button",{onClick:()=>c(x.key),className:`flex-1 py-2 rounded-xl text-xs font-medium transition-all ${y===x.key?"bg-violet-500 text-white":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300"}`,children:x.label},x.key))}),y==="overview"&&e.jsxs("div",{className:"space-y-3",children:[g.length>0&&e.jsx("div",{className:"space-y-2",children:g.map((x,v)=>e.jsxs("div",{className:`p-3 rounded-xl flex items-center gap-3 ${x.type==="warning"?"bg-orange-50 dark:bg-orange-900/20":x.type==="success"?"bg-green-50 dark:bg-green-900/20":"bg-blue-50 dark:bg-blue-900/20"}`,children:[e.jsx(x.icon,{size:18,className:x.type==="warning"?"text-orange-500":x.type==="success"?"text-green-500":"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-800 dark:text-white",children:x.title}),e.jsx("p",{className:"text-[10px] text-gray-500",children:x.message})]})]},v))}),d.mostExpensive&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-2xl",children:[e.jsx("p",{className:"text-xs text-red-600/70 mb-1",children:"Í∞ÄÏû• ÎπÑÏãº Íµ¨ÎèÖ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:d.mostExpensive.color||"#EF4444"},children:(j=d.mostExpensive.name)==null?void 0:j.charAt(0)}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:d.mostExpensive.name})]}),e.jsxs("span",{className:"text-lg font-bold text-red-600",children:["‚Ç©",(d.mostExpensive.cost||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-dark-700/50 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Ï†ÑÏõî ÎåÄÎπÑ"}),e.jsxs("span",{className:`text-sm font-bold flex items-center gap-1 ${d.monthChange>0?"text-red-500":"text-green-500"}`,children:[d.monthChange>0?e.jsx(K,{size:14}):e.jsx(te,{size:14}),d.monthChange>0?"+":"",d.monthChange,"%"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 p-2 bg-white dark:bg-dark-800 rounded-lg text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400",children:"ÏßÄÎÇúÎã¨"}),e.jsxs("p",{className:"text-sm font-medium",children:["‚Ç©",Math.round(d.lastMonthCost).toLocaleString()]})]}),e.jsxs("div",{className:"flex-1 p-2 bg-primary-50 dark:bg-primary-900/20 rounded-lg text-center",children:[e.jsx("p",{className:"text-[10px] text-primary-600",children:"Ïù¥Î≤àÎã¨"}),e.jsxs("p",{className:"text-sm font-bold text-primary-600",children:["‚Ç©",d.totalMonthly.toLocaleString()]})]})]})]})]}),y==="category"&&e.jsx("div",{className:"space-y-2",children:Object.entries(d.categoryData).sort((x,v)=>v[1].cost-x[1].cost).map(([x,v])=>{const S=Math.round(v.cost/d.totalMonthly*100);return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:U[x]||"#6B7280"}}),e.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-white",children:G[x]||x}),e.jsxs("span",{className:"text-xs text-gray-400",children:[v.count,"Í∞ú"]})]}),e.jsxs("span",{className:"text-sm font-bold",children:["‚Ç©",v.cost.toLocaleString()]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-dark-600 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all",style:{width:`${S}%`,backgroundColor:U[x]||"#6B7280"}})}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 text-right",children:[S,"%"]})]},x)})}),y==="trends"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-dark-700/50 rounded-2xl",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"ÏòàÏÉÅ Ïó∞Í∞Ñ ÏßÄÏ∂ú"}),e.jsx("div",{className:"space-y-2",children:[1,2,3].map(x=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-dark-300",children:[new Date().getFullYear()+x-1,"ÎÖÑ"]}),e.jsxs("span",{className:"text-sm font-medium text-gray-800 dark:text-white",children:["‚Ç©",Math.round(d.totalYearly*Math.pow(1.05,x-1)).toLocaleString()]})]},x))}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"* Ïó∞ 5% Ïù∏ÌîåÎ†àÏù¥ÏÖò Í∞ÄÏ†ï"})]}),e.jsxs("div",{className:"p-4 bg-violet-50 dark:bg-violet-900/20 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(me,{size:16,className:"text-violet-500"}),e.jsx("span",{className:"text-sm font-medium text-violet-700 dark:text-violet-400",children:"Î¶¨Ìè¨Ìä∏ ÌûàÏä§ÌÜ†Î¶¨"})]}),e.jsxs("p",{className:"text-xs text-violet-600/70",children:[h.length,"Í∞úÏùò ÏõîÍ∞Ñ Ïä§ÎÉÖÏÉ∑ Ï†ÄÏû•Îê®"]})]})]})]})}const Pr=[{id:"home",label:"Ìôà",icon:hs},{id:"subscriptions",label:"Íµ¨ÎèÖ",icon:V},{id:"analysis",label:"Î∂ÑÏÑù",icon:fe},{id:"management",label:"Í¥ÄÎ¶¨",icon:us},{id:"tools",label:"ÎèÑÍµ¨",icon:ps}];function Dr({activeTab:t,onTabChange:s}){return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white dark:bg-dark-800 border-t border-gray-100 dark:border-dark-700 safe-area-bottom",children:e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsx("div",{className:"flex items-center justify-around py-2",children:Pr.map(i=>{const r=t===i.id,a=i.icon;return e.jsxs("button",{onClick:()=>s(i.id),className:`flex flex-col items-center gap-1 px-4 py-2 rounded-2xl transition-all ${r?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"text-gray-400 dark:text-dark-500 hover:text-gray-600 dark:hover:text-dark-300"}`,children:[e.jsx(a,{size:22,strokeWidth:r?2.5:2,className:r?"scale-110 transition-transform":""}),e.jsx("span",{className:`text-[11px] font-medium ${r?"font-bold":""}`,children:i.label})]},i.id)})})})})}const $r=u.lazy(()=>We(()=>import("./LoginPage-Cdwiyth8.js"),__vite__mapDeps([0,1,2]),import.meta.url)),Mr=u.lazy(()=>We(()=>import("./ForgotPasswordPage-crhA1oCU.js"),__vite__mapDeps([3,1,2]),import.meta.url)),Rr=u.lazy(()=>We(()=>import("./ProfilePage-CwpWWgFS.js"),__vite__mapDeps([4,1,2]),import.meta.url));function Tr(){return e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsx("div",{className:"flex flex-col items-center gap-4",children:e.jsx("div",{className:"w-12 h-12 spinner"})})})}function Ir(){const{user:t,isDemo:s,isAuthenticated:i}=Z(),r=Cs(s?null:t),[a,o]=u.useState([]);u.useEffect(()=>{s&&o(q())},[s]);const m=s?a:r.subscriptions,y=s?!1:r.loading,c=u.useCallback(async R=>{if(s){const z=we({...R,id:`demo-${Date.now()}`});return o(q()),z.id}return r.addSubscription(R)},[s,r]),h=u.useCallback(async(R,z)=>{if(s){const he=q().find($t=>$t.id===R);he&&(we({...he,...z}),o(q()));return}return r.updateSubscription(R,z)},[s,r]),d=u.useCallback(async R=>{if(s){ws(R),o(q());return}return r.deleteSubscription(R)},[s,r]),g=u.useCallback(async R=>{if(s){const re=q().find(he=>he.id===R);re&&(we({...re,isPaused:!re.isPaused}),o(q()));return}return r.togglePause(R)},[s,r]),[l,n]=u.useState(!1),[j,x]=u.useState(!1),[v,S]=u.useState(null),[p,N]=u.useState(null),[b,f]=u.useState(""),[E,D]=u.useState(null),[k,M]=u.useState("daysLeft"),[I,A]=u.useState(!0),[O,T]=u.useState("home"),[L,$]=u.useState({budget:0,monthlyIncome:0,priceAlertEnabled:!0});u.useEffect(()=>{const R=s?"demo_user":t==null?void 0:t.uid;if(R){const z=w.getUserSettings(R);$(z)}},[t,s]);const P=u.useCallback(R=>{$(R),s&&w.saveUserSettings("demo_user",R)},[s]),C=u.useMemo(()=>m.map(R=>({...R,daysLeft:Es(R.billingDay)})),[m]),_=u.useMemo(()=>m.filter(R=>!R.isPaused).reduce((R,z)=>R+(z.cost||0),0),[m]),B=_*12,Y=u.useMemo(()=>{const R={};return m.filter(z=>!z.isPaused).forEach(z=>{R[z.category]||(R[z.category]={count:0,total:0}),R[z.category].count+=1,R[z.category].total+=z.cost}),R},[m]),de=u.useMemo(()=>C.filter(R=>!R.isPaused&&R.daysLeft<=3).sort((R,z)=>R.daysLeft-z.daysLeft),[C]),X=u.useCallback((R,z="success")=>{N({message:R,type:z}),setTimeout(()=>N(null),3e3)},[]);u.useEffect(()=>{C.length>0&&Ds(C)},[C]);const oe=u.useCallback((R=null)=>{S(R),n(!0)},[]),St=u.useCallback(()=>{n(!1),S(null)},[]),Ct=u.useCallback(async(R,z)=>{try{z?(await h(z,R),X("Íµ¨ÎèÖÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§")):(await c(R),X("ÏÉà Íµ¨ÎèÖÏù¥ Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§"))}catch(re){X("Ï†ÄÏû• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§","error"),console.error(re)}},[c,h,X]),Et=u.useCallback(async R=>{if(confirm("Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?"))try{await d(R),X("Íµ¨ÎèÖÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")}catch(z){X("ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§","error"),console.error(z)}},[d,X]),Pt=u.useCallback(R=>{D(z=>z===R?null:R)},[]),Dt=m.filter(R=>!R.isPaused).length;return y?e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 spinner"}),e.jsx("p",{className:"text-gray-500 dark:text-dark-400 text-sm",children:"Î°úÎî© Ï§ë..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900 text-gray-800 dark:text-white font-sans pb-24 md:pb-10 transition-colors",children:[s&&e.jsx(tr,{}),e.jsx(Rs,{subscriptionCount:Dt,onOpenSettings:()=>x(!0)}),e.jsxs("main",{className:`max-w-lg mx-auto px-4 py-6 pb-24 space-y-5 ${s?"pt-16":""}`,children:[O==="home"&&e.jsxs(e.Fragment,{children:[e.jsx(_s,{totalMonthlyCost:_,totalYearlyCost:B,subscriptions:C}),e.jsx(Os,{items:de}),e.jsx(Bs,{subscriptions:C,totalMonthlyCost:_,totalYearlyCost:B,categoryBreakdown:Y,onCategoryClick:Pt}),e.jsx(sr,{subscriptions:C,budget:L.budget,monthlyIncome:L.monthlyIncome})]}),O==="subscriptions"&&e.jsxs(e.Fragment,{children:[e.jsx(Gs,{searchQuery:b,onSearchChange:f,selectedCategory:E,onCategoryChange:D,sortBy:k,onSortChange:M,showPaused:I,onShowPausedChange:A}),e.jsx(Ws,{subscriptions:C,searchQuery:b,selectedCategory:E,sortBy:k,showPaused:I,onEdit:oe,onDelete:Et,onTogglePause:g,onAddNew:()=>oe()}),e.jsx(Sr,{subscriptions:C,onEdit:oe})]}),O==="analysis"&&e.jsxs(e.Fragment,{children:[e.jsx(lr,{subscriptions:C,monthlyIncome:L.monthlyIncome}),e.jsx(rr,{subscriptions:C}),e.jsx(nr,{subscriptions:C}),e.jsx(Er,{subscriptions:C,totalMonthlyCost:_})]}),O==="management"&&e.jsxs(e.Fragment,{children:[e.jsx(Nr,{subscriptions:C,onUpdateSubscription:h}),e.jsx(vr,{subscriptions:C}),e.jsx(yr,{subscriptions:C}),e.jsx(jr,{subscriptions:C,totalMonthlyCost:_})]}),O==="tools"&&e.jsxs(e.Fragment,{children:[e.jsx(or,{subscriptions:C}),e.jsx(mr,{subscriptions:C}),e.jsx(xr,{subscriptions:C}),e.jsx(gr,{subscriptions:C}),e.jsx(hr,{subscriptions:C}),e.jsx(ur,{subscriptions:C}),e.jsx(fr,{subscriptions:C}),e.jsx(wr,{subscriptions:C}),e.jsx(Cr,{})]})]}),e.jsx(Dr,{activeTab:O,onTabChange:T}),e.jsx(pr,{subscriptions:C,onEdit:oe}),e.jsx("button",{onClick:()=>oe(),className:"fixed bottom-20 right-6 w-14 h-14 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-xl shadow-primary-500/40 flex items-center justify-center transition-all hover:scale-105 active:scale-95 z-40 fab-pulse","aria-label":"ÏÉà Íµ¨ÎèÖ Ï∂îÍ∞Ä",children:e.jsx(le,{size:24})}),e.jsx(Js,{isOpen:l,onClose:St,onSave:Ct,editData:v}),e.jsx(er,{isOpen:j,onClose:()=>x(!1),subscriptions:m,onImport:s?null:r.importSubscriptions,onClearAll:s?null:r.clearAllSubscriptions,onSettingsChange:P}),p&&e.jsx("div",{className:`toast ${p.type==="error"?"bg-red-500 text-white":"bg-gray-900 dark:bg-white text-white dark:text-gray-900"}`,children:p.message})]})}function at({children:t}){const{isAuthenticated:s,loading:i}=Z();return i?e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsx("div",{className:"w-12 h-12 spinner"})}):s?t:e.jsx(js,{to:"/login",replace:!0})}function Ar(){return e.jsx(yt,{children:e.jsx(Ss,{children:e.jsx(fs,{children:e.jsx(u.Suspense,{fallback:e.jsx(Tr,{}),children:e.jsxs(ys,{children:[e.jsx(ue,{path:"/login",element:e.jsx($r,{})}),e.jsx(ue,{path:"/forgot-password",element:e.jsx(Mr,{})}),e.jsx(ue,{path:"/profile",element:e.jsx(at,{children:e.jsx(Rr,{})})}),e.jsx(ue,{path:"/",element:e.jsx(at,{children:e.jsx(Ir,{})})})]})})})})})}Le.createRoot(document.getElementById("root")).render(e.jsx(ks.StrictMode,{children:e.jsx(yt,{children:e.jsx(Ar,{})})}));export{w as l,Z as u};
