const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginPage-0RtMcJ_w.js","assets/vendor-ui-xJyZwkfJ.js","assets/vendor-react-DAxIwopO.js","assets/vendor-firebase-cSXO_zK6.js","assets/ForgotPasswordPage-DjlEUA8M.js","assets/ProfilePage-Dgo8ceS5.js","assets/AdminDashboard-DGvS2ei-.js"])))=>i.map(i=>d[i]);
import{j as e,C as Je,S as he,M as pe,a as Ge,U as Ye,b as qe,L as He,T as te,c as Ve,d as re,e as Ke,f as be,D as Xe,g as Ze,h as Qe,i as et,P as ae,G as tt,k as fe,l as Q,E as ye,m as rt,n as st,o as ke,p as we,X as se,q as at,r as je,F as ot,s as nt,t as lt,u as it}from"./vendor-ui-xJyZwkfJ.js";import{a as ct,r as i,u as ve,B as dt,R as mt,b as W,N as Ne,c as ut}from"./vendor-react-DAxIwopO.js";import{i as Ce,g as Se,a as De,G as xt,o as gt,c as ht,u as oe,s as pt,b as bt,d as ft,e as yt,f as $,h as ne,E as kt,r as wt,j as jt,k as vt,l as le,m as F,n as Nt,q as Ct,p as St,t as Dt,v as Pt,w as Et,x as At,y as ie}from"./vendor-firebase-cSXO_zK6.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}})();var ee={},ce=ct;ee.createRoot=ce.createRoot,ee.hydrateRoot=ce.hydrateRoot;const Lt="modulepreload",Ot=function(s){return"/"+s},de={},Y=function(r,a,l){let t=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));t=Promise.allSettled(a.map(g=>{if(g=Ot(g),g in de)return;de[g]=!0;const o=g.endsWith(".css"),m=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${m}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Lt,o||(u.as="script"),u.crossOrigin="",u.href=g,h&&u.setAttribute("nonce",h),document.head.appendChild(u),o)return new Promise((p,c)=>{u.addEventListener("load",p),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${g}`)))})}))}function n(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return t.then(d=>{for(const h of d||[])h.status==="rejected"&&n(h.reason);return r().catch(n)})},Pe={apiKey:"AIzaSyCOmZlYloOmCZFnLY0Sx11aIWkggyhqp9o",authDomain:"subscription-management-5a1f6.firebaseapp.com",projectId:"subscription-management-5a1f6",storageBucket:"subscription-management-5a1f6.firebasestorage.app",messagingSenderId:"649626484022",appId:"1:649626484022:web:0b116d8b160e8d85a1c797"},G="subscription-manager-v1",Ee=Ce(Pe),A=Se(Ee),X=De(Ee),Mt=new xt,Ae=i.createContext();function Tt({children:s}){const[r,a]=i.useState(null),[l,t]=i.useState(null),[n,d]=i.useState(!0),[h,g]=i.useState(null),[o,m]=i.useState(!1);i.useEffect(()=>{const f=localStorage.getItem("demoMode");if(f){const w=JSON.parse(f);new Date(w.expiresAt)>new Date?(m(!0),d(!1)):(localStorage.removeItem("demoMode"),localStorage.removeItem("demoSubscriptions"))}},[]),i.useEffect(()=>{const f=gt(A,async w=>{w&&!o?(a(w),await u(w.uid)):o||(a(null),t(null)),d(!1)});return()=>f()},[o]);const u=async f=>{try{const w=await le($(X,"users",f));w.exists()&&t(w.data())}catch(w){console.error("Error fetching user profile:",w)}},p=async(f,w={})=>{const j=$(X,"users",f.uid),L=await le(j),I={uid:f.uid,email:f.email,displayName:f.displayName||w.displayName||"",photoURL:f.photoURL||"",isAdmin:!1,isDisabled:!1,lastLoginAt:F(),...w};L.exists()||(I.createdAt=F(),I.subscriptionCount=0,I.totalMonthlyCost=0),await ne(j,I,{merge:!0}),t(I)},c=i.useCallback(async(f,w,j)=>{g(null);try{const L=await ht(A,f,w);return await oe(L.user,{displayName:j}),await p(L.user,{displayName:j}),o&&await x(L.user.uid),m(!1),L.user}catch(L){throw g(U(L.code)),L}},[o]),N=i.useCallback(async(f,w)=>{g(null);try{const j=await pt(A,f,w);return await p(j.user),m(!1),j.user}catch(j){throw g(U(j.code)),j}},[]),D=i.useCallback(async()=>{g(null);try{const f=await bt(A,Mt);return await p(f.user),o&&await x(f.user.uid),m(!1),f.user}catch(f){throw g(U(f.code)),f}},[o]),S=i.useCallback(async()=>{g(null);try{const f=await ft(A);return await p(f.user,{displayName:"ê²ŒìŠ¤íŠ¸"}),m(!1),f.user}catch(f){throw g(U(f.code)),f}},[]),P=i.useCallback(()=>{const f=new Date;f.setMinutes(f.getMinutes()+30),localStorage.setItem("demoMode",JSON.stringify({startedAt:new Date().toISOString(),expiresAt:f.toISOString()})),m(!0),d(!1)},[]),O=i.useCallback(()=>{localStorage.removeItem("demoMode"),localStorage.removeItem("demoSubscriptions"),m(!1)},[]),x=async f=>{const w=localStorage.getItem("demoSubscriptions");if(w){const j=JSON.parse(w);localStorage.setItem("pendingMigration",JSON.stringify({uid:f,subs:j}))}localStorage.removeItem("demoMode"),localStorage.removeItem("demoSubscriptions")},b=i.useCallback(async f=>{g(null);try{await yt(A,f)}catch(w){throw g(U(w.code)),w}},[]),k=i.useCallback(async f=>{g(null);try{(f.displayName||f.photoURL)&&await oe(A.currentUser,{displayName:f.displayName||A.currentUser.displayName,photoURL:f.photoURL||A.currentUser.photoURL});const w=$(X,"users",A.currentUser.uid);await ne(w,f,{merge:!0}),t(j=>({...j,...f})),a(A.currentUser)}catch(w){throw g(U(w.code)),w}},[]),C=i.useCallback(async(f,w)=>{g(null);try{const j=kt.credential(A.currentUser.email,f);await wt(A.currentUser,j),await jt(A.currentUser,w)}catch(j){throw g(U(j.code)),j}},[]),M=i.useCallback(async()=>{try{await vt(A),a(null),t(null),m(!1)}catch(f){console.error("Sign out error:",f)}},[]),z=(l==null?void 0:l.isAdmin)===!0,V={user:r,userProfile:l,loading:n,error:h,isDemo:o,isAdmin:z,isAuthenticated:!!r||o,signUpWithEmail:c,signInWithEmail:N,signInWithGoogle:D,signInAsGuest:S,startDemoMode:P,exitDemoMode:O,resetPassword:b,updateUserProfile:k,changePassword:C,signOut:M,clearError:()=>g(null)};return e.jsx(Ae.Provider,{value:V,children:s})}function q(){const s=i.useContext(Ae);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}function U(s){return{"auth/email-already-in-use":"ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤","auth/invalid-email":"ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹ì…ë‹ˆë‹¤","auth/operation-not-allowed":"ì´ ë¡œê·¸ì¸ ë°©ì‹ì€ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤","auth/weak-password":"ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì•½í•©ë‹ˆë‹¤ (6ì ì´ìƒ)","auth/user-disabled":"ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤","auth/user-not-found":"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³„ì •ì…ë‹ˆë‹¤","auth/wrong-password":"ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤","auth/invalid-credential":"ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤","auth/too-many-requests":"ë„ˆë¬´ ë§ì€ ì‹œë„ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”","auth/popup-closed-by-user":"ë¡œê·¸ì¸ íŒì—…ì´ ë‹«í˜”ìŠµë‹ˆë‹¤","auth/cancelled-popup-request":"ë¡œê·¸ì¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤","auth/network-request-failed":"ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"}[s]||"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."}const Le=i.createContext();function Oe({children:s}){const[r,a]=i.useState(()=>{if(typeof window<"u"){const t=localStorage.getItem("theme");return t?t==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});i.useEffect(()=>{const t=document.documentElement;r?(t.classList.add("dark"),localStorage.setItem("theme","dark")):(t.classList.remove("dark"),localStorage.setItem("theme","light"))},[r]);const l=()=>a(t=>!t);return e.jsx(Le.Provider,{value:{isDark:r,toggleTheme:l},children:s})}function Me(){const s=i.useContext(Le);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s}const Te=Ce(Pe);Se(Te);const Ie=s=>{const r=new Date,a=r.getDate(),l=r.getMonth(),t=r.getFullYear();let n=new Date(t,l,s);for(a>s&&(n=new Date(t,l+1,s));n.getDate()!==s;)n.setDate(n.getDate()-1);if(a===s)return 0;const d=n.getTime()-r.getTime();return Math.ceil(d/(1e3*60*60*24))},It=s=>{if(!s)return-1;const r=new Date(s);return Math.ceil((r-new Date)/(1e3*60*60*24))},B=De(Te);function Ft(s){const[r,a]=i.useState([]),[l,t]=i.useState(!0),[n,d]=i.useState(null),h=i.useCallback(()=>s?Nt(B,"artifacts",G,"users",s.uid,"subscriptions"):null,[s]);i.useEffect(()=>{if(!s){a([]),t(!1);return}const x=h();if(!x)return;const b=Ct(x,St("cost","desc")),k=Dt(b,C=>{const M=C.docs.map(z=>({id:z.id,...z.data()}));a(M),t(!1),d(null)},C=>{console.error("Firestore error:",C),d(C.message),t(!1)});return()=>k()},[s,h]);const g=i.useCallback(async x=>{if(!s)throw new Error("User not authenticated");const b=h();if(!b)throw new Error("Collection not available");try{const k={name:x.name,cost:Number(x.cost),billingDay:Number(x.billingDay),billingCycle:x.billingCycle||"monthly",category:x.category,url:x.url||"",customColor:x.customColor||"",isPaused:!1,notes:x.notes||"",trialEndDate:x.trialEndDate||null,createdAt:F(),updatedAt:F()};return(await Pt(b,k)).id}catch(k){throw console.error("Error adding subscription:",k),k}},[s,h]),o=i.useCallback(async(x,b)=>{if(!s)throw new Error("User not authenticated");const k=$(B,"artifacts",G,"users",s.uid,"subscriptions",x);try{const C={...b,cost:b.cost!==void 0?Number(b.cost):void 0,billingDay:b.billingDay!==void 0?Number(b.billingDay):void 0,updatedAt:F()};Object.keys(C).forEach(M=>{C[M]===void 0&&delete C[M]}),await Et(k,C)}catch(C){throw console.error("Error updating subscription:",C),C}},[s]),m=i.useCallback(async x=>{if(!s)throw new Error("User not authenticated");const b=$(B,"artifacts",G,"users",s.uid,"subscriptions",x);try{await At(b)}catch(k){throw console.error("Error deleting subscription:",k),k}},[s]),u=i.useCallback(async x=>{const b=r.find(k=>k.id===x);b&&await o(x,{isPaused:!b.isPaused,pausedAt:b.isPaused?null:F()})},[r,o]),p=i.useCallback(async x=>{if(!s)throw new Error("User not authenticated");const b=h();if(!b)throw new Error("Collection not available");const k=ie(B);for(const C of x){const M=$(b);k.set(M,{...C,cost:Number(C.cost),billingDay:Number(C.billingDay),isPaused:C.isPaused||!1,createdAt:F(),updatedAt:F()})}return await k.commit(),x.length},[s,h]),c=i.useCallback(async()=>{if(!s)throw new Error("User not authenticated");const x=ie(B);for(const b of r){const k=$(B,"artifacts",G,"users",s.uid,"subscriptions",b.id);x.delete(k)}await x.commit()},[s,r]),N=i.useMemo(()=>r.filter(x=>!x.isPaused).reduce((x,b)=>{let k=b.cost;return b.billingCycle==="yearly"?k=b.cost/12:b.billingCycle==="weekly"&&(k=b.cost*4),x+k},0),[r]),D=i.useMemo(()=>r.filter(x=>!x.isPaused).reduce((x,b)=>{let k=b.cost*12;return b.billingCycle==="yearly"?k=b.cost:b.billingCycle==="weekly"&&(k=b.cost*52),x+k},0),[r]),S=i.useMemo(()=>[...r].map(x=>({...x,daysLeft:Ie(x.billingDay)})).sort((x,b)=>x.daysLeft-b.daysLeft),[r]),P=i.useMemo(()=>S.filter(x=>!x.isPaused&&x.daysLeft<=7),[S]),O=i.useMemo(()=>{const x={};return r.filter(b=>!b.isPaused).forEach(b=>{x[b.category]||(x[b.category]={count:0,total:0}),x[b.category].count+=1,x[b.category].total+=b.cost}),x},[r]);return{subscriptions:r,loading:l,error:n,addSubscription:g,updateSubscription:o,deleteSubscription:m,togglePause:u,importSubscriptions:p,clearAllSubscriptions:c,totalMonthlyCost:N,totalYearlyCost:D,sortedByDate:S,upcomingPayments:P,categoryBreakdown:O,activeCount:r.filter(x=>!x.isPaused).length,pausedCount:r.filter(x=>x.isPaused).length}}const me=[{id:"demo-1",name:"Netflix",cost:17e3,billingDay:15,billingCycle:"monthly",category:"OTT",url:"https://www.netflix.com",customColor:"#E50914",isPaused:!1,notes:"í”„ë¦¬ë¯¸ì—„ ìš”ê¸ˆì œ"},{id:"demo-2",name:"Spotify",cost:10900,billingDay:20,billingCycle:"monthly",category:"Music",url:"https://www.spotify.com",customColor:"#1DB954",isPaused:!1,notes:""},{id:"demo-3",name:"YouTube Premium",cost:14900,billingDay:5,billingCycle:"monthly",category:"OTT",url:"https://www.youtube.com",customColor:"#FF0000",isPaused:!1,notes:"ê°€ì¡± ìš”ê¸ˆì œ"},{id:"demo-4",name:"ChatGPT Plus",cost:28600,billingDay:10,billingCycle:"monthly",category:"Work",url:"https://chat.openai.com",customColor:"#10A37F",isPaused:!1,notes:"GPT-4 ì‚¬ìš©"},{id:"demo-5",name:"Coupang Wow",cost:7890,billingDay:1,billingCycle:"monthly",category:"Shopping",url:"https://www.coupang.com",customColor:"#342971",isPaused:!1,notes:"ë¡œì¼“ë°°ì†¡ ë¬´ë£Œ"},{id:"demo-6",name:"iCloud+",cost:1100,billingDay:25,billingCycle:"monthly",category:"Utility",url:"https://www.icloud.com",customColor:"#3478F6",isPaused:!0,notes:"50GB ì €ì¥ê³µê°„"},{id:"demo-7",name:"Notion",cost:1e4,billingDay:12,billingCycle:"monthly",category:"Work",url:"https://www.notion.so",customColor:"#000000",isPaused:!1,notes:"Plus ìš”ê¸ˆì œ"},{id:"demo-8",name:"ë°€ë¦¬ì˜ ì„œì¬",cost:9900,billingDay:18,billingCycle:"monthly",category:"Education",url:"https://www.millie.co.kr",customColor:"#FFD700",isPaused:!1,notes:""}];function T(){const s=localStorage.getItem("demoSubscriptions");return s?JSON.parse(s):(localStorage.setItem("demoSubscriptions",JSON.stringify(me)),me)}function Z(s){const r=T(),a=r.findIndex(l=>l.id===s.id);return a>=0?r[a]=s:(s.id=`demo-${Date.now()}`,r.push(s)),localStorage.setItem("demoSubscriptions",JSON.stringify(r)),s}function zt(s){const a=T().filter(l=>l.id!==s);localStorage.setItem("demoSubscriptions",JSON.stringify(a))}function Rt(){localStorage.removeItem("demoMode"),localStorage.removeItem("demoSubscriptions")}function Ut(){const s=localStorage.getItem("demoMode");if(!s)return null;const r=JSON.parse(s),a=new Date(r.expiresAt),l=new Date;if(a<=l)return Rt(),null;const t=a-l,n=Math.ceil(t/(1e3*60));return{...r,remainingMinutes:n,isExpired:!1}}function $t({subscriptionCount:s,onOpenSettings:r}){var D;const{isDark:a,toggleTheme:l}=Me(),{user:t,userProfile:n,isAdmin:d,isDemo:h,signOut:g}=q(),o=ve(),[m,u]=i.useState(!1),p=async()=>{await g(),o("/login")},c=(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName)||(h?"ì²´í—˜ ì¤‘":"ì‚¬ìš©ì"),N=(n==null?void 0:n.photoURL)||(t==null?void 0:t.photoURL);return e.jsx("header",{className:"bg-white dark:bg-dark-800 sticky top-0 z-20 shadow-sm dark:shadow-dark-900/50 transition-colors",children:e.jsxs("div",{className:"max-w-lg mx-auto px-4 py-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary-500 to-primary-600 p-2 rounded-xl text-white shadow-lg shadow-primary-500/30",children:e.jsx(Je,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white tracking-tight",children:"êµ¬ë… ë§¤ë‹ˆì €"}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-400 -mt-0.5",children:"Pro Edition"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 bg-gray-100 dark:bg-dark-700 px-3 py-1.5 rounded-full",children:[e.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-bold",children:s}),e.jsx("span",{className:"ml-1",children:"êµ¬ë…ì¤‘"})]}),e.jsx("button",{onClick:l,className:"p-2 rounded-xl text-gray-500 dark:text-dark-400 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors","aria-label":"í…Œë§ˆ ë³€ê²½",children:a?e.jsx(he,{size:18}):e.jsx(pe,{size:18})}),e.jsx("button",{onClick:r,className:"p-2 rounded-xl text-gray-500 dark:text-dark-400 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors","aria-label":"ì„¤ì •",children:e.jsx(Ge,{size:18})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>u(!m),className:"flex items-center gap-2 p-1.5 pr-3 rounded-xl hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx("div",{className:"w-7 h-7 rounded-full bg-primary-500 flex items-center justify-center text-white text-xs font-medium overflow-hidden",children:N?e.jsx("img",{src:N,alt:"",className:"w-full h-full object-cover"}):((D=c[0])==null?void 0:D.toUpperCase())||"U"})}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>u(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-dark-700 rounded-xl shadow-lg border border-gray-100 dark:border-dark-600 z-20 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-dark-600",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:c}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 truncate",children:(t==null?void 0:t.email)||"ì²´í—˜ ëª¨ë“œ"})]}),e.jsxs("div",{className:"py-1",children:[!h&&e.jsxs("button",{onClick:()=>{u(!1),o("/profile")},className:"w-full px-4 py-2.5 text-left text-sm text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 flex items-center gap-2",children:[e.jsx(Ye,{size:16}),"í”„ë¡œí•„ ì„¤ì •"]}),d&&e.jsxs("button",{onClick:()=>{u(!1),o("/admin")},className:"w-full px-4 py-2.5 text-left text-sm text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 flex items-center gap-2",children:[e.jsx(qe,{size:16}),"ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ"]}),e.jsxs("button",{onClick:()=>{u(!1),p()},className:"w-full px-4 py-2.5 text-left text-sm text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 flex items-center gap-2",children:[e.jsx(He,{size:16}),h?"ì²´í—˜ ì¢…ë£Œ":"ë¡œê·¸ì•„ì›ƒ"]})]})]})]})]})]})]})})}const E={OTT:"#E50914",Music:"#1DB954",Shopping:"#FF9900",Utility:"#00A4EF",Work:"#5A5A5A",Education:"#FFD700",Health:"#10B981",Finance:"#8B5CF6",Etc:"#808080"},H={OTT:"ì˜ìƒ/ìŠ¤íŠ¸ë¦¬ë°",Music:"ìŒì•…",Shopping:"ì‡¼í•‘/ì´ì»¤ë¨¸ìŠ¤",Utility:"ìœ í‹¸ë¦¬í‹°",Work:"ì—…ë¬´/ìƒì‚°ì„±",Education:"êµìœ¡/í•™ìŠµ",Health:"ê±´ê°•/ìš´ë™",Finance:"ê¸ˆìœµ/íˆ¬ì",Etc:"ê¸°íƒ€"},_t=[{name:"Netflix",category:"OTT",color:"#E50914",url:"https://www.netflix.com",defaultCost:17e3},{name:"YouTube Premium",category:"OTT",color:"#FF0000",url:"https://www.youtube.com",defaultCost:14900},{name:"Disney+",category:"OTT",color:"#113CCF",url:"https://www.disneyplus.com",defaultCost:9900},{name:"Wavve",category:"OTT",color:"#1C1B1F",url:"https://www.wavve.com",defaultCost:13900},{name:"Tving",category:"OTT",color:"#FF153C",url:"https://www.tving.com",defaultCost:13900},{name:"Watcha",category:"OTT",color:"#FF0558",url:"https://watcha.com",defaultCost:12900},{name:"Spotify",category:"Music",color:"#1DB954",url:"https://www.spotify.com",defaultCost:10900},{name:"Melon",category:"Music",color:"#00CD3C",url:"https://www.melon.com",defaultCost:10900},{name:"Apple Music",category:"Music",color:"#FA233B",url:"https://music.apple.com",defaultCost:10900},{name:"Genie",category:"Music",color:"#3D85C6",url:"https://www.genie.co.kr",defaultCost:10900},{name:"Bugs",category:"Music",color:"#FF3366",url:"https://music.bugs.co.kr",defaultCost:9500},{name:"Coupang Wow",category:"Shopping",color:"#342971",url:"https://www.coupang.com",defaultCost:7890},{name:"Naver Plus",category:"Shopping",color:"#03C75A",url:"https://nid.naver.com",defaultCost:4900},{name:"SSG ìœ ë‹ˆë²„ìŠ¤",category:"Shopping",color:"#FF5A5A",url:"https://www.ssg.com",defaultCost:4900},{name:"Notion",category:"Work",color:"#000000",url:"https://www.notion.so",defaultCost:1e4},{name:"ChatGPT Plus",category:"Work",color:"#10A37F",url:"https://chat.openai.com",defaultCost:2e4},{name:"Figma",category:"Work",color:"#F24E1E",url:"https://www.figma.com",defaultCost:15e3},{name:"GitHub Copilot",category:"Work",color:"#000000",url:"https://github.com",defaultCost:1e4},{name:"Slack",category:"Work",color:"#4A154B",url:"https://slack.com",defaultCost:1e4},{name:"Zoom",category:"Work",color:"#2D8CFF",url:"https://zoom.us",defaultCost:16e3},{name:"Adobe CC",category:"Work",color:"#FF0000",url:"https://www.adobe.com",defaultCost:24e3},{name:"ë°€ë¦¬ì˜ ì„œì¬",category:"Education",color:"#FFD700",url:"https://www.millie.co.kr",defaultCost:9900},{name:"Duolingo",category:"Education",color:"#58CC02",url:"https://www.duolingo.com",defaultCost:14900},{name:"Coursera",category:"Education",color:"#0056D2",url:"https://www.coursera.org",defaultCost:59e3},{name:"í´ë˜ìŠ¤101",category:"Education",color:"#FF6B00",url:"https://class101.net",defaultCost:19900},{name:"Nike Training Club",category:"Health",color:"#000000",url:"https://www.nike.com",defaultCost:0},{name:"Keep",category:"Health",color:"#00C8FF",url:"https://www.gotokeep.com",defaultCost:9900},{name:"iCloud+",category:"Utility",color:"#3478F6",url:"https://www.icloud.com",defaultCost:1100},{name:"Google One",category:"Utility",color:"#4285F4",url:"https://one.google.com",defaultCost:2400},{name:"Dropbox",category:"Utility",color:"#0061FF",url:"https://www.dropbox.com",defaultCost:12e3},{name:"1Password",category:"Utility",color:"#1A8CFF",url:"https://1password.com",defaultCost:5e3},{name:"NordVPN",category:"Utility",color:"#4687FF",url:"https://nordvpn.com",defaultCost:15e3}],Bt={monthly:{label:"ì›”ê°„",multiplier:1},yearly:{label:"ì—°ê°„",multiplier:12},weekly:{label:"ì£¼ê°„",multiplier:.25}},Wt=[{value:"daysLeft",label:"ê²°ì œì¼ ìˆœ"},{value:"cost-desc",label:"ê¸ˆì•¡ ë†’ì€ ìˆœ"},{value:"cost-asc",label:"ê¸ˆì•¡ ë‚®ì€ ìˆœ"},{value:"name",label:"ì´ë¦„ ìˆœ"},{value:"category",label:"ì¹´í…Œê³ ë¦¬ ìˆœ"}];function Jt({items:s}){const r=new Date().getDate(),a=i.useMemo(()=>[...s].filter(t=>!t.isPaused).sort((t,n)=>{let d=t.billingDay<r?t.billingDay+31:t.billingDay,h=n.billingDay<r?n.billingDay+31:n.billingDay;return d-h}),[s,r]);if(a.length===0)return e.jsx("div",{className:"text-xs text-white/60 text-center py-4",children:"ê²°ì œ ì˜ˆì •ì¸ êµ¬ë…ì´ ì—†ìŠµë‹ˆë‹¤"});const l=a.slice(0,7);return e.jsxs("div",{className:"relative pt-2 pb-4",children:[e.jsx("div",{className:"relative h-2 bg-white/10 rounded-full overflow-hidden",children:l.map((t,n)=>{const d=t.billingDay<r?(t.billingDay+31-r)/31:(t.billingDay-r)/31,h=t.customColor||E[t.category]||E.Etc;return e.jsx("div",{className:"absolute h-full w-1 rounded-full transition-all",style:{left:`${d*100}%`,backgroundColor:h}},t.id)})}),e.jsx("div",{className:"flex justify-between mt-4 px-1",children:l.slice(0,5).map((t,n)=>{const d=t.billingDay<r,h=t.billingDay===r,g=t.customColor||E[t.category]||E.Etc;return e.jsxs("div",{className:"flex flex-col items-center group cursor-pointer",style:{flex:`0 0 ${100/5}%`},children:[e.jsx("div",{className:`w-3 h-3 rounded-full border-2 transition-all ${h?"animate-pulse scale-125":d?"opacity-40":"group-hover:scale-110"}`,style:{backgroundColor:g,borderColor:"rgba(255,255,255,0.5)"}}),e.jsx("span",{className:`text-[10px] font-semibold mt-1.5 ${h?"text-white":d?"text-white/40":"text-white/80"}`,children:h?"ì˜¤ëŠ˜":`${t.billingDay}ì¼`}),e.jsx("span",{className:`text-[10px] truncate w-full text-center ${h?"text-white font-bold":d?"text-white/40":"text-white/70"}`,children:t.name.length>6?t.name.slice(0,6)+"..":t.name}),e.jsxs("span",{className:"text-[9px] text-white/50 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.cost.toLocaleString(),"ì›"]})]},t.id)})}),a.length>5&&e.jsx("div",{className:"text-center mt-2",children:e.jsxs("span",{className:"text-[10px] text-white/40",children:["+",a.length-5,"ê°œ ë” ìˆìŒ"]})})]})}function Gt({totalMonthlyCost:s,totalYearlyCost:r,subscriptions:a,previousMonthCost:l=null}){const t=l?((s-l)/l*100).toFixed(1):null;return e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary-600 via-primary-700 to-violet-700 dark:from-primary-700 dark:via-primary-800 dark:to-violet-800 rounded-3xl p-6 text-white shadow-xl shadow-primary-500/20 dark:shadow-primary-900/30",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-8 -mt-8 w-40 h-40 rounded-full bg-white opacity-[0.07] blur-2xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 -ml-8 -mb-8 w-32 h-32 rounded-full bg-white opacity-[0.07] blur-xl pointer-events-none"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-20 h-20 rounded-full bg-violet-400 opacity-10 blur-xl pointer-events-none"}),e.jsxs("div",{className:"relative",children:[e.jsxs("p",{className:"text-white/70 text-sm font-medium mb-1 flex items-center gap-2",children:["ì´ë²ˆ ë‹¬ ì˜ˆìƒ ì§€ì¶œì•¡",t!==null&&e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full flex items-center gap-0.5 ${parseFloat(t)>0?"bg-red-500/20 text-red-200":"bg-green-500/20 text-green-200"}`,children:[parseFloat(t)>0?e.jsx(te,{size:10}):e.jsx(Ve,{size:10}),Math.abs(parseFloat(t)),"%"]})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-2",children:[e.jsx("h2",{className:"text-4xl font-extrabold tracking-tight",children:s.toLocaleString()}),e.jsx("span",{className:"text-xl opacity-80 font-medium",children:"ì›"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/60 mb-6",children:[e.jsxs("span",{children:["ì—°ê°„ ì•½ ",Math.round(r/1e4).toLocaleString(),"ë§Œì›"]}),e.jsx("span",{className:"text-white/30",children:"|"}),e.jsxs("span",{children:["ì¼ í‰ê·  ",Math.round(s/30).toLocaleString(),"ì›"]})]})]}),e.jsxs("div",{className:"bg-white/[0.08] backdrop-blur-md rounded-2xl p-4 border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-white/70 flex items-center gap-1.5",children:[e.jsx(re,{size:12}),"ê²°ì œ ì¼ì •"]}),e.jsxs("span",{className:"text-[10px] text-white/50",children:[new Date().getMonth()+1,"ì›”"]})]}),e.jsx(Jt,{items:a})]})]})}function Yt({items:s}){return!s||s.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl p-4 shadow-sm border-l-4 border-red-500 dark:border-red-400 flex items-start gap-3 animate-fade-in",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-2 rounded-full text-red-500 dark:text-red-400 flex-shrink-0",children:e.jsx(Ke,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-2",children:["ê³§ ê²°ì œë˜ëŠ” ì„œë¹„ìŠ¤",e.jsx("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-[10px] px-1.5 py-0.5 rounded-full font-medium",children:s.length})]}),e.jsx("div",{className:"mt-2 space-y-1.5",children:s.map(r=>e.jsxs("div",{className:"text-sm flex justify-between items-center py-1 border-b border-gray-50 dark:border-dark-700 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:r.customColor||"#E50914"}}),e.jsx("span",{className:"text-gray-600 dark:text-dark-300 truncate",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("span",{className:"text-xs text-gray-400 dark:text-dark-500",children:[r.cost.toLocaleString(),"ì›"]}),e.jsx("span",{className:`font-bold text-xs px-2 py-0.5 rounded ${r.daysLeft===0?"bg-red-500 text-white":"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400"}`,children:r.daysLeft===0?"ì˜¤ëŠ˜":`D-${r.daysLeft}`})]})]},r.id))})]})]})}function qt({data:s,onCategoryClick:r}){const[a,l]=i.useState(null);if(!s||s.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-400 dark:text-dark-500 bg-gray-50 dark:bg-dark-800 rounded-2xl border border-dashed border-gray-200 dark:border-dark-700",children:[e.jsx(be,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"})]});const t=s.reduce((o,m)=>o+m.cost,0);let n=0;const d=o=>{const m=Math.cos(2*Math.PI*o),u=Math.sin(2*Math.PI*o);return[m,u]},h=s.map(o=>{const m=o.cost/t,u=n;n+=m;const p=n,[c,N]=d(u),[D,S]=d(p),P=m>.5?1:0,O=["M 0 0",`L ${c} ${N}`,`A 1 1 0 ${P} 1 ${D} ${S}`,"L 0 0"].join(" "),x=o.customColor||E[o.category]||E.Etc,b=a===o.id;return e.jsx("path",{d:O,fill:x,className:"chart-segment cursor-pointer",style:{opacity:a&&!b?.5:1,transform:b?"scale(1.03)":"scale(1)"},onMouseEnter:()=>l(o.id),onMouseLeave:()=>l(null),onClick:()=>r==null?void 0:r(o.category)},o.id)}),g=s.find(o=>o.id===a);return e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative w-36 h-36 flex-shrink-0",children:[e.jsx("svg",{viewBox:"-1.1 -1.1 2.2 2.2",className:"transform -rotate-90 w-full h-full drop-shadow-sm",children:h}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-20 h-20 bg-white dark:bg-dark-800 rounded-full flex flex-col items-center justify-center shadow-inner dark:shadow-dark-900/50",children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs font-bold text-gray-800 dark:text-white truncate max-w-[70px]",children:g.name}),e.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-dark-400",children:[Math.round(g.cost/t*100),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"ì´ë²ˆë‹¬"}),e.jsxs("span",{className:"text-sm font-bold text-gray-800 dark:text-white",children:[Math.round(t/1e4),"ë§Œì›"]})]})})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-1.5 text-xs max-h-36 overflow-y-auto scrollbar-hide",children:[s.slice(0,6).map(o=>{const m=o.customColor||E[o.category]||E.Etc,u=a===o.id;return e.jsxs("div",{className:`flex items-center justify-between p-1.5 rounded-lg transition-all cursor-pointer ${u?"bg-gray-100 dark:bg-dark-700":""}`,onMouseEnter:()=>l(o.id),onMouseLeave:()=>l(null),onClick:()=>r==null?void 0:r(o.category),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:m}}),e.jsx("span",{className:"truncate max-w-[80px] text-gray-600 dark:text-dark-300",children:o.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400 dark:text-dark-500 text-[10px]",children:[o.cost.toLocaleString(),"ì›"]}),e.jsxs("span",{className:"font-semibold text-gray-800 dark:text-white w-8 text-right",children:[Math.round(o.cost/t*100),"%"]})]})]},o.id)}),s.length>6&&e.jsxs("div",{className:"text-gray-400 dark:text-dark-500 pl-4 text-[10px]",children:["...ì™¸ ",s.length-6,"ê°œ"]})]})]})}function Ht({subscriptions:s,totalMonthlyCost:r,totalYearlyCost:a,categoryBreakdown:l,onCategoryClick:t}){const n=i.useMemo(()=>{const m=["1ì›”","2ì›”","3ì›”","4ì›”","5ì›”","6ì›”","7ì›”","8ì›”","9ì›”","10ì›”","11ì›”","12ì›”"],u=new Date().getMonth();return Array.from({length:6},(p,c)=>{const N=(u-5+c+12)%12,D=Math.random()*.3-.15,S=Math.round(r*(1+D));return{month:m[N],cost:c===5?r:S,isCurrentMonth:c===5}})},[r]),d=Math.max(...n.map(m=>m.cost)),h=i.useMemo(()=>Object.entries(l).sort((m,u)=>u[1].total-m[1].total).slice(0,5),[l]),g=i.useMemo(()=>[...s].filter(m=>!m.isPaused).sort((m,u)=>u.cost-m.cost)[0],[s]),o=s.filter(m=>!m.isPaused);return s.length===0?null:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(be,{className:"w-4 h-4 text-primary-500"}),"ì§€ì¶œ ë¶„ì„"]}),e.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-dark-500 bg-gray-100 dark:bg-dark-700 px-2 py-1 rounded-full",children:[o.length,"ê°œ í™œì„±"]})]}),e.jsx(qt,{data:o,onCategoryClick:t})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-dark-400 mb-2",children:[e.jsx(Xe,{size:14}),e.jsx("span",{className:"text-xs",children:"ì›” í‰ê· "})]}),e.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[Math.round(r).toLocaleString(),e.jsx("span",{className:"text-sm font-normal text-gray-400 dark:text-dark-500 ml-0.5",children:"ì›"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-dark-400 mb-2",children:[e.jsx(re,{size:14}),e.jsx("span",{className:"text-xs",children:"ì—°ê°„ ì˜ˆìƒ"})]}),e.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[Math.round(a/1e4).toLocaleString(),e.jsx("span",{className:"text-sm font-normal text-gray-400 dark:text-dark-500 ml-0.5",children:"ë§Œì›"})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(Ze,{className:"w-4 h-4 text-primary-500"}),"ì›”ë³„ ì¶”ì´"]}),e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"ìµœê·¼ 6ê°œì›”"})]}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:n.map((m,u)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:`w-full rounded-t-lg transition-all ${m.isCurrentMonth?"bg-gradient-to-t from-primary-500 to-primary-400":"bg-gray-200 dark:bg-dark-600"}`,style:{height:`${m.cost/d*100}%`,minHeight:"8px"}}),e.jsx("span",{className:`text-[10px] ${m.isCurrentMonth?"text-primary-600 dark:text-primary-400 font-bold":"text-gray-400 dark:text-dark-500"}`,children:m.month})]},u))})]}),h.length>0&&e.jsxs("section",{className:"bg-white dark:bg-dark-800 p-5 rounded-3xl shadow-sm border border-gray-100 dark:border-dark-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(te,{className:"w-4 h-4 text-primary-500"}),"ì¹´í…Œê³ ë¦¬ë³„"]})}),e.jsx("div",{className:"space-y-3",children:h.map(([m,u])=>{const p=u.total/r*100,c=E[m]||E.Etc;return e.jsxs("button",{onClick:()=>t==null?void 0:t(m),className:"w-full text-left hover:bg-gray-50 dark:hover:bg-dark-700 rounded-xl p-2 -mx-2 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:c}}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-dark-300",children:H[m]||m}),e.jsxs("span",{className:"text-xs text-gray-400 dark:text-dark-500",children:["(",u.count,"ê°œ)"]})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[u.total.toLocaleString(),"ì›"]})]}),e.jsx("div",{className:"h-1.5 bg-gray-100 dark:bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${p}%`,backgroundColor:c}})})]},m)})})]}),g&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 p-4 rounded-2xl border border-amber-100 dark:border-amber-900/30",children:[e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium mb-1",children:"ğŸ’° ê°€ì¥ ë¹„ì‹¼ êµ¬ë…"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:g.name}),e.jsxs("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:[g.cost.toLocaleString(),"ì›/ì›”"]})]})]})]})}function Vt({searchQuery:s,onSearchChange:r,selectedCategory:a,onCategoryChange:l,sortBy:t,onSortChange:n,showPaused:d,onShowPausedChange:h}){const g=["All",...Object.keys(E)];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-dark-500"}),e.jsx("input",{type:"text",placeholder:"êµ¬ë… ì„œë¹„ìŠ¤ ê²€ìƒ‰...",value:s,onChange:o=>r(o.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-dark-500 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all text-sm"})]}),e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto scrollbar-hide pb-1",children:g.map(o=>e.jsxs("button",{onClick:()=>l(o==="All"?null:o),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all ${o==="All"&&!a||a===o?"bg-primary-500 text-white shadow-md shadow-primary-500/30":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-dark-300 hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:[o!=="All"&&e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:E[o]}}),o==="All"?"ì „ì²´":H[o]||o]},o))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:t,onChange:o=>n(o.target.value),className:"appearance-none pl-3 pr-8 py-1.5 rounded-lg border border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-gray-600 dark:text-dark-300 text-xs font-medium cursor-pointer focus:ring-2 focus:ring-primary-500 outline-none",children:Wt.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))}),e.jsx(et,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-dark-400",children:"ì¼ì‹œì •ì§€ í¬í•¨"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:o=>h(o.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 dark:bg-dark-700 rounded-full peer peer-checked:bg-primary-500 transition-colors"}),e.jsx("div",{className:"absolute left-0.5 top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform peer-checked:translate-x-4"})]})]})]})]})}function ue({subscription:s,onEdit:r,onDelete:a,onTogglePause:l}){const{id:t,name:n,cost:d,billingDay:h,billingCycle:g,category:o,url:m,customColor:u,isPaused:p,trialEndDate:c,daysLeft:N}=s,D=u||E[o]||E.Etc,S=It(c),P=S>=0;return e.jsxs("div",{className:`group bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border transition-all card-hover ${p?"border-gray-200 dark:border-dark-700 opacity-60":N<=3?"border-red-200 dark:border-red-900/50":"border-gray-100 dark:border-dark-700 hover:border-primary-200 dark:hover:border-primary-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsxs("div",{className:`relative w-11 h-11 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md transition-transform group-hover:scale-105 ${p?"grayscale":""}`,style:{backgroundColor:D},children:[n.slice(0,1).toUpperCase(),p&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-500 rounded-full flex items-center justify-center",children:e.jsx(ae,{size:10,className:"text-white"})})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-1.5 truncate",children:[n,m&&e.jsx(tt,{size:10,className:"text-gray-300 dark:text-dark-500 flex-shrink-0"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-dark-400 mt-0.5 flex-wrap",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium",style:{backgroundColor:`${D}15`,color:D},children:H[o]||o}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fe,{size:10}),"ë§¤ì›” ",h,"ì¼"]}),g&&g!=="monthly"&&e.jsx("span",{className:"text-primary-500 dark:text-primary-400 font-medium",children:g==="yearly"?"ì—°ê°„":"ì£¼ê°„"})]}),P&&e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] text-amber-600 dark:text-amber-400",children:[e.jsx(Q,{size:10}),"ë¬´ë£Œì²´í—˜ D-",S]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[e.jsxs("div",{className:`font-bold text-sm ${p?"text-gray-400 line-through":"text-gray-900 dark:text-white"}`,children:[d.toLocaleString(),"ì›"]}),e.jsx("div",{className:`text-[10px] font-bold mt-0.5 ${p?"text-gray-400 dark:text-dark-500":N===0?"text-red-600 dark:text-red-400 animate-pulse":N<=3?"text-red-500 dark:text-red-400":"text-primary-500 dark:text-primary-400"}`,children:p?"ì¼ì‹œì •ì§€":N===0?"Today!":`D-${N}`})]})]}),e.jsxs("div",{className:"pt-3 mt-3 border-t border-gray-50 dark:border-dark-700 flex justify-end items-center gap-2",children:[m&&e.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-1.5 py-1.5 rounded-lg bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 text-xs font-medium hover:bg-primary-100 dark:hover:bg-primary-900/40 transition-colors",children:[e.jsx(ye,{size:12}),"ì„œë¹„ìŠ¤ ì´ë™"]}),e.jsx("button",{onClick:()=>l(t),className:`p-1.5 rounded-lg transition-colors ${p?"text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20":"text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20"}`,title:p?"ì¬ê°œ":"ì¼ì‹œì •ì§€",children:p?e.jsx(rt,{size:16}):e.jsx(ae,{size:16})}),e.jsx("button",{onClick:()=>r(s),className:"p-1.5 text-gray-400 hover:text-primary-600 hover:bg-gray-50 dark:hover:bg-dark-700 rounded-lg transition-colors",title:"ìˆ˜ì •",children:e.jsx(st,{size:16})}),e.jsx("button",{onClick:()=>a(t),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"ì‚­ì œ",children:e.jsx(ke,{size:16})})]})]})}function Kt({subscriptions:s,searchQuery:r,selectedCategory:a,sortBy:l,showPaused:t,onEdit:n,onDelete:d,onTogglePause:h,onAddNew:g}){const o=i.useMemo(()=>{let u=[...s];if(r){const p=r.toLowerCase();u=u.filter(c=>c.name.toLowerCase().includes(p)||c.category.toLowerCase().includes(p))}switch(a&&(u=u.filter(p=>p.category===a)),t||(u=u.filter(p=>!p.isPaused)),l){case"daysLeft":u.sort((p,c)=>(p.daysLeft||0)-(c.daysLeft||0));break;case"cost-desc":u.sort((p,c)=>c.cost-p.cost);break;case"cost-asc":u.sort((p,c)=>p.cost-c.cost);break;case"name":u.sort((p,c)=>p.name.localeCompare(c.name,"ko"));break;case"category":u.sort((p,c)=>p.category.localeCompare(c.category));break}return u},[s,r,a,l,t]),m=i.useMemo(()=>{if(l!=="category")return null;const u={};return o.forEach(p=>{u[p.category]||(u[p.category]=[]),u[p.category].push(p)}),u},[o,l]);return s.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-dark-800 rounded-2xl border border-dashed border-gray-200 dark:border-dark-700",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-dark-700 rounded-full flex items-center justify-center",children:e.jsx(we,{size:24,className:"text-gray-400 dark:text-dark-500"})}),e.jsx("p",{className:"text-gray-500 dark:text-dark-400 text-sm mb-4",children:"ë“±ë¡ëœ êµ¬ë… ì„œë¹„ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:g,className:"text-primary-600 dark:text-primary-400 text-sm font-bold hover:underline",children:"+ ì²« êµ¬ë… ì¶”ê°€í•˜ê¸°"})]}):o.length===0?e.jsx("div",{className:"text-center py-8 bg-white dark:bg-dark-800 rounded-2xl",children:e.jsx("p",{className:"text-gray-400 dark:text-dark-500 text-sm",children:"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤."})}):e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2 text-sm",children:[e.jsx(te,{className:"w-4 h-4 text-primary-500"}),"êµ¬ë… ë¦¬ìŠ¤íŠ¸",e.jsxs("span",{className:"text-xs font-normal text-gray-400 dark:text-dark-500",children:["(",o.length,")"]})]}),l==="daysLeft"&&e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"ê²°ì œì¼ ìˆœ"})]}),e.jsx("div",{className:"space-y-3",children:m?Object.entries(m).map(([u,p])=>e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-medium text-gray-500 dark:text-dark-400 mb-2 pl-1",children:[u," (",p.length,")"]}),e.jsx("div",{className:"space-y-3",children:p.map(c=>e.jsx(ue,{subscription:c,onEdit:n,onDelete:d,onTogglePause:h},c.id))})]},u)):o.map(u=>e.jsx(ue,{subscription:u,onEdit:n,onDelete:d,onTogglePause:h},u.id))})]})}function Xt({isOpen:s,onClose:r,onSave:a,editData:l=null}){const[t,n]=i.useState({name:"",cost:"",billingDay:1,billingCycle:"monthly",category:"OTT",url:"",customColor:"",notes:"",trialEndDate:""}),[d,h]=i.useState({}),[g,o]=i.useState(!0);i.useEffect(()=>{l?(n({name:l.name||"",cost:l.cost||"",billingDay:l.billingDay||1,billingCycle:l.billingCycle||"monthly",category:l.category||"OTT",url:l.url||"",customColor:l.customColor||"",notes:l.notes||"",trialEndDate:l.trialEndDate?new Date(l.trialEndDate.seconds*1e3).toISOString().split("T")[0]:""}),o(!1)):(n({name:"",cost:"",billingDay:new Date().getDate(),billingCycle:"monthly",category:"OTT",url:"",customColor:"",notes:"",trialEndDate:""}),o(!0)),h({})},[l,s]);const m=c=>{n({...t,name:c.name,category:c.category,url:c.url,customColor:c.color,cost:c.defaultCost||""}),o(!1)},u=()=>{const c={};return t.name.trim()||(c.name="ì„œë¹„ìŠ¤ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),(!t.cost||isNaN(t.cost)||Number(t.cost)<0)&&(c.cost="ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),(!t.billingDay||t.billingDay<1||t.billingDay>31)&&(c.billingDay="1~31 ì‚¬ì´ì˜ ë‚ ì§œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"),h(c),Object.keys(c).length===0},p=c=>{if(c.preventDefault(),!u())return;const N={...t,cost:Number(t.cost),billingDay:Number(t.billingDay),trialEndDate:t.trialEndDate?new Date(t.trialEndDate):null};a(N,l==null?void 0:l.id),r()};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-end md:items-center justify-center backdrop-blur-sm modal-backdrop",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-md rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden modal-content max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-gray-50/50 dark:bg-dark-900/50 sticky top-0 z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:l?"êµ¬ë… ì •ë³´ ìˆ˜ì •":"ìƒˆ êµ¬ë… ì¶”ê°€"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx(se,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[!l&&g&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-dark-400 uppercase tracking-wider mb-2 block",children:"ì¸ê¸° ì„œë¹„ìŠ¤ ê°„í¸ ë“±ë¡"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto scrollbar-hide",children:_t.slice(0,16).map(c=>e.jsxs("button",{type:"button",onClick:()=>m(c),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full border border-gray-200 dark:border-dark-600 hover:border-primary-500 hover:text-primary-600 dark:hover:text-primary-400 bg-white dark:bg-dark-700 text-xs font-medium transition-all active:scale-95",children:[e.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:c.color}}),c.name]},c.name))}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"text-xs text-gray-400 dark:text-dark-500 mt-2 hover:text-primary-500",children:"ì§ì ‘ ì…ë ¥í•˜ê¸° â†’"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"ì„œë¹„ìŠ¤ ì´ë¦„ *"}),e.jsx("input",{type:"text",placeholder:"ì˜ˆ: ë„·í”Œë¦­ìŠ¤",className:`w-full px-4 py-2.5 rounded-xl border ${d.name?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white placeholder-gray-400 dark:placeholder-dark-500 focus:bg-white dark:focus:bg-dark-600 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all`,value:t.name,onChange:c=>n({...t,name:c.target.value})}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"ê²°ì œ ê¸ˆì•¡ *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"0",min:"0",className:`w-full pl-4 pr-10 py-2.5 rounded-xl border ${d.cost?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all`,value:t.cost,onChange:c=>n({...t,cost:c.target.value})}),e.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400 dark:text-dark-500 text-sm",children:"ì›"})]}),d.cost&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.cost})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"ê²°ì œì¼ *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"1",max:"31",className:`w-full pl-4 pr-10 py-2.5 rounded-xl border ${d.billingDay?"border-red-400 dark:border-red-500":"border-gray-200 dark:border-dark-600"} bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all`,value:t.billingDay,onChange:c=>n({...t,billingDay:c.target.value})}),e.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400 dark:text-dark-500 text-sm",children:"ì¼"})]}),d.billingDay&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.billingDay})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"ê²°ì œ ì£¼ê¸°"}),e.jsx("div",{className:"flex gap-2",children:Object.entries(Bt).map(([c,{label:N}])=>e.jsx("button",{type:"button",onClick:()=>n({...t,billingCycle:c}),className:`flex-1 py-2 rounded-xl text-xs font-bold transition-all ${t.billingCycle===c?"bg-primary-500 text-white shadow-md":"bg-gray-100 dark:bg-dark-700 text-gray-500 dark:text-dark-400 hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:N},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"ì›¹ì‚¬ì´íŠ¸ ë§í¬ (ì„ íƒ)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-3 top-2.5 text-gray-400 dark:text-dark-500",size:16}),e.jsx("input",{type:"url",placeholder:"https://...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm",value:t.url,onChange:c=>n({...t,url:c.target.value})})]}),e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-1 pl-1",children:"ì…ë ¥ì‹œ ë¦¬ìŠ¤íŠ¸ì—ì„œ ë°”ë¡œê°€ê¸° ë²„íŠ¼ì´ ìƒì„±ë©ë‹ˆë‹¤."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5 flex items-center gap-1",children:["ë¬´ë£Œ ì²´í—˜ ì¢…ë£Œì¼ (ì„ íƒ)",e.jsx(at,{size:12,className:"text-gray-400"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-2.5 text-gray-400 dark:text-dark-500",size:16}),e.jsx("input",{type:"date",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm",value:t.trialEndDate,onChange:c=>n({...t,trialEndDate:c.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-2",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:Object.keys(E).map(c=>e.jsxs("button",{type:"button",onClick:()=>n({...t,category:c}),className:`px-3.5 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-all flex items-center gap-1.5 ${t.category===c?"bg-gray-800 dark:bg-white text-white dark:text-gray-900 shadow-md transform scale-105":"bg-gray-100 dark:bg-dark-700 text-gray-500 dark:text-dark-400 hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:E[c]}}),H[c]||c]},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"ë©”ëª¨ (ì„ íƒ)"}),e.jsx("textarea",{placeholder:"ê³µìœ  ê³„ì •, ìš”ê¸ˆì œ ë“± ë©”ëª¨...",rows:2,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm resize-none",value:t.notes,onChange:c=>n({...t,notes:c.target.value})})]}),e.jsxs("button",{type:"submit",className:"w-full py-3.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold text-base transform active:scale-[0.98] transition-all shadow-lg shadow-primary-500/30 mt-2 flex items-center justify-center gap-2 btn-press",children:[e.jsx(je,{size:20}),l?"ìˆ˜ì • ì™„ë£Œ":"ë“±ë¡í•˜ê¸°"]})]})]})]})}):null}const Zt=s=>{const r=["ì„œë¹„ìŠ¤ëª…","ì›” ê²°ì œê¸ˆì•¡","ê²°ì œì¼","ì¹´í…Œê³ ë¦¬","ê²°ì œì£¼ê¸°","URL","ì¼ì‹œì •ì§€","ë©”ëª¨","ìƒì„±ì¼"],a=s.map(t=>{var n,d,h;return[t.name,t.cost,t.billingDay,t.category,t.billingCycle||"monthly",t.url||"",t.isPaused?"ì˜ˆ":"ì•„ë‹ˆì˜¤",t.notes||"",((h=(d=(n=t.createdAt)==null?void 0:n.toDate)==null?void 0:d.call(n))==null?void 0:h.toISOString())||""]});return[r.join(","),...a.map(t=>t.map(n=>typeof n=="string"&&n.includes(",")?`"${n}"`:n).join(","))].join(`
`)},Qt=s=>{const r={version:"1.0",exportedAt:new Date().toISOString(),subscriptions:s.map(a=>({name:a.name,cost:a.cost,billingDay:a.billingDay,category:a.category,billingCycle:a.billingCycle||"monthly",url:a.url||"",customColor:a.customColor||"",isPaused:a.isPaused||!1,notes:a.notes||""}))};return JSON.stringify(r,null,2)},er=s=>{var l,t,n,d,h,g;const r=s.trim().split(`
`);if(r.length<2)return[];const a=[];for(let o=1;o<r.length;o++){const m=tr(r[o]);m.length>=4&&a.push({name:((l=m[0])==null?void 0:l.trim())||"",cost:parseInt(m[1])||0,billingDay:parseInt(m[2])||1,category:((t=m[3])==null?void 0:t.trim())||"Etc",billingCycle:((n=m[4])==null?void 0:n.trim())||"monthly",url:((d=m[5])==null?void 0:d.trim())||"",isPaused:((h=m[6])==null?void 0:h.trim())==="ì˜ˆ",notes:((g=m[7])==null?void 0:g.trim())||""})}return a},tr=s=>{const r=[];let a="",l=!1;for(let t=0;t<s.length;t++){const n=s[t];n==='"'?l=!l:n===","&&!l?(r.push(a),a=""):a+=n}return r.push(a),r},rr=s=>{try{const r=JSON.parse(s);return r.subscriptions&&Array.isArray(r.subscriptions)?r.subscriptions.map(a=>({name:a.name||"",cost:parseInt(a.cost)||0,billingDay:parseInt(a.billingDay)||1,category:a.category||"Etc",billingCycle:a.billingCycle||"monthly",url:a.url||"",customColor:a.customColor||"",isPaused:a.isPaused||!1,notes:a.notes||""})):[]}catch(r){return console.error("JSON parsing error:",r),[]}},xe=(s,r,a)=>{const l=new Blob([s],{type:a}),t=URL.createObjectURL(l),n=document.createElement("a");n.href=t,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},sr=s=>new Promise((r,a)=>{const l=new FileReader;l.onload=t=>r(t.target.result),l.onerror=t=>a(t),l.readAsText(s)});function ar({isOpen:s,onClose:r,subscriptions:a,onImport:l,onClearAll:t}){const{isDark:n,toggleTheme:d}=Me(),[h,g]=i.useState(!1),[o,m]=i.useState(null),u=i.useRef(null),p=()=>{const S=Zt(a),P=`subscriptions_${new Date().toISOString().split("T")[0]}.csv`;xe(S,P,"text/csv;charset=utf-8")},c=()=>{const S=Qt(a),P=`subscriptions_${new Date().toISOString().split("T")[0]}.json`;xe(S,P,"application/json")},N=async S=>{var O;const P=(O=S.target.files)==null?void 0:O[0];if(P){try{const x=await sr(P);let b=[];if(P.name.endsWith(".json")?b=rr(x):P.name.endsWith(".csv")&&(b=er(x)),b.length>0){const k=await l(b);m({success:!0,count:k}),setTimeout(()=>m(null),3e3)}else m({success:!1,message:"ìœ íš¨í•œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"}),setTimeout(()=>m(null),3e3)}catch(x){console.error("Import error:",x),m({success:!1,message:"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"}),setTimeout(()=>m(null),3e3)}u.current&&(u.current.value="")}},D=async()=>{await t(),g(!1),r()};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-50 flex items-end md:items-center justify-center backdrop-blur-sm modal-backdrop",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 w-full max-w-md rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden modal-content max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-dark-700 flex justify-between items-center bg-gray-50/50 dark:bg-dark-900/50 sticky top-0 z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:"ì„¤ì •"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-dark-300 p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:e.jsx(se,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"ë‹¤í¬ ëª¨ë“œ"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-400 mt-0.5",children:"ì–´ë‘ìš´ í…Œë§ˆë¡œ ì „í™˜í•©ë‹ˆë‹¤"})]}),e.jsx("button",{onClick:d,className:`relative w-14 h-7 rounded-full transition-colors ${n?"bg-primary-500":"bg-gray-200 dark:bg-dark-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-6 h-6 rounded-full bg-white shadow-md transition-transform flex items-center justify-center ${n?"translate-x-7":"translate-x-0.5"}`,children:n?e.jsx(pe,{size:12,className:"text-primary-500"}):e.jsx(he,{size:12,className:"text-amber-500"})})})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"ë°ì´í„° ë‚´ë³´ë‚´ê¸°"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:p,disabled:a.length===0,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ot,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"CSV"})]}),e.jsxs("button",{onClick:c,disabled:a.length===0,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(nt,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"JSON"})]})]}),e.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-dark-500 mt-2",children:[a.length,"ê°œì˜ êµ¬ë… ë°ì´í„°ë¥¼ ë‚´ë³´ëƒ…ë‹ˆë‹¤"]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"ë°ì´í„° ê°€ì ¸ì˜¤ê¸°"}),e.jsx("input",{ref:u,type:"file",accept:".csv,.json",onChange:N,className:"hidden",id:"import-file"}),e.jsxs("label",{htmlFor:"import-file",className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border-2 border-dashed border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700/50 text-gray-600 dark:text-dark-400 hover:border-primary-400 hover:text-primary-600 dark:hover:text-primary-400 cursor-pointer transition-colors",children:[e.jsx(lt,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"CSV ë˜ëŠ” JSON íŒŒì¼ ì„ íƒ"})]}),o&&e.jsxs("div",{className:`mt-2 p-2 rounded-lg text-xs flex items-center gap-2 ${o.success?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400"}`,children:[o.success?e.jsx(je,{size:14}):e.jsx(Q,{size:14}),o.success?`${o.count}ê°œì˜ êµ¬ë…ì„ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤`:o.message]})]}),e.jsx("hr",{className:"border-gray-100 dark:border-dark-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm mb-3",children:"ìœ„í—˜ êµ¬ì—­"}),h?e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-3",children:[e.jsx(Q,{size:18}),e.jsx("span",{className:"font-medium text-sm",children:"ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"})]}),e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400/80 mb-3",children:"ëª¨ë“  êµ¬ë… ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤. ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2 px-4 rounded-lg bg-white dark:bg-dark-700 text-gray-600 dark:text-dark-300 text-sm font-medium hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:D,className:"flex-1 py-2 px-4 rounded-lg bg-red-500 text-white text-sm font-medium hover:bg-red-600 transition-colors",children:"ì‚­ì œ"})]})]}):e.jsxs("button",{onClick:()=>g(!0),disabled:a.length===0,className:"w-full flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ke,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"ëª¨ë“  ë°ì´í„° ì‚­ì œ"})]})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-dark-500",children:"êµ¬ë… ë§¤ë‹ˆì € Pro v1.0.0"})})]})]})}):null}function or({onSignUp:s}){const r=ve(),[a,l]=i.useState(null),[t,n]=i.useState(!1);if(i.useEffect(()=>{const h=()=>{const o=Ut();l(o)};h();const g=setInterval(h,6e4);return()=>clearInterval(g)},[]),!a||t)return null;const d=a.remainingMinutes<=5;return e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 ${d?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gradient-to-r from-amber-500 to-orange-500"} text-white py-2 px-4 shadow-lg`,children:e.jsxs("div",{className:"max-w-lg mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(fe,{size:16,className:"animate-pulse"}),e.jsxs("span",{children:[e.jsx("strong",{children:"ì²´í—˜ ëª¨ë“œ"})," - ",a.remainingMinutes,"ë¶„ í›„ ë°ì´í„°ê°€ ì‚¬ë¼ì§‘ë‹ˆë‹¤"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>r("/login"),className:"flex items-center gap-1 px-3 py-1 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-medium transition-colors",children:[e.jsx(it,{size:14}),"ê°€ì…í•˜ê³  ì €ì¥í•˜ê¸°"]}),e.jsx("button",{onClick:()=>n(!0),className:"p-1 hover:bg-white/20 rounded transition-colors",children:e.jsx(se,{size:16})})]})]})})}const nr=i.lazy(()=>Y(()=>import("./LoginPage-0RtMcJ_w.js"),__vite__mapDeps([0,1,2,3]))),lr=i.lazy(()=>Y(()=>import("./ForgotPasswordPage-DjlEUA8M.js"),__vite__mapDeps([4,1,2,3]))),ir=i.lazy(()=>Y(()=>import("./ProfilePage-Dgo8ceS5.js"),__vite__mapDeps([5,1,2,3]))),cr=i.lazy(()=>Y(()=>import("./AdminDashboard-DGvS2ei-.js"),__vite__mapDeps([6,1,2,3])));function dr(){return e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsx("div",{className:"flex flex-col items-center gap-4",children:e.jsx("div",{className:"w-12 h-12 spinner"})})})}function mr(){const{user:s,isDemo:r,isAuthenticated:a}=q(),l=Ft(r?null:s),[t,n]=i.useState([]);i.useEffect(()=>{r&&n(T())},[r]);const d=r?t:l.subscriptions,h=r?!1:l.loading,g=i.useCallback(async y=>{if(r){const v=Z({...y,id:`demo-${Date.now()}`});return n(T()),v.id}return l.addSubscription(y)},[r,l]),o=i.useCallback(async(y,v)=>{if(r){const J=T().find(We=>We.id===y);J&&(Z({...J,...v}),n(T()));return}return l.updateSubscription(y,v)},[r,l]),m=i.useCallback(async y=>{if(r){zt(y),n(T());return}return l.deleteSubscription(y)},[r,l]),u=i.useCallback(async y=>{if(r){const _=T().find(J=>J.id===y);_&&(Z({..._,isPaused:!_.isPaused}),n(T()));return}return l.togglePause(y)},[r,l]),[p,c]=i.useState(!1),[N,D]=i.useState(!1),[S,P]=i.useState(null),[O,x]=i.useState(null),[b,k]=i.useState(""),[C,M]=i.useState(null),[z,V]=i.useState("daysLeft"),[f,w]=i.useState(!0),j=i.useMemo(()=>d.map(y=>({...y,daysLeft:Ie(y.billingDay)})),[d]),L=i.useMemo(()=>d.filter(y=>!y.isPaused).reduce((y,v)=>y+(v.cost||0),0),[d]),I=L*12,Fe=i.useMemo(()=>{const y={};return d.filter(v=>!v.isPaused).forEach(v=>{y[v.category]||(y[v.category]={count:0,total:0}),y[v.category].count+=1,y[v.category].total+=v.cost}),y},[d]),ze=i.useMemo(()=>j.filter(y=>!y.isPaused&&y.daysLeft<=3).sort((y,v)=>y.daysLeft-v.daysLeft),[j]),R=i.useCallback((y,v="success")=>{x({message:y,type:v}),setTimeout(()=>x(null),3e3)},[]),K=i.useCallback((y=null)=>{P(y),c(!0)},[]),Re=i.useCallback(()=>{c(!1),P(null)},[]),Ue=i.useCallback(async(y,v)=>{try{v?(await o(v,y),R("êµ¬ë…ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤")):(await g(y),R("ìƒˆ êµ¬ë…ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤"))}catch(_){R("ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤","error"),console.error(_)}},[g,o,R]),$e=i.useCallback(async y=>{if(confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await m(y),R("êµ¬ë…ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤")}catch(v){R("ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤","error"),console.error(v)}},[m,R]),_e=i.useCallback(y=>{M(v=>v===y?null:y)},[]),Be=d.filter(y=>!y.isPaused).length;return h?e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 spinner"}),e.jsx("p",{className:"text-gray-500 dark:text-dark-400 text-sm",children:"ë¡œë”© ì¤‘..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900 text-gray-800 dark:text-white font-sans pb-24 md:pb-10 transition-colors",children:[r&&e.jsx(or,{}),e.jsx($t,{subscriptionCount:Be,onOpenSettings:()=>D(!0)}),e.jsxs("main",{className:`max-w-lg mx-auto px-4 py-6 space-y-6 ${r?"pt-16":""}`,children:[e.jsx(Gt,{totalMonthlyCost:L,totalYearlyCost:I,subscriptions:j}),e.jsx(Yt,{items:ze}),e.jsx(Ht,{subscriptions:j,totalMonthlyCost:L,totalYearlyCost:I,categoryBreakdown:Fe,onCategoryClick:_e}),d.length>0&&e.jsx(Vt,{searchQuery:b,onSearchChange:k,selectedCategory:C,onCategoryChange:M,sortBy:z,onSortChange:V,showPaused:f,onShowPausedChange:w}),e.jsx(Kt,{subscriptions:j,searchQuery:b,selectedCategory:C,sortBy:z,showPaused:f,onEdit:K,onDelete:$e,onTogglePause:u,onAddNew:()=>K()})]}),e.jsx("button",{onClick:()=>K(),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-xl shadow-primary-500/40 flex items-center justify-center transition-all hover:scale-105 active:scale-95 z-40 fab-pulse","aria-label":"ìƒˆ êµ¬ë… ì¶”ê°€",children:e.jsx(we,{size:24})}),e.jsx(Xt,{isOpen:p,onClose:Re,onSave:Ue,editData:S}),e.jsx(ar,{isOpen:N,onClose:()=>D(!1),subscriptions:d,onImport:r?null:l.importSubscriptions,onClearAll:r?null:l.clearAllSubscriptions}),O&&e.jsx("div",{className:`toast ${O.type==="error"?"bg-red-500 text-white":"bg-gray-900 dark:bg-white text-white dark:text-gray-900"}`,children:O.message})]})}function ge({children:s}){const{isAuthenticated:r,loading:a}=q();return a?e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsx("div",{className:"w-12 h-12 spinner"})}):r?s:e.jsx(Ne,{to:"/login",replace:!0})}function ur({children:s}){const{isAdmin:r,loading:a}=q();return a?e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-dark-900",children:e.jsx("div",{className:"w-12 h-12 spinner"})}):r?s:e.jsx(Ne,{to:"/",replace:!0})}function xr(){return e.jsx(Oe,{children:e.jsx(Tt,{children:e.jsx(dt,{children:e.jsx(i.Suspense,{fallback:e.jsx(dr,{}),children:e.jsxs(mt,{children:[e.jsx(W,{path:"/login",element:e.jsx(nr,{})}),e.jsx(W,{path:"/forgot-password",element:e.jsx(lr,{})}),e.jsx(W,{path:"/profile",element:e.jsx(ge,{children:e.jsx(ir,{})})}),e.jsx(W,{path:"/admin",element:e.jsx(ur,{children:e.jsx(cr,{})})}),e.jsx(W,{path:"/",element:e.jsx(ge,{children:e.jsx(mr,{})})})]})})})})})}ee.createRoot(document.getElementById("root")).render(e.jsx(ut.StrictMode,{children:e.jsx(Oe,{children:e.jsx(xr,{})})}));export{X as d,q as u};
