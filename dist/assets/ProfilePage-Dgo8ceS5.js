import{j as e,H as y,I as A,b as w,B as q,l as E,U as F,v as O,J as B,w as I,L as M,o as T}from"./vendor-ui-xJyZwkfJ.js";import{u as H,r as o}from"./vendor-react-DAxIwopO.js";import{u as J}from"./index-M6CRROlJ.js";import"./vendor-firebase-cSXO_zK6.js";function V(){var h,p,k,f;const m=H(),{user:r,userProfile:l,updateUserProfile:j,changePassword:N,signOut:v,isAdmin:g}=J(),[c,i]=o.useState(!1),[n,s]=o.useState(null),[P,u]=o.useState(!1),[C,b]=o.useState(!1),[d,z]=o.useState({displayName:(l==null?void 0:l.displayName)||(r==null?void 0:r.displayName)||"",photoURL:(l==null?void 0:l.photoURL)||(r==null?void 0:r.photoURL)||""}),[a,x]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),S=async t=>{t.preventDefault(),i(!0),s(null);try{await j(d),s({type:"success",text:"프로필이 업데이트되었습니다"})}catch{s({type:"error",text:"업데이트 중 오류가 발생했습니다"})}finally{i(!1)}},U=async t=>{if(t.preventDefault(),a.newPassword!==a.confirmPassword){s({type:"error",text:"새 비밀번호가 일치하지 않습니다"});return}if(a.newPassword.length<6){s({type:"error",text:"비밀번호는 6자 이상이어야 합니다"});return}i(!0),s(null);try{await N(a.currentPassword,a.newPassword),s({type:"success",text:"비밀번호가 변경되었습니다"}),x({currentPassword:"",newPassword:"",confirmPassword:""}),b(!1)}catch{s({type:"error",text:"현재 비밀번호가 올바르지 않습니다"})}finally{i(!1)}},L=async()=>{await v(),m("/login")},D=((p=(h=r==null?void 0:r.providerData)==null?void 0:h[0])==null?void 0:p.providerId)==="password";return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900 pb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary-600 to-violet-700 text-white",children:e.jsxs("div",{className:"max-w-lg mx-auto px-4 py-6",children:[e.jsxs("button",{onClick:()=>m("/"),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 text-sm",children:[e.jsx(y,{size:18}),"돌아가기"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-white/10 flex items-center justify-center text-3xl font-bold overflow-hidden",children:d.photoURL?e.jsx("img",{src:d.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):((f=(k=d.displayName)==null?void 0:k[0])==null?void 0:f.toUpperCase())||"?"}),e.jsx("button",{className:"absolute bottom-0 right-0 w-7 h-7 bg-white rounded-full flex items-center justify-center text-primary-600 shadow-lg",children:e.jsx(A,{size:14})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:d.displayName||"사용자"}),e.jsx("p",{className:"text-white/70 text-sm",children:r==null?void 0:r.email}),g&&e.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 px-2 py-0.5 bg-amber-500/20 text-amber-300 text-xs font-medium rounded-full",children:[e.jsx(w,{size:10}),"관리자"]})]})]})]})}),e.jsxs("div",{className:"max-w-lg mx-auto px-4 -mt-4",children:[n&&e.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 text-sm ${n.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:[n.type==="success"?e.jsx(q,{size:16}):e.jsx(E,{size:16}),n.text]}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-gray-100 dark:border-dark-700 p-5 mb-4",children:[e.jsxs("h2",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(F,{size:18,className:"text-primary-500"}),"프로필 정보"]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"이름"}),e.jsx("input",{type:"text",value:d.displayName,onChange:t=>z({...d,displayName:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"이메일"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"email",value:(r==null?void 0:r.email)||"",disabled:!0,className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-100 dark:bg-dark-600 text-gray-500 dark:text-dark-400 cursor-not-allowed"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-dark-500 mt-1",children:"이메일은 변경할 수 없습니다"})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white rounded-xl font-medium transition-all flex items-center justify-center gap-2",children:c?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(B,{size:18}),"저장하기"]})})]})]}),D&&e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-gray-100 dark:border-dark-700 p-5 mb-4",children:[e.jsxs("h2",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-primary-500"}),"비밀번호 변경"]}),C?e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"현재 비밀번호"}),e.jsx("input",{type:"password",value:a.currentPassword,onChange:t=>x({...a,currentPassword:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"새 비밀번호"}),e.jsx("input",{type:"password",value:a.newPassword,onChange:t=>x({...a,newPassword:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-300 mb-1.5",children:"새 비밀번호 확인"}),e.jsx("input",{type:"password",value:a.confirmPassword,onChange:t=>x({...a,confirmPassword:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 outline-none transition-all",required:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"flex-1 py-2.5 border border-gray-200 dark:border-dark-600 rounded-xl font-medium text-gray-600 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-700 transition-all",children:"취소"}),e.jsx("button",{type:"submit",disabled:c,className:"flex-1 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-medium transition-all",children:"변경하기"})]})]}):e.jsx("button",{onClick:()=>b(!0),className:"w-full py-3 border border-gray-200 dark:border-dark-600 rounded-xl font-medium text-gray-600 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-700 transition-all",children:"비밀번호 변경하기"})]}),g&&e.jsxs("button",{onClick:()=>m("/admin"),className:"w-full mb-4 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"text-amber-600 dark:text-amber-400",size:20}),e.jsx("span",{className:"font-medium text-amber-800 dark:text-amber-300",children:"관리자 대시보드"})]}),e.jsx(y,{size:18,className:"rotate-180 text-amber-600 dark:text-amber-400"})]}),e.jsxs("button",{onClick:L,className:"w-full mb-4 p-4 bg-white dark:bg-dark-800 border border-gray-200 dark:border-dark-700 rounded-2xl flex items-center gap-3 text-gray-600 dark:text-dark-300 hover:bg-gray-50 dark:hover:bg-dark-700 transition-all",children:[e.jsx(M,{size:20}),e.jsx("span",{className:"font-medium",children:"로그아웃"})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-red-200 dark:border-red-900/50 p-5",children:[e.jsxs("h2",{className:"font-bold text-red-600 dark:text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(T,{size:18}),"계정 삭제"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-dark-400 mb-4",children:"계정을 삭제하면 모든 데이터가 영구적으로 삭제됩니다. 이 작업은 되돌릴 수 없습니다."}),P?e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-3 font-medium",children:"정말로 계정을 삭제하시겠습니까?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-2 bg-white dark:bg-dark-700 border border-gray-200 dark:border-dark-600 rounded-lg text-sm font-medium",children:"취소"}),e.jsx("button",{className:"flex-1 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600",children:"삭제"})]})]}):e.jsx("button",{onClick:()=>u(!0),className:"w-full py-2.5 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 rounded-xl font-medium hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:"계정 삭제하기"})]})]})]})}export{V as default};
